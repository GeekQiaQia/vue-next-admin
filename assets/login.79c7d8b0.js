var L=Object.defineProperty,s=Object.defineProperties,e=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,t=(s,e,M)=>e in s?L(s,e,{enumerable:!0,configurable:!0,writable:!0,value:M}):s[e]=M;import{v as l}from"./index.9d9d1800.js";import{d as o,g as a,u as r,r as i,n as w,s as N,_ as D,p as S,a as c,i as g,o as d,c as y,b as n,E as x,w as E,A as m}from"./vendor.9109f4bb.js";import{r as p}from"./request.ddebe1c4.js";class T{static postLogin(L){return p({url:"/api/auth/user/login",method:"POST",json:!0,data:L}).then((L=>200===L.status?Promise.resolve(L):Promise.reject(L)))}static postRegister(L){return p({url:"/api/auth/user/register",method:"POST",json:!0,data:L}).then((L=>200===L.status?Promise.resolve(L):Promise.reject(L)))}}var z=o({name:"Login",setup(){const L=a(),o=r(),S=i(),c=i(),g=w({loginForm:{email:"",password:""},registerForm:{email:"",capcha:null,password:""},showLogin:!0});return d=((L,s)=>{for(var e in s||(s={}))j.call(s,e)&&t(L,e,s[e]);if(M)for(var e of M(s))u.call(s,e)&&t(L,e,s[e]);return L})({vueLogo:l,viteLogo:"./assets/logo-vite.63a26457.svg"},N(g)),s(d,e({loginFormRef:S,registerRef:c,rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入账号",trigger:"change"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],capcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},submitForm:()=>{S.value.validate((async s=>{var e,M;if(s)try{const{email:s,password:j}=g.loginForm,u={email:s,password:j},t=await T.postLogin(u),l=null!=(M=null==(e=null==t?void 0:t.data)?void 0:e.accessToken)?M:null;if(l)if(sessionStorage.setItem("auth","true"),sessionStorage.setItem("accessToken",l),o.query.redirect){const s=o.query.redirect;L.push({path:s})}else L.push("/");else D({type:"warning",message:"账号或者密码有误"})}catch(j){console.error(j)}return!1}))},handleRegister:()=>{c.value.validate((async L=>{if(L)try{const{email:L,password:s,capcha:e}=g.registerForm,M={email:L,capcha:e,password:s};T.postRegister(M).then((L=>{console.log(L),D({type:"success",message:"模拟注册成功"})}))}catch(s){console.error(s)}}))},resetForm:()=>{S.value.resetFields()}}));var d}});const C=E();S("data-v-1fd4d898");const I={class:"container"},O={class:"login-container"},Y={class:"login-left"},Q=n("div",{class:"top"},[n("div",{class:"title"},[n("span",null,"欢迎使用")]),n("div",{class:"desc"},[n("span",null,"Vite2.x + ElementPlus + Vue3.x + TypeScript")])],-1),A={class:"bottom"},h=n("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTMuNzEgMzgiPjxkZWZzPjxzdHlsZT4uY2xzLTEsLmNscy0ye2ZpbGw6IzQwOWVmZjt9LmNscy0xe2ZpbGwtcnVsZTpldmVub2RkO308L3N0eWxlPjwvZGVmcz48dGl0bGU+6LWE5rqQIDE8L3RpdGxlPjxnIGlkPSLlm77lsYJfMiIgZGF0YS1uYW1lPSLlm77lsYIgMiI+PGcgaWQ9IuWbvuWxgl8xLTIiIGRhdGEtbmFtZT0i5Zu+5bGCIDEiPjxwYXRoIGlkPSJTaGFwZS1Db3B5IiBjbGFzcz0iY2xzLTEiIGQ9Ik0xNDIsMjYuMTZzLjI4LDAsLjgyLDBhLjcyLjcyLDAsMCwxLC42OS40MXMxLjA4LDIsMS4zNywyLjQ4LDAsLjQyLS4xMi40MWgwcy0uMzEsMC0zLjQ1LDBhNC45Myw0LjkzLDAsMCwxLTQuNTQtNC41NHYtN0gxMzQuM1YxNS4yOGMwLS4zNi40MS0uNDEuNDEtLjQxaDIuMDdWMTIuMjVhLjYuNiwwLDAsMSwuNDEtLjU1bDIuMy0uNjZjLjM0LS4xLjU5LDAsLjU5LjM1VjE1aDMuNThjLjM0LDAsLjQxLjQxLjQxLjQxVjE4aC00djYuMDZjMCwxLjc2LDEuOTMsMi4wNywxLjkzLDIuMDdabS0xMC42LDNoLTIuMmMtLjQzLDAtLjQxLS41NS0uNDEtLjU1VjE4LjQ1YzAtLjYyLS44My0uODMtLjgzLS44M2gtNC41NGMtLjY4LDAtLjY5LjgzLS42OS44M1YyOC43N2EuNDEuNDEsMCwwLDEtLjQxLjQyaC0yLjJjLS40OCwwLS40MS0uNTUtLjQxLS41NVYxNS44M2MwLTEsMS4yNC0xLjI0LDEuMjQtMS4yNGg5LjYzYzEsMCwxLjIzLDEuMjQsMS4yMywxLjI0VjI4LjVjMCwuNzItLjQxLjY5LS40MS42OVpNMTE1LjczLDIzLjRIMTA3LjJ2Mi4wN2MwLC43NCwxLDEsMSwxSDExNWExLjE2LDEuMTYsMCwwLDEsLjgyLjQycy42MSwxLjI1LjgzLDEuNzktLjQxLjU1LS40MS41NUgxMDZjLTEuMjQsMC0xLjUxLTEuNTItMS41MS0xLjUyVjE2YzAtLjY3LDEtMSwxLTFoMTAuMzJjMSwwLDEuMjQsMS4yMywxLjI0LDEuMjN2NS45M2MwLDEtMS4yNCwxLjIzLTEuMjQsMS4yM1ptLTEuNTItNC45NXMtLjA4LS42OS0uNjgtLjY5aC01LjY1cy0uNjguMTgtLjY4LjY5VjIwYS42OS42OSwwLDAsMCwuNjguNjloNS42NWEuOS45LDAsMCwwLC42OC0uODNWMTguNDVaTTEwMS4yOCwyOS4xOWgtMi4yYy0uMjksMC0uNDEtLjQyLS40MS0uNDJWMTguNDVjMC0uNjQtLjgzLS44My0uODMtLjgzSDk1Ljc4Yy0uNTgsMC0uNjkuODMtLjY5LjgzVjI4Ljc3YzAsLjM1LS40MS40Mi0uNDEuNDJoLTIuMmMtLjMxLDAtLjQyLS40Mi0uNDItLjQyVjE4LjQ1YzAtLjY2LS44Mi0uODMtLjgyLS44M0g4OS4xN2MtLjYzLDAtLjY4LjgzLS42OC44M1YyOC43N2EuMzkuMzksMCwwLDEtLjQyLjQyaC0yLjJhLjQxLjQxLDAsMCwxLS40MS0uNDJWMTUuNjljMC0uNzUsMS4xLTEuMSwxLjEtMS4xaDEzLjc2YzEuMSwwLDEuMzcsMS4zOCwxLjM3LDEuMzh2MTIuOGMwLC40OC0uNDEuNDItLjQxLjQyWm0tMjAtNS43OUg3Mi44djIuMDdjMCwuNzQsMSwxLDEsMWg2Ljg4YTEuMTksMS4xOSwwLDAsMSwuODMuNDJzLjYsMS4yNS44MiwxLjc5LS40MS41NS0uNDEuNTVINzEuNTZjLTEuMjQsMC0xLjUxLTEuNTItMS41MS0xLjUyVjE2YzAtLjY3LDEtMSwxLTFIODEuMzNjMSwwLDEuMjQsMS4yMywxLjI0LDEuMjN2NS45M2MwLDEtMS4yNCwxLjIzLTEuMjQsMS4yM1ptLTEuNTEtNC45NXMtLjA5LS42OS0uNjktLjY5SDczLjQ5cy0uNjkuMTgtLjY5LjY5VjIwYS42OS42OSwwLDAsMCwuNjkuNjloNS42NGEuOTEuOTEsMCwwLDAsLjY5LS44M1YxOC40NVpNNjgsMjkuMTlINjIuNzZhNC4zNSw0LjM1LDAsMCwxLTQuMTMtNGMwLTMuOTEsMC0xNi4xLDAtMTYuMWgyLjQ4YS43OS43OSwwLDAsMSwuODIuODJWMjQuMzdBMi41OCwyLjU4LDAsMCwwLDYzLjg2LDI2aDIuMnMuNzItLjIzLDEuMjQuNjlsMS4xLDEuOTNzLjA4LjU1LS40MS41NVptLTI2LjU2LS44M1YxMC4xOWExLDEsMCwwLDEsLjY5LTFINTUuMDVjLjczLDAsLjQyLjgzLjQyLjgzcy0uNDEsMS4xMi0uNjksMS42NWExLDEsMCwwLDEtLjgzLjU1SDQ1LjU2YS43Ny43NywwLDAsMC0uODMuNjl2NC41NGg5LjVjLjU1LDAsLjI3LjY5LjI3LjY5cy0uNzEsMS41Mi0xLDEuOTNhMS4wNSwxLjA1LDAsMCwxLS44My40MWgtOHY0LjgyYS45MS45MSwwLDAsMCwuNjkuODNoOC44MWEuODUuODUsMCwwLDEsLjgyLjQxbDEuMjQsMS45M2MuMzcuNTYtLjE0LjY5LS4xNC42OUg0Mi4yNkM0MS42OCwyOS4xOSw0MS40MywyOC4zNiw0MS40MywyOC4zNlptLTguMTQtMS4xNGMwLDEuNTctLjgzLDEuOTMtLjgzLDEuOTNTMTguMzIsMzcuMzEsMTcuNCwzNy44M2ExLjY4LDEuNjgsMCwwLDEtMS41MiwwUzEuMDksMjkuMjUuNTUsMjguODdhMS4yOSwxLjI5LDAsMCwxLS41NS0xczAtMTcsMC0xNy43OFMxLDguNzYsMSw4Ljc2TDE1Ljc1LjIxYTIsMiwwLDAsMSwxLjc5LDBTMzAuNiw3LjgsMzIsOC42MmEyLjA4LDIuMDgsMCwwLDEsMS4yNSwyLjA2czAsMTUuMDcsMCwxNi41NFptLTUuOS0xN2MtMy0xLjc0LTEwLjE2LTUuODctMTAuMTYtNS44N2ExLjU4LDEuNTgsMCwwLDAtMS40MSwwTDQuMjIsMTFzLS43Ny40Ni0uNzYsMS4wOFMzLjQ2LDI2LDMuNDYsMjZhMSwxLDAsMCwwLC40My43NWMuNDMuMywxMiw3LDEyLDdhMS4zLDEuMywwLDAsMCwxLjE5LDBjLjcyLS40LDExLjgyLTYuNzksMTEuODItNi43OXMuNjUtLjI4LjY1LTEuNTFjMC0uMzYsMC0xLjc0LDAtMy40N0wxNi41MywyOS44OHYtM2EzLDMsMCwwLDEsMS0yLjA3bDExLjU2LTdhMi40OSwyLjQ5LDAsMCwwLC41NS0xLjQ2YzAtMS4yNywwLTIuMzcsMC0zLjA3TDE2LjUzLDIxLjJWMThhMi4xNywyLjE3LDAsMCwxLC44My0xLjc5WiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTE1MC4zMiwxMS4yMWgtMi4yNHYtNWMwLS4xMS4xMi0uMjEuMjktLjI0bDEuNDQtLjI2Yy4yNiwwLC41MS4wNy41MS4yNFoiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0xNDguMDgsOWgyLjI0djUuMTFjMCwuMTEtLjExLjIxLS4yOC4yNWwtMS40NS4yNmMtLjI2LjA1LS41MS0uMDctLjUxLS4yNFoiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik0xNDUuMDksOWg4LjIyYS40LjQsMCwwLDEsLjQuNHYxLjg1YTAsMCwwLDAsMSwwLDBoLTlhMCwwLDAsMCwxLDAsMFY5LjM2QS40LjQsMCwwLDEsMTQ1LjA5LDlaIi8+PC9nPjwvZz48L3N2Zz4="},null,-1),f={class:"login-right"},b={class:"btn-container"},v=m("登录"),U={class:"operation"},F=n("span",{class:"forget-password"},"忘记密码",-1),V={class:"btn-container"},k=m("完成注册"),W={class:"go-login"},G=m("已有账号"),P=n("em",null,"去登陆",-1);c();const Z=C(((L,s,e,M,j,u)=>{const t=g("el-input"),l=g("el-form-item"),o=g("el-button"),a=g("el-form");return d(),y("div",I,[n("div",O,[n("div",Y,[Q,n("div",A,[h,n("div",null,[n("img",{class:"viteLogo",src:L.viteLogo},null,8,["src"]),n("img",{class:"vueLogo",src:L.vueLogo},null,8,["src"])])])]),n("div",f,[L.showLogin?(d(),y(a,{key:0,ref:"loginFormRef",model:L.loginForm,"status-icon":"","hide-required-asterisk":!0,rules:L.rules,"label-width":"100px",class:"login-form"},{default:C((()=>[n(l,{label:"账号",prop:"email"},{default:C((()=>[n(t,{modelValue:L.loginForm.email,"onUpdate:modelValue":s[1]||(s[1]=s=>L.loginForm.email=s),autocomplete:"off",placeholder:"请输入登录邮箱(admin@outlook.com)"},null,8,["modelValue"])])),_:1}),n(l,{label:"密码",prop:"password"},{default:C((()=>[n(t,{modelValue:L.loginForm.password,"onUpdate:modelValue":s[2]||(s[2]=s=>L.loginForm.password=s),type:"password",autocomplete:"off",placeholder:"请输入密码(admin)"},null,8,["modelValue"])])),_:1}),n(l,null,{default:C((()=>[n("div",b,[n(o,{type:"primary",style:{width:"100%"},onClick:s[3]||(s[3]=s=>L.submitForm())},{default:C((()=>[v])),_:1})]),n("div",U,[n("span",{class:"free-register",onClick:s[4]||(s[4]=s=>L.showLogin=!L.showLogin)},"免费注册"),F])])),_:1})])),_:1},8,["model","rules"])):x("",!0),L.showLogin?x("",!0):(d(),y(a,{key:1,ref:"registerRef",model:L.registerForm,"status-icon":"","hide-required-asterisk":"true",rules:L.rules,"label-width":"100px",class:"login-form"},{default:C((()=>[n(l,{label:"邮箱",prop:"email"},{default:C((()=>[n(t,{modelValue:L.registerForm.email,"onUpdate:modelValue":s[5]||(s[5]=s=>L.registerForm.email=s),autocomplete:"off",placeholder:"请输入注册邮箱"},null,8,["modelValue"])])),_:1}),n(l,{label:"验证码",prop:"capcha"},{default:C((()=>[n(t,{modelValue:L.registerForm.capcha,"onUpdate:modelValue":s[6]||(s[6]=s=>L.registerForm.capcha=s),modelModifiers:{number:!0},maxlength:"6",autocomplete:"off",placeholder:"请输入验证码"},null,8,["modelValue"])])),_:1}),n(l,{label:"密码",prop:"password"},{default:C((()=>[n(t,{modelValue:L.registerForm.password,"onUpdate:modelValue":s[7]||(s[7]=s=>L.registerForm.password=s),type:"password",autocomplete:"off",placeholder:"请输入密码(admin)"},null,8,["modelValue"])])),_:1}),n(l,null,{default:C((()=>[n("div",V,[n(o,{type:"primary",style:{width:"100%"},onClick:s[8]||(s[8]=s=>L.handleRegister())},{default:C((()=>[k])),_:1})]),n("div",W,[n("span",{class:"to-login",onClick:s[9]||(s[9]=s=>L.showLogin=!L.showLogin)},[G,P])])])),_:1})])),_:1},8,["model","rules"]))])])])}));z.render=Z,z.__scopeId="data-v-1fd4d898";export default z;
