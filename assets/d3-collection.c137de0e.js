function n(){}function t(t,r){var e=new n;if(t instanceof n)t.each((function(n,t){e.set(t,n)}));else if(Array.isArray(t)){var i,u=-1,o=t.length;if(null==r)for(;++u<o;)e.set(u,t[u]);else for(;++u<o;)e.set(r(i=t[u],u,t),i)}else if(t)for(var s in t)e.set(s,t[s]);return e}function r(){var n,r,s,f=[],c=[];function a(e,i,u,o){if(i>=f.length)return null!=n&&e.sort(n),null!=r?r(e):e;for(var s,c,h,l=-1,v=e.length,p=f[i++],y=t(),$=u();++l<v;)(h=y.get(s=p(c=e[l])+""))?h.push(c):y.set(s,[c]);return y.each((function(n,t){o($,t,a(n,i,u,o))})),$}function h(n,t){if(++t>f.length)return n;var e,i=c[t-1];return null!=r&&t>=f.length?e=n.entries():(e=[],n.each((function(n,r){e.push({key:r,values:h(n,t)})}))),null!=i?e.sort((function(n,t){return i(n.key,t.key)})):e}return s={object:function(n){return a(n,0,e,i)},map:function(n){return a(n,0,u,o)},entries:function(n){return h(a(n,0,u,o),0)},key:function(n){return f.push(n),s},sortKeys:function(n){return c[f.length-1]=n,s},sortValues:function(t){return n=t,s},rollup:function(n){return r=n,s}}}function e(){return{}}function i(n,t,r){n[t]=r}function u(){return t()}function o(n,t,r){n.set(t,r)}function s(){}n.prototype=t.prototype={constructor:n,has:function(n){return"$"+n in this},get:function(n){return this["$"+n]},set:function(n,t){return this["$"+n]=t,this},remove:function(n){var t="$"+n;return t in this&&delete this[t]},clear:function(){for(var n in this)"$"===n[0]&&delete this[n]},keys:function(){var n=[];for(var t in this)"$"===t[0]&&n.push(t.slice(1));return n},values:function(){var n=[];for(var t in this)"$"===t[0]&&n.push(this[t]);return n},entries:function(){var n=[];for(var t in this)"$"===t[0]&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var n=0;for(var t in this)"$"===t[0]&&++n;return n},empty:function(){for(var n in this)if("$"===n[0])return!1;return!0},each:function(n){for(var t in this)"$"===t[0]&&n(this[t],t.slice(1),this)}};var f=t.prototype;s.prototype={constructor:s,has:f.has,add:function(n){return this["$"+(n+="")]=n,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};export{t as m,r as n};
