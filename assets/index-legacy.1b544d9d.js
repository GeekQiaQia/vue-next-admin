!function(){function t(t,a){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==a)return;var n,r,o=[],l=!0,u=!1;try{for(a=a.call(t);!(l=(n=a.next()).done)&&(o.push(n.value),!e||o.length!==e);l=!0);}catch(i){u=!0,r=i}finally{try{l||null==a.return||a.return()}finally{if(u)throw r}}return o}(t,a)||function(t,a){if(!t)return;if("string"==typeof t)return e(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,a)}(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function a(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o=document.createElement("style");o.innerHTML=".task-table[data-v-48a10ce8]{margin-top:16px}.task-table__add[data-v-48a10ce8]{margin-top:16px;text-align:center}.task-column[data-v-4c7abf2b]{display:flex;overflow-y:scroll}.task-column[data-v-4c7abf2b] .el-card__body{padding:0 6px}.task-column>div[data-v-4c7abf2b]{width:270px;border:1px solid #dddada;margin:0 10px;height:100vh;min-height:600px;min-width:220px}.task-column__head[data-v-4c7abf2b]{display:flex;height:60px;line-height:60px}.task-column__num[data-v-4c7abf2b]{width:40px;padding:15px 0}.task-column__num-count[data-v-4c7abf2b]{border:1px solid #ebe5e5;border-radius:50%;width:30px;height:30px;line-height:30px;text-align:center;font-size:14px;color:#878383;font-weight:bolder}.task-column__type[data-v-4c7abf2b]{flex-grow:1;color:#605e5e;font-size:14px}.task-column__add[data-v-4c7abf2b]{width:20px;font-size:24px;color:#aaa;cursor:pointer}.task-column__content[data-v-4c7abf2b]{margin-bottom:6px;border-radius:6px;border:1px solid #eee;padding:10px 6px;color:#706e6e}.task-column__content-detail[data-v-4c7abf2b]{font-size:12px;margin-top:16px;text-align:right}.task-column__content-time[data-v-4c7abf2b]{margin-left:16px}.board[data-v-002a6822]{padding:0 20px}.board__info[data-v-002a6822]{text-align:left}.board__info>span[data-v-002a6822]{font-size:12px;margin-bottom:20px;display:inline-block}.board__project[data-v-002a6822]{text-align:left}.board__project-title[data-v-002a6822]{font-size:18px;font-weight:bold}.board__project-list[data-v-002a6822]{display:flex;flex-wrap:wrap;margin-top:16px}.board__project-item[data-v-002a6822]{width:50%;width:calc(50% - 100px);margin-bottom:30px;margin-left:50px;cursor:pointer;border:1px solid transparent;max-width:700px;min-width:500px}.board__project-item--active[data-v-002a6822]{border-color:#2799c1;border-radius:4px}.board__project-avatar[data-v-002a6822]{font-size:20px;background:#7d9fe3;font-weight:bold}.board__detail[data-v-002a6822]{text-align:left}.board__detail-head[data-v-002a6822]{color:#706e6e;margin-bottom:30px}.board__detail-search[data-v-002a6822]{margin-top:30px;text-align:left}.board__detail-title[data-v-002a6822]{font-size:18px;font-weight:bold;margin-bottom:16px}.board__detail-empty[data-v-002a6822]{color:#d3d0d0;line-height:200px;text-align:center}.board__detail-wrap[data-v-002a6822]{min-height:200px}.board__detail-name[data-v-002a6822]{font-weight:bold}.board__detail-tag[data-v-002a6822]{margin-left:16px}.board__detail-task[data-v-002a6822]{margin-top:30px}\n",document.head.appendChild(o),System.register(["./lodash-legacy.7d39c2c9.js","./index-legacy.f29b592d.js","./vendor-legacy.5aaa7420.js","./sortable.esm-legacy.e139713c.js"],(function(e){"use strict";var a,r,o,l,u,i,d,c,s,f,p,m,v,b,_,k,g,y,x,h,j,w,I,T,S,V;return{setters:[function(t){a=t._},function(t){r=t.r},function(t){o=t.y,l=t.d,u=t.k,i=t.e,d=t.c,c=t.s,s=t.q,f=t.m,p=t.v,m=t.I,v=t.g,b=t.i,_=t.r,k=t.b,g=t.aQ,y=t.F,x=t.t,h=t.bm,j=t.p,w=t.f,I=t.A,T=t.w,S=t.n},function(t){V=t.S}],execute:function(){var M={class:"task-table"},O={key:1},L={key:1},P={key:1},C=m("保存"),U=m("编辑"),z=m("删除"),E={class:"task-table__add"},N=m("+ 新增任务"),A=l({props:{data:null,status:null},emits:["updateTask","modifyTaskEdit","addProjectTask","deleteProjectTask"],setup:function(t,e){var a=e.emit;function r(){a("addProjectTask")}return function(e,o){var l=u("el-input"),b=u("el-table-column"),_=u("el-option"),k=u("el-select"),g=u("el-tag"),y=u("el-button"),x=u("el-popconfirm"),h=u("el-table");return i(),d("div",M,[c(h,{data:t.data,style:{width:"100%"}},{default:s((function(){return[c(b,{prop:"taskName",label:"任务名称"},{default:s((function(t){return[t.row.edit?(i(),f(l,{key:0,modelValue:t.row.taskName,"onUpdate:modelValue":function(e){return t.row.taskName=e}},null,8,["modelValue","onUpdate:modelValue"])):(i(),d("span",O,p(t.row.taskName),1))]})),_:1}),c(b,{prop:"developTime",label:"开发工时"},{default:s((function(t){return[t.row.edit?(i(),f(l,{key:0,modelValue:t.row.developTime,"onUpdate:modelValue":function(e){return t.row.developTime=e}},null,8,["modelValue","onUpdate:modelValue"])):(i(),d("span",L,p(t.row.developTime),1))]})),_:1}),c(b,{prop:"developMember",label:"开发人"},{default:s((function(t){return[t.row.edit?(i(),f(l,{key:0,modelValue:t.row.developMember,"onUpdate:modelValue":function(e){return t.row.developMember=e}},null,8,["modelValue","onUpdate:modelValue"])):(i(),d("span",P,p(t.row.developMember),1))]})),_:1}),c(b,{prop:"taskStatus",label:"任务状态"},{default:s((function(e){var a;return[e.row.edit?(i(),f(k,{key:0,modelValue:e.row.taskStatus,"onUpdate:modelValue":function(t){return e.row.taskStatus=t},placeholder:"选择任务状态"},{default:s((function(){return[c(_,{label:"准备阶段",value:"preparation"}),c(_,{label:"开发中",value:"development"}),c(_,{label:"开发完成",value:"completed"}),c(_,{label:"测试阶段",value:"test"}),c(_,{label:"待发布",value:"released"})]})),_:2},1032,["modelValue","onUpdate:modelValue"])):(i(),f(g,{key:1,type:null===(a=t.status.get("".concat(e.row.taskStatus)))||void 0===a?void 0:a.type},{default:s((function(){var a;return[m(p(null===(a=t.status.get("".concat(e.row.taskStatus)))||void 0===a?void 0:a.text),1)]})),_:2},1032,["type"]))]})),_:1}),c(b,{label:"操作",width:"200"},{default:s((function(t){return[t.row.edit?(i(),f(y,{key:0,size:"mini",type:"success",icon:"el-icon-check",onClick:function(e){return function(t){console.log(t);var e=t.taskId;a("updateTask",e,n(n({},t),{},{edit:!1}))}(t.row)}},{default:s((function(){return[C]})),_:2},1032,["onClick"])):(i(),f(y,{key:1,size:"mini",icon:"el-icon-edit",onClick:function(e){return function(t){console.log(t);var e=t.taskId;a("modifyTaskEdit",e,!0)}(t.row)}},{default:s((function(){return[U]})),_:2},1032,["onClick"])),c(x,{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该条记录吗？",onConfirm:function(e){return n=t.row,r=n.taskId,void a("deleteProjectTask",r);var n,r}},{reference:s((function(){return[c(y,{size:"mini",icon:"el-icon-delete",type:"danger"},{default:s((function(){return[z]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),v("div",E,[c(y,{onClick:r},{default:s((function(){return[N]})),_:1})])])}}});A.__scopeId="data-v-48a10ce8";var D={class:"task-column"},B={class:"task-column__head"},q={class:"task-column__num"},F={class:"task-column__num-count"},H={class:"task-column__type"},Q=function(t){return j("data-v-4c7abf2b"),t=t(),w(),t}((function(){return v("div",{class:"task-column__add"}," + ",-1)})),$=["id","data-taskStatus","data-taskId"],G={class:"task-column__content"},J={class:"task-column__content-detail"},K={class:"task-column__content-time"},R=l({props:{target:null,statusMap:null},emits:["moveTask"],setup:function(t,e){var n=e.emit,r=t,o=b((function(){return a.groupBy(r.target.taskList,(function(t){return t.taskStatus}))})),l=b((function(){return Object.keys(o.value)})),c=_([]);return k((function(){for(var t=0;t<l.value.length;t++){var e=document.getElementById(l.value[t]),a=new V(e,{group:"task",animation:150,onAdd:function(t){var e=t.from.dataset.taskstatus,a=t.to.dataset.taskstatus,r=Number(t.from.dataset.taskid);n("moveTask",e,a,r)}});c.value.push(a)}})),g((function(){a.forEach(c.value,(function(t){t.destroy()}))})),function(e,a){var n=u("el-card");return i(),d("div",D,[(i(!0),d(y,null,x(h(l),(function(e){return i(),f(n,{class:"task-column__item"},{default:s((function(){var a;return[v("div",B,[v("div",q,[v("div",F,p(h(o)[e].length||0),1)]),v("div",H,p((null===(a=t.statusMap.get(e))||void 0===a?void 0:a.text)||"未定义"),1),Q]),(i(!0),d(y,null,x(h(o)[e],(function(t){return i(),d("div",{id:e,"data-taskStatus":e,"data-taskId":t.taskId},[v("div",G,[v("p",null,p(t.taskName),1),v("div",J,[v("span",null,"负责人："+p(t.developMember||"-"),1),v("span",K,"工时："+p(t.developTime||"-"),1)])])],8,$)})),256))]})),_:2},1024)})),256))])}}});R.__scopeId="data-v-4c7abf2b";var W=function(t){return j("data-v-002a6822"),t=t(),w(),t},X={class:"board"},Y={class:"board__info"},Z=m("项目看板"),tt=W((function(){return v("span",null,"项目看板主要应用场景：项目的任务管理，任务进度管理等。",-1)})),et={class:"board__project"},at=W((function(){return v("div",{class:"board__project-title"},"项目概览",-1)})),nt={class:"board__project-list"},rt=["onClick"],ot={class:"board__detail"},lt=W((function(){return v("div",{class:"board__detail-title"},"项目详情",-1)})),ut={key:0,class:"board__detail-empty"},it={key:1,class:"board__detail-content"},dt={class:"board__detail-head"},ct=W((function(){return v("span",{class:"board__detail-name"},"项目名称",-1)})),st=W((function(){return v("span",{class:"board__detail-name"},"负责人",-1)})),ft=W((function(){return v("span",{class:"board__detail-name"},"开发工时",-1)})),pt=W((function(){return v("span",{class:"board__detail-name"},"项目状态",-1)})),mt=W((function(){return v("span",{class:"board__detail-name"},"任务总数",-1)})),vt=W((function(){return v("span",{class:"board__detail-name"},"任务进度",-1)})),bt=m("： "),_t={class:"board__detail-search"},kt=m("查询"),gt={class:"board__detail-table"};e("default",l({setup:function(e){var l=o({taskStatus:null,developMember:""}),k=new Map([["preparation",{text:"准备阶段",type:"info"}],["development",{text:"开发中",type:""}],["completed",{text:"开发完成",type:"success"}],["test",{text:"测试阶段",type:"danger"}],["released",{text:"待发布",type:"warning"}]]),g=_([]),j=_("column"),w=function(){var t=o({data:[],target:{}});return r({url:"/api/project/list",method:"get",json:!0}).then((function(e){0===e.status&&(t.data=e.data,t.target=e.data[0])})),{store:t,updatedProjectInfo:function(e,n,r){var o=a.findIndex(t.data,["projectId",e]),l=t.data[o].taskList,u=a.map(l,(function(t,e){return t.taskId===n?r:t}));t.data[o].taskList=u},addProjectTask:function(e,n){var r=a.findIndex(t.data,["projectId",e]),o=t.data[r].taskList;t.data[r].taskList=a.concat(o,n,[])},deleteTask:function(e,n){var r=a.findIndex(t.data,["projectId",e]),o=t.data[r].taskList,l=a.map(o,(function(t,e){if(t.taskId!==n)return t})).filter((function(t){return t}));t.data[r].taskList=l},getProjectDetail:function(e){return a.find(t.data,(function(t){return t.projectId===e}))},modifyTaskEdit:function(e,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=a.findIndex(t.data,["projectId",e]),u=t.data[l].taskList,i=a.map(u,(function(t,e){return t.taskId===r?n(n({},t),{},{edit:o}):t}));t.data[l].taskList=i},moveTask:function(e,r,o){var l=a.map(t.target.taskList,(function(t){return t.taskId===o&&(t.taskStatus=r),t})),u=n(n({},t.target),{},{taskList:l});t.target=u,console.log(t.target.taskList,"move")}}}(),V=w.store,M=w.updatedProjectInfo,O=w.addProjectTask,L=w.deleteTask,P=w.modifyTaskEdit,C=w.moveTask,U=I(V),z=U.data,E=U.target;T((function(){return E.value}),(function(t){g.value=t.taskList}),{deep:!0});var N=b((function(){var e=a.countBy(E.value.taskList,(function(t){return t.taskStatus}));return a.map(Object.entries(e),(function(e){var a=t(e,2),r=a[0],o=a[1];return n(n({},k.get(r)),{},{count:o})}))})),D=b((function(){var t=a.map(E.value.taskList,(function(t){return t.developMember})).filter((function(t){return t}));return a.uniq(t)}));function B(){console.log("search!",l);var t=l.taskStatus,e=l.developMember;if(t&&e){var n=a.map(E.value.taskList,(function(a){if(a.developMember===e&&a.taskStatus===t)return a})).filter((function(t){return t}));g.value=n}else if(t){var r=a.map(E.value.taskList,(function(e){if(e.taskStatus===t)return e})).filter((function(t){return t}));g.value=r}else if(e){var o=a.map(E.value.taskList,(function(t){if(t.developMember===e)return t})).filter((function(t){return t}));g.value=o}else g.value=E.value.taskList}function q(t,e){var a=E.value.projectId;P(a,t,e)}function F(t,e){var a=E.value.projectId;M(a,t,e)}function H(){var t=E.value.projectId,e={taskName:"",developTime:"",developMember:"",taskStatus:"preparation",edit:!0,taskId:Date.now()};O(t,e)}function Q(t){var e=E.value.projectId;L(e,t)}function $(t){switch(t.paneName){case"table":console.log("表格形式");break;case"column":console.log("列表形式")}}function G(t,e,a){C(t,e,a)}return function(t,e){var a=u("el-divider"),n=u("el-avatar"),r=u("el-col"),o=u("el-row"),b=u("el-card"),_=u("el-tag"),w=u("el-option"),I=u("el-select"),T=u("el-form-item"),V=u("el-button"),M=u("el-form"),O=u("el-tab-pane"),L=u("el-tabs");return i(),d("div",X,[v("div",Y,[c(a,{"content-position":"left"},{default:s((function(){return[Z]})),_:1}),tt]),v("div",et,[at,v("div",nt,[(i(!0),d(y,null,x(h(z),(function(t,e){return i(),d("div",{key:e,class:S(["board__project-item",{"board__project-item--active":h(E).projectId===t.projectId}]),onClick:function(e){return a=t,void(E.value=a);var a}},[c(b,null,{default:s((function(){return[c(o,null,{default:s((function(){return[c(r,{span:5},{default:s((function(){return[c(n,{class:"board__project-avatar",size:90},{default:s((function(){return[m(p(t.projectName.substr(0,1)),1)]})),_:2},1024)]})),_:2},1024),c(r,{span:18,style:{"margin-left":"6px",color:"#7a848d"}},{default:s((function(){return[v("p",null,"项目名称："+p(t.projectName),1),v("p",null,"总负责人："+p(t.principal),1),v("p",null,"开发耗时："+p(t.timeConsuming),1),v("p",null,"项目状态: "+p(t.status),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)],10,rt)})),128))])]),v("div",ot,[lt,c(b,{class:"board__detail-wrap"},{default:s((function(){return[h(E).projectId?(i(),d("div",it,[v("div",dt,[c(o,null,{default:s((function(){return[c(r,{span:5},{default:s((function(){return[ct,m("："+p(h(E).projectName),1)]})),_:1}),c(r,{span:5},{default:s((function(){return[st,m("："+p(h(E).principal),1)]})),_:1}),c(r,{span:5},{default:s((function(){return[ft,m("："+p(h(E).timeConsuming),1)]})),_:1}),c(r,{span:5},{default:s((function(){return[pt,m("："+p(h(E).status),1)]})),_:1})]})),_:1}),c(o,{class:"board__detail-task"},{default:s((function(){return[c(r,{span:5},{default:s((function(){return[mt,m("："+p(h(E).taskList.length),1)]})),_:1}),c(r,{span:18},{default:s((function(){return[vt,bt,(i(!0),d(y,null,x(h(N),(function(t,e){return i(),f(_,{key:e,class:"board__detail-tag",type:t.type},{default:s((function(){return[m(p(t.text)+": "+p(t.count),1)]})),_:2},1032,["type"])})),128))]})),_:1})]})),_:1})]),c(L,{modelValue:j.value,"onUpdate:modelValue":e[2]||(e[2]=function(t){return j.value=t}),type:"card",onTabClick:$},{default:s((function(){return[c(O,{label:"表格模式",name:"table"},{default:s((function(){return[v("div",_t,[c(M,{inline:!0,model:h(l)},{default:s((function(){return[c(T,{label:"开发人"},{default:s((function(){return[c(I,{clearable:"",modelValue:h(l).developMember,"onUpdate:modelValue":e[0]||(e[0]=function(t){return h(l).developMember=t}),placeholder:"选择任务开发者"},{default:s((function(){return[(i(!0),d(y,null,x(h(D),(function(t,e){return i(),f(w,{key:e,label:t,value:t},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),c(T,{label:"任务状态"},{default:s((function(){return[c(I,{clearable:"",modelValue:h(l).taskStatus,"onUpdate:modelValue":e[1]||(e[1]=function(t){return h(l).taskStatus=t}),placeholder:"选择任务状态"},{default:s((function(){return[c(w,{label:"准备阶段",value:"preparation"}),c(w,{label:"开发中",value:"development"}),c(w,{label:"开发完成",value:"completed"}),c(w,{label:"测试阶段",value:"test"}),c(w,{label:"待发布",value:"released"})]})),_:1},8,["modelValue"])]})),_:1}),c(T,null,{default:s((function(){return[c(V,{type:"primary",onClick:B},{default:s((function(){return[kt]})),_:1})]})),_:1})]})),_:1},8,["model"])]),v("div",gt,[c(A,{data:g.value,status:h(k),onUpdateTask:F,onModifyTaskEdit:q,onAddProjectTask:H,onDeleteProjectTask:Q},null,8,["data","status"])])]})),_:1}),c(O,{label:"列表模式",name:"column"},{default:s((function(){return[c(R,{statusMap:h(k),target:h(E),onMoveTask:G},null,8,["statusMap","target"])]})),_:1})]})),_:1},8,["modelValue"])])):(i(),d("div",ut,"请选择项目，查看项目详情！！！"))]})),_:1})])])}}})).__scopeId="data-v-002a6822"}}}))}();
