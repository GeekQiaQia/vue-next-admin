var x=Object.defineProperty,ee=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var I=(e,t,a)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,F=(e,t)=>{for(var a in t||(t={}))te.call(t,a)&&I(e,a,t[a]);if(P)for(var a of P(t))ue.call(t,a)&&I(e,a,t[a]);return e},y=(e,t)=>ee(e,oe(t));import{d as A,a1 as ae,e as v,q as $,c as se,v as le,x as w,_ as B,j as C,h as N,i as o,w as u,n as E,t as ne,L as re,M as ie,a0 as b,ah as U,ai as j,b8 as ce,ay as L,R as S,ax as R,b9 as V,r as de,aE as me,ba as pe,bb as _e,bc as fe,aJ as ge,z as h,m as D,a4 as Ee,bd as Ce,y as be,aw as he,aP as Fe,b4 as De,X as ve,aQ as Be,be as ke,a_ as ye,aY as Ae,N as q}from"./vendor.e853b41c.js";/* empty css                *//* empty css               *//* empty css            *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                       */import{r as $e,u as we,_ as z}from"./index.bf1225b1.js";const Ne={queryAuthedPermission:"/api/auth/permission/routes"};class Se{static postAuthPermission(t){return $e({url:Ne.queryAuthedPermission,method:"POST",json:!0,data:t}).then(a=>(console.log(a),a.status===0?Promise.resolve(a):Promise.reject(a)))}}const Re=A({name:"RolesEdit",props:{currentRole:{type:Object,default:()=>({roleName:"",state:1})}},emits:["success"],setup(e,{emit:t}){const a=ae(e,"currentRole"),g=we(),f=v(()=>g.getters["settingsModule/getLangState"]),d=$({url:"/role/allow",purl:"/role/permissions",loading:!1,form:{key:"",label:""},menu:{loading:!1,url:"/menu/list",data:[],form:[]}}),i=v(()=>a.value.role),m=v(()=>g.state.permissionModule.routes),p=async()=>{const n={roleName:i.value.roleName},r=await Se.postAuthPermission(n);if(r==null?void 0:r.data){const{authedRoutes:s}=r.data;d.menu.form=s}},c=()=>{var n,r;for(const s of m.value)((n=s==null?void 0:s.meta)==null?void 0:n.hidden)||d.menu.data.push({key:s==null?void 0:s.path,label:(r=s==null?void 0:s.meta)==null?void 0:r.title[f.value]})},l=()=>{console.log("form is ",d.menu.form),t("success")};return se(()=>{c()}),le(()=>{p()}),y(F({},w(d)),{lang:f,role:i,fetchMenuData:c,saveData:l})}}),O=e=>(re("data-v-7247ff70"),e=e(),ie(),e),Ve={class:"wrapper"},ze={class:"card-header"},Te=O(()=>E("br",null,null,-1)),Me=O(()=>E("i",{class:"fa fa-check"},null,-1)),Pe=b(" \u786E\u8BA4\u4FEE\u6539 ");function Ie(e,t,a,g,f,d){const i=U,m=j,p=ce,c=L,l=S,n=R,r=V;return B((C(),N("div",Ve,[o(c,{class:"transfer"},{header:u(()=>[E("span",null,[E("div",ze,[o(m,{"label-position":"left",inline:"",class:"info-table"},{default:u(()=>[o(i,{label:"\u540D\u79F0"},{default:u(()=>[E("span",null,ne(e.role.roleName),1)]),_:1})]),_:1})])])]),default:u(()=>[B(o(p,{modelValue:e.menu.form,"onUpdate:modelValue":t[0]||(t[0]=s=>e.menu.form=s),data:e.menu.data,titles:["\u83DC\u5355","\u5DF2\u6388\u6743"]},null,8,["modelValue","data"]),[[r,e.menu.loading]])]),_:1}),Te,o(n,{class:"btns"},{default:u(()=>[o(l,{size:"mini",type:"primary",disabled:e.role.state==0,onClick:e.saveData},{default:u(()=>[Me,Pe]),_:1},8,["disabled","onClick"])]),_:1})])),[[r,e.loading]])}var qe=z(Re,[["render",Ie],["__scopeId","data-v-7247ff70"]]);const Ue=A({name:"RoleNew",emits:["success"],setup(e,{emit:t}){const a={roleName:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",trigger:"blur"},{min:2,max:10,message:"\u957F\u5EA6\u5728 2 \u5230 10 \u4E2A\u5B57\u7B26",trigger:"blur"}]},g="/role/add",f=de(),d=$({form:{roleName:"",remark:""},loading:!1});return F({submitForm:()=>{f.value.validate(m=>m?(t("success",F({},d.form)),!0):(console.log("error submit!!"),!1))},rules:a,formRef:f,url:g},w(d))}}),je={class:"new"},Le=E("i",{class:"fa fa-plus"},null,-1),Oe=b(" \u65B0\u589E ");function Je(e,t,a,g,f,d){const i=me,m=U,p=S,c=R,l=j,n=V;return B((C(),N("div",je,[o(l,{ref:"formRef",model:e.form,rules:e.rules,"label-position":"right","label-width":"100px"},{default:u(()=>[o(m,{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName"},{default:u(()=>[o(i,{modelValue:e.form.roleName,"onUpdate:modelValue":t[0]||(t[0]=r=>e.form.roleName=r),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(m,{label:"\u5907\u6CE8"},{default:u(()=>[o(i,{modelValue:e.form.remark,"onUpdate:modelValue":t[1]||(t[1]=r=>e.form.remark=r),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1}),o(c,{class:"btn-container"},{default:u(()=>[o(p,{size:"mini",type:"primary",onClick:t[2]||(t[2]=r=>e.submitForm())},{default:u(()=>[Le,Oe]),_:1})]),_:1})]),_:1},8,["model","rules"])])),[[n,e.loading]])}var Qe=z(Ue,[["render",Je]]);const Xe=e=>{console.log(e),Ae.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BE5\u6570\u636E, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{q({type:"success",message:"\u5220\u9664\u6210\u529F"})}).catch(()=>{q({type:"info",message:"\u5DF2\u53D6\u6D88\u5220\u9664"})})},Ye=A({name:"RoleManage",components:{RoleEdit:qe,RoleNew:Qe,Edit:pe,Minus:_e,Plus:fe,Refresh:ge},setup(){const e=$({url:{c:"/role/add",r:"/role/list",u:"/role/update",d:"/role/delete"},param:{limit:10,page:1},data:[{roleName:"\u8D85\u7EA7\u7BA1\u7406\u5458",remark:"\u62E5\u6709\u5220\u9664\u548C\u521B\u5EFA\u7B49\u64CD\u4F5C\u7684\u6743\u9650",state:0},{roleName:"\u7BA1\u7406\u5458",remark:"\u62E5\u6709\u521B\u5EFA\u548C\u6743\u9650\u5206\u914D\u7684\u6743\u9650",state:0},{roleName:"\u6E38\u5BA2",remark:"\u53EA\u62E5\u6709\u64CD\u4F5C\u90E8\u5206\u83DC\u5355\u7684\u6743\u9650",state:1}],loading:!1,is_search:!1,add_visible:!1,edit_visible:!1,detail_visible:!1,posted:{role:{roleName:"",state:1}}}),t=v(()=>e.data.length),a=()=>{},g=l=>{e.param.limit=l},f=()=>{e.add_visible=!0},d=l=>{console.log(l);const n={roleName:l.roleName,remark:l.remark,state:1};e.data.push(n),e.add_visible=!1},i=()=>{e.edit_visible=!1},m=()=>{e.is_search=!1},p=(l,n)=>{console.log("row",n),e.posted.role=n,e.edit_visible=!0},c=(l,n)=>{console.log(l,n),Xe(l)};return y(F({},w(e)),{total:t,onCurrentChange:a,onSizeChange:g,onCreate:f,onCreateSuccess:d,onEditSuccess:i,onRefresh:m,onEdit:p,onDelete:c})}}),Ge=b(" \u65B0\u589E"),He=b(" \u5237\u65B0"),Ke=E("br",null,null,-1),We=E("i",{class:"ic ic-lock"},null,-1),Ze=b(" \u9501\u5B9A"),xe=b("\u6B63\u5E38"),eo=b("\u672A\u77E5"),oo={class:"pagination"};function to(e,t,a,g,f,d){const i=Ce,m=h("plus"),p=be,c=S,l=h("refresh"),n=he,r=R,s=Fe,k=De,J=h("edit"),T=ve,Q=h("minus"),X=Be,Y=ke,G=L,H=h("role-edit"),M=ye,K=h("role-new"),W=V;return C(),N("div",null,[o(i,{title:"Tips:\u70B9\u51FB\u3010\u65B0\u589E\u3011\u6309\u94AE\u8FDB\u884C\u65B0\u589E\u89D2\u8272\uFF1B\u70B9\u51FB\u3010\u7F16\u8F91\u3011\u6309\u94AE\uFF0C\u8FDB\u884C\u4E0D\u540C\u89D2\u8272\u7684\u83DC\u5355\u6388\u6743\u64CD\u4F5C\uFF01",type:"warning"}),o(i,{title:"Tips:\u6743\u9650\u63A7\u5236\u4F53\u9A8C\uFF1A\u3010\u7BA1\u7406\u5458\u8D26\u53F7\u4E3A\uFF1Aadmin@outlook.com\u3011\u3001\u3010\u8D85\u7EA7\u7BA1\u7406\u5458\u8D26\u53F7\u4E3A\uFF1Asuper@outlook.com\u3011",type:"info"}),o(G,{class:"card-ctrl"},{default:u(()=>[o(r,null,{default:u(()=>[o(n,{span:8,style:{"text-align":"left"}},{default:u(()=>[o(c,{type:"primary",size:"small",onClick:e.onCreate},{default:u(()=>[o(p,null,{default:u(()=>[o(m)]),_:1}),Ge]),_:1},8,["onClick"]),o(c,{type:"success",size:"small",onClick:e.onRefresh},{default:u(()=>[o(p,null,{default:u(()=>[o(l)]),_:1}),He]),_:1},8,["onClick"])]),_:1})]),_:1}),Ke,B((C(),D(X,{data:e.data,stripe:"",class:"table"},{default:u(()=>[o(s,{prop:"roleName",label:"\u89D2\u8272\u540D\u79F0",align:"center"}),o(s,{prop:"state",label:"\u89D2\u8272\u72B6\u6001",align:"center"},{default:u(_=>[_.row.state==0?(C(),D(k,{key:0,size:"mini",type:"info"},{default:u(()=>[We,Ze]),_:1})):_.row.state==1?(C(),D(k,{key:1,size:"mini",type:"success"},{default:u(()=>[xe]),_:1})):(C(),D(k,{key:2,size:"mini",type:"danger"},{default:u(()=>[eo]),_:1}))]),_:1}),o(s,{prop:"remark",label:"\u5907\u6CE8",align:"center"}),o(s,{label:"\u64CD\u4F5C",align:"center"},{default:u(_=>[o(T,{class:"item",effect:"dark",content:"\u83DC\u5355\u6388\u6743",placement:"bottom"},{default:u(()=>[o(c,{circle:"",plain:"",type:"primary",size:"small",onClick:Z=>e.onEdit(_.$index,_.row)},{default:u(()=>[o(p,null,{default:u(()=>[o(J)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),_.row.state!=0?(C(),D(T,{key:0,class:"item",effect:"dark",content:"\u5220\u9664",placement:"bottom"},{default:u(()=>[o(c,{circle:"",plain:"",type:"danger",size:"small",onClick:Z=>e.onDelete(_.$index,_.row)},{default:u(()=>[o(p,null,{default:u(()=>[o(Q)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):Ee("",!0)]),_:1})]),_:1},8,["data"])),[[W,e.loading]]),E("div",oo,[o(Y,{"current-page":e.param.page,"page-size":e.param.limit,layout:"sizes,prev,pager,next,total","page-sizes":[5,10,20],total:e.total,background:"",onCurrentChange:e.onCurrentChange,onSizeChange:e.onSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]),_:1}),o(M,{modelValue:e.edit_visible,"onUpdate:modelValue":t[0]||(t[0]=_=>e.edit_visible=_),center:"",title:e.posted.role.roleName},{default:u(()=>[o(H,{"current-role":e.posted,onSuccess:e.onEditSuccess},null,8,["current-role","onSuccess"])]),_:1},8,["modelValue","title"]),o(M,{modelValue:e.add_visible,"onUpdate:modelValue":t[1]||(t[1]=_=>e.add_visible=_),title:"\u65B0\u589E\u89D2\u8272"},{default:u(()=>[o(K,{onSuccess:e.onCreateSuccess},null,8,["onSuccess"])]),_:1},8,["modelValue"])])}var _o=z(Ye,[["render",to]]);export{_o as default};
