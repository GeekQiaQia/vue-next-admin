function n(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var t=[],e=!0,u=!1,o=void 0;try{for(var a,i=n[Symbol.iterator]();!(e=(a=i.next()).done)&&(t.push(a.value),!r||t.length!==r);e=!0);}catch(f){u=!0,o=f}finally{try{e||null==i.return||i.return()}finally{if(u)throw o}}return t}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(n,r,t,e){n=n.filter((function(n,e){var u=r(n,e),o=t(n,e);return null!=u&&isFinite(u)&&null!=o&&isFinite(o)})),e&&n.sort((function(n,t){return r(n)-r(t)}));for(var u,o,a,i=n.length,f=new Float64Array(i),c=new Float64Array(i),l=0,h=0,v=0;v<i;)a=n[v],f[v]=u=+r(a,v,n),c[v]=o=+t(a,v,n),l+=(u-l)/++v,h+=(o-h)/v;for(var g=0;g<i;++g)f[g]-=l,c[g]-=h;return[f,c,l,h]}function t(n,r,t,e){for(var u=0,o=0,a=n.length;o<a;o++){var i=n[o],f=+r(i,o,n),c=+t(i,o,n);null!=f&&isFinite(f)&&null!=c&&isFinite(c)&&e(f,c,u++)}}function e(n,r,e,u,o){var a=0,i=0;return t(n,r,e,(function(n,r){var t=r-o(n),e=r-u;a+=t*t,i+=e*e})),1-a/i}function u(n){return 180*Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])/Math.PI}function o(n,r,t){for(var e=Math.log(r-n)*Math.LOG10E+1|0,o=1*Math.pow(10,-e/2-1),a=[f(n),f(r)],i=0;c(a)&&i<1e4;);return a;function f(n){return[n,t(n)]}function c(n){i++;for(var r,t=n.length,e=!1,a=0;a<t-1;a++){var c=n[a],l=n[a+1],h=[((r=[c,l])[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2],v=f(h[0]),g=u([c,h]),s=u([c,v]);Math.abs(g-s)>o&&(n.splice(a+1,0,v),e=!0)}return e}}function a(n,r,t,e){var u=e-n*n,o=Math.abs(u)<1e-24?0:(t-n*r)/u;return[r-o*n,o]}function i(){var r,u=function(n){return n[0]},i=function(n){return n[1]};function f(f){var c=0,l=0,h=0,v=0,g=0,s=0,d=r?+r[0]:1/0,M=r?+r[1]:-1/0;t(f,u,i,(function(n,t){var e=Math.log(t),u=n*t;++c,l+=(t-l)/c,v+=(u-v)/c,s+=(n*u-s)/c,h+=(t*e-h)/c,g+=(u*e-g)/c,r||(n<d&&(d=n),n>M&&(M=n))}));var p=n(a(v/l,h/l,g/l,s/l),2),b=p[0],y=p[1];b=Math.exp(b);var w=function(n){return b*Math.exp(y*n)},x=o(d,M,w);return x.a=b,x.b=y,x.predict=w,x.rSquared=e(f,u,i,l,w),x}return f.domain=function(n){return arguments.length?(r=n,f):r},f.x=function(n){return arguments.length?(u=n,f):u},f.y=function(n){return arguments.length?(i=n,f):i},f}function f(){var r,u=function(n){return n[0]},o=function(n){return n[1]};function i(i){var f=0,c=0,l=0,h=0,v=0,g=r?+r[0]:1/0,s=r?+r[1]:-1/0;t(i,u,o,(function(n,t){++f,c+=(n-c)/f,l+=(t-l)/f,h+=(n*t-h)/f,v+=(n*n-v)/f,r||(n<g&&(g=n),n>s&&(s=n))}));var d=n(a(c,l,h,v),2),M=d[0],p=d[1],b=function(n){return p*n+M},y=[[g,b(g)],[s,b(s)]];return y.a=p,y.b=M,y.predict=b,y.rSquared=e(i,u,o,l,b),y}return i.domain=function(n){return arguments.length?(r=n,i):r},i.x=function(n){return arguments.length?(u=n,i):u},i.y=function(n){return arguments.length?(o=n,i):o},i}function c(n){n.sort((function(n,r){return n-r}));var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function l(){var t=function(n){return n[0]},e=function(n){return n[1]},u=.3;function o(o){for(var i=n(r(o,t,e,!0),4),f=i[0],l=i[1],g=i[2],s=i[3],d=f.length,M=Math.max(2,~~(u*d)),p=new Float64Array(d),b=new Float64Array(d),y=new Float64Array(d).fill(1),w=-1;++w<=2;){for(var x=[0,M-1],m=0;m<d;++m){for(var F=f[m],A=x[0],q=x[1],S=F-f[A]>f[q]-F?A:q,E=0,k=0,I=0,G=0,L=0,O=1/Math.abs(f[S]-F||1),P=A;P<=q;++P){var T=f[P],j=l[P],z=h(Math.abs(F-T)*O)*y[P],B=T*z;E+=z,k+=B,I+=j*z,G+=j*B,L+=T*B}var C=n(a(k/E,I/E,G/E,L/E),2),D=C[0],H=C[1];p[m]=D+H*F,b[m]=Math.abs(l[m]-p[m]),v(f,m+1,x)}if(2===w)break;var J=c(b);if(Math.abs(J)<1e-12)break;for(var K,N,Q=0;Q<d;++Q)K=b[Q]/(6*J),y[Q]=K>=1?1e-12:(N=1-K*K)*N}return function(n,r,t,e){for(var u,o=n.length,a=[],i=0,f=0,c=[];i<o;++i)u=n[i]+t,c[0]===u?c[1]+=(r[i]-c[1])/++f:(f=0,c[1]+=e,c=[u,r[i]],a.push(c));return c[1]+=e,a}(f,p,g,s)}return o.bandwidth=function(n){return arguments.length?(u=n,o):u},o.x=function(n){return arguments.length?(t=n,o):t},o.y=function(n){return arguments.length?(e=n,o):e},o}function h(n){return(n=1-n*n*n)*n*n}function v(n,r,t){var e=n[r],u=t[0],o=t[1]+1;if(!(o>=n.length))for(;r>u&&n[o]-e<=e-n[u];)t[0]=++u,t[1]=o,++o}function g(){var r,u=function(n){return n[0]},i=function(n){return n[1]},f=Math.E;function c(c){var l=0,h=0,v=0,g=0,s=0,d=r?+r[0]:1/0,M=r?+r[1]:-1/0,p=Math.log(f);t(c,u,i,(function(n,t){var e=Math.log(n)/p;++l,h+=(e-h)/l,v+=(t-v)/l,g+=(e*t-g)/l,s+=(e*e-s)/l,r||(n<d&&(d=n),n>M&&(M=n))}));var b=n(a(h,v,g,s),2),y=b[0],w=b[1],x=function(n){return w*Math.log(n)/p+y},m=o(d,M,x);return m.a=w,m.b=y,m.predict=x,m.rSquared=e(c,u,i,v,x),m}return c.domain=function(n){return arguments.length?(r=n,c):r},c.x=function(n){return arguments.length?(u=n,c):u},c.y=function(n){return arguments.length?(i=n,c):i},c.base=function(n){return arguments.length?(f=n,c):f},c}function s(){var u,a=function(n){return n[0]},i=function(n){return n[1]};function f(f){var c,l,h,v,g=n(r(f,a,i),4),s=g[0],d=g[1],M=g[2],p=g[3],b=s.length,y=0,w=0,x=0,m=0,F=0;for(c=0;c<b;)l=s[c],h=d[c++],y+=((v=l*l)-y)/c,w+=(v*l-w)/c,x+=(v*v-x)/c,m+=(l*h-m)/c,F+=(v*h-F)/c;var A=0,q=0,S=u?+u[0]:1/0,E=u?+u[1]:-1/0;t(f,a,i,(function(n,r){q++,A+=(r-A)/q,u||(n<S&&(S=n),n>E&&(E=n))}));var k=x-y*y,I=y*k-w*w,G=(F*y-m*w)/I,L=(m*k-F*w)/I,O=-G*y,P=function(n){return G*(n-=M)*n+L*n+O+p},T=o(S,E,P);return T.a=G,T.b=L-2*G*M,T.c=O-L*M+G*M*M+p,T.predict=P,T.rSquared=e(f,a,i,A,P),T}return f.domain=function(n){return arguments.length?(u=n,f):u},f.x=function(n){return arguments.length?(a=n,f):a},f.y=function(n){return arguments.length?(i=n,f):i},f}function d(){var u,a=function(n){return n[0]},i=function(n){return n[1]},c=3;function l(l){if(1===c){var h=f().x(a).y(i).domain(u)(l);return h.coefficients=[h.b,h.a],delete h.a,delete h.b,h}if(2===c){var v=s().x(a).y(i).domain(u)(l);return v.coefficients=[v.c,v.b,v.a],delete v.a,delete v.b,delete v.c,v}var g,d,M,p,b,y=n(r(l,a,i),4),w=y[0],x=y[1],m=y[2],F=y[3],A=w.length,q=[],S=[],E=c+1,k=0,I=0,G=u?+u[0]:1/0,L=u?+u[1]:-1/0;for(t(l,a,i,(function(n,r){++I,k+=(r-k)/I,u||(n<G&&(G=n),n>L&&(L=n))})),g=0;g<E;++g){for(M=0,p=0;M<A;++M)p+=Math.pow(w[M],g)*x[M];for(q.push(p),b=new Float64Array(E),d=0;d<E;++d){for(M=0,p=0;M<A;++M)p+=Math.pow(w[M],g+d);b[d]=p}S.push(b)}S.push(q);var O=function(n){var r,t,e,u,o,a=n.length-1,i=[];for(r=0;r<a;++r){for(u=r,t=r+1;t<a;++t)Math.abs(n[r][t])>Math.abs(n[r][u])&&(u=t);for(e=r;e<a+1;++e)o=n[e][r],n[e][r]=n[e][u],n[e][u]=o;for(t=r+1;t<a;++t)for(e=a;e>=r;e--)n[e][t]-=n[e][r]*n[r][t]/n[r][r]}for(t=a-1;t>=0;--t){for(o=0,e=t+1;e<a;++e)o+=n[e][t]*i[e];i[t]=(n[a][t]-o)/n[t][t]}return i}(S),P=function(n){n-=m;var r=F+O[0]+O[1]*n+O[2]*n*n;for(g=3;g<E;++g)r+=O[g]*Math.pow(n,g);return r},T=o(G,L,P);return T.coefficients=function(n,r,t,e){var u,o,a,i,f=Array(n);for(u=0;u<n;++u)f[u]=0;for(u=n-1;u>=0;--u)for(a=r[u],i=1,f[u]+=a,o=1;o<=u;++o)i*=(u+1-o)/o,f[u-o]+=a*Math.pow(t,o)*i;return f[0]+=e,f}(E,O,-m,F),T.predict=P,T.rSquared=e(l,a,i,k,P),T}return l.domain=function(n){return arguments.length?(u=n,l):u},l.x=function(n){return arguments.length?(a=n,l):a},l.y=function(n){return arguments.length?(i=n,l):i},l.order=function(n){return arguments.length?(c=n,l):c},l}function M(){var r,u=function(n){return n[0]},i=function(n){return n[1]};function f(f){var c=0,l=0,h=0,v=0,g=0,s=0,d=r?+r[0]:1/0,M=r?+r[1]:-1/0;t(f,u,i,(function(n,t){var e=Math.log(n),u=Math.log(t);++c,l+=(e-l)/c,h+=(u-h)/c,v+=(e*u-v)/c,g+=(e*e-g)/c,s+=(t-s)/c,r||(n<d&&(d=n),n>M&&(M=n))}));var p=n(a(l,h,v,g),2),b=p[0],y=p[1];b=Math.exp(b);var w=function(n){return b*Math.pow(n,y)},x=o(d,M,w);return x.a=b,x.b=y,x.predict=w,x.rSquared=e(f,u,i,s,w),x}return f.domain=function(n){return arguments.length?(r=n,f):r},f.x=function(n){return arguments.length?(u=n,f):u},f.y=function(n){return arguments.length?(i=n,f):i},f}export{l as a,g as b,M as c,i as e,f as l,d as p,s as q};
