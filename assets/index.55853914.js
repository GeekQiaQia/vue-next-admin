var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,d=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&d(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&d(e,t,a[t]);return e},n=(e,l)=>a(e,t(l));import{_ as u}from"./lodash.4c220a29.js";import{r as i}from"./index.85afc891.js";import{r as p,d as c,k as _,e as m,c as b,s as v,q as f,m as y,v as k,I as w,i as j,g,F as V,t as x,n as O,bn as h,p as I,f as U}from"./vendor.b380b2be.js";const C={class:"task-table"},N={key:1},P={key:1},S={key:1},M=w("保存"),z=w("编辑"),T=w("删除");var L=c({props:{data:null,status:null},setup:e=>(a,t)=>{const l=_("el-input"),o=_("el-table-column"),s=_("el-tag"),d=_("el-button"),r=_("el-popconfirm"),n=_("el-table");return m(),b("div",C,[v(n,{data:e.data,style:{width:"100%"}},{default:f((()=>[v(o,{prop:"taskName",label:"任务名称"},{default:f((e=>[e.row.edit?(m(),y(l,{key:0,modelValue:e.row.taskName,"onUpdate:modelValue":a=>e.row.taskName=a},null,8,["modelValue","onUpdate:modelValue"])):(m(),b("span",N,k(e.row.taskName),1))])),_:1}),v(o,{prop:"developTime",label:"开发工时"},{default:f((e=>[e.row.edit?(m(),y(l,{key:0,modelValue:e.row.developTime,"onUpdate:modelValue":a=>e.row.developTime=a},null,8,["modelValue","onUpdate:modelValue"])):(m(),b("span",P,k(e.row.developTime),1))])),_:1}),v(o,{prop:"developMember",label:"开发人"},{default:f((e=>[e.row.edit?(m(),y(l,{key:0,modelValue:e.row.developMember,"onUpdate:modelValue":a=>e.row.developMember=a},null,8,["modelValue","onUpdate:modelValue"])):(m(),b("span",S,k(e.row.developMember),1))])),_:1}),v(o,{prop:"taskStatus",label:"任务状态"},{default:f((a=>{var t;return[a.row.edit?(m(),y(l,{key:0,modelValue:a.row.taskStatus,"onUpdate:modelValue":e=>a.row.taskStatus=e},null,8,["modelValue","onUpdate:modelValue"])):(m(),y(s,{key:1,type:null==(t=e.status.get(`${a.row.taskStatus}`))?void 0:t.type},{default:f((()=>{var t;return[w(k(null==(t=e.status.get(`${a.row.taskStatus}`))?void 0:t.text),1)]})),_:2},1032,["type"]))]})),_:1}),v(o,{label:"操作",width:"200"},{default:f((e=>[e.row.edit?(m(),y(d,{key:0,size:"mini",type:"success",icon:"el-icon-check",onClick:t[0]||(t[0]=e=>{})},{default:f((()=>[M])),_:1})):(m(),y(d,{key:1,size:"mini",icon:"el-icon-edit",onClick:t[1]||(t[1]=e=>{})},{default:f((()=>[z])),_:1})),v(r,{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该条记录吗？",onConfirm:t[2]||(t[2]=e=>{})},{reference:f((()=>[v(d,{size:"mini",icon:"el-icon-delete",type:"danger"},{default:f((()=>[T])),_:1})])),_:1})])),_:1})])),_:1},8,["data"])])}});L.__scopeId="data-v-6eea1e76";const $=e=>(I("data-v-33478162"),e=e(),U(),e),q={class:"board"},B={class:"board__info"},D=w("项目看板"),E=$((()=>g("span",null,"项目看板主要应用场景：项目的任务管理，任务进度管理等。",-1))),F={class:"board__project"},A=$((()=>g("div",{class:"board__project-title"},"项目概览",-1))),G={class:"board__project-list"},H=["onClick"],J={class:"board__detail"},K=$((()=>g("div",{class:"board__detail-title"},"项目详情",-1))),Q={key:0,class:"board__detail-empty"},R={key:1,class:"board__detail-content"},W={class:"board__detail-head"},X=$((()=>g("span",{class:"board__detail-name"},"项目名称",-1))),Y=$((()=>g("span",{class:"board__detail-name"},"负责人",-1))),Z=$((()=>g("span",{class:"board__detail-name"},"开发工时",-1))),ee=$((()=>g("span",{class:"board__detail-name"},"项目状态",-1))),ae=$((()=>g("span",{class:"board__detail-name"},"任务总数",-1))),te=$((()=>g("span",{class:"board__detail-name"},"任务进度",-1))),le=w(" ： "),oe={class:"board__detail-table"};var se=c({setup(e){const a=new Map([["1",{text:"准备阶段",type:"info"}],["2",{text:"开发中",type:"danger"}],["3",{text:"开发完成",type:"success"}],["4",{text:"测试阶段",type:"danger"}],["5",{text:"待发布",type:"warning"}]]),t=p({}),l=j((()=>u.map(t.value.taskList,(e=>n(r({},e),{edit:!1}))))),{getProjectInfo:o,data:s}=(()=>{const e=p([]);return{data:e,getProjectInfo:function(){return i({url:"/api/project/list",method:"get",json:!0}).then((a=>{0===a.status&&(e.value=a.data)}))}}})();function d(e){const t=u.countBy(e,(e=>e.taskStatus));return u.map(Object.entries(t),(([e,t])=>{const l=a.get(e);return n(r({},l),{count:t})}))}return o(),(e,o)=>{const r=_("el-divider"),n=_("el-avatar"),u=_("el-col"),i=_("el-row"),p=_("el-card"),c=_("el-tag");return m(),b("div",q,[g("div",B,[v(r,{"content-position":"left"},{default:f((()=>[D])),_:1}),E]),g("div",F,[A,g("div",G,[(m(!0),b(V,null,x(h(s),((e,a)=>(m(),b("div",{key:a,class:O(["board__project-item",{"board__project-item--active":t.value.projectId===e.projectId}]),onClick:a=>{return l=e,void(t.value=l);var l}},[v(p,null,{default:f((()=>[v(i,null,{default:f((()=>[v(u,{span:5},{default:f((()=>[v(n,{class:"board__project-avatar",size:90},{default:f((()=>[w(k(e.projectName.substr(0,1)),1)])),_:2},1024)])),_:2},1024),v(u,{span:18,style:{"margin-left":"6px",color:"#7a848d"}},{default:f((()=>[g("p",null,"项目名称："+k(e.projectName),1),g("p",null,"总负责人："+k(e.principal),1),g("p",null,"开发耗时："+k(e.timeConsuming),1),g("p",null,"项目状态: "+k(e.status),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)],10,H)))),128))])]),g("div",J,[K,v(p,{class:"board__detail-wrap"},{default:f((()=>[t.value.projectId?(m(),b("div",R,[g("div",W,[v(i,null,{default:f((()=>[v(u,{span:5},{default:f((()=>[X,w(" ："+k(t.value.projectName),1)])),_:1}),v(u,{span:5},{default:f((()=>[Y,w(" ："+k(t.value.principal),1)])),_:1}),v(u,{span:5},{default:f((()=>[Z,w(" ："+k(t.value.timeConsuming),1)])),_:1}),v(u,{span:5},{default:f((()=>[ee,w(" ："+k(t.value.status),1)])),_:1})])),_:1}),v(i,{class:"board__detail-task"},{default:f((()=>[v(u,{span:5},{default:f((()=>[ae,w(" ："+k(t.value.taskList.length),1)])),_:1}),v(u,{span:18},{default:f((()=>[te,le,(m(!0),b(V,null,x(d(t.value.taskList),((e,a)=>(m(),y(c,{key:a,class:"board__detail-tag",type:e.type},{default:f((()=>[w(k(e.text)+": "+k(e.count),1)])),_:2},1032,["type"])))),128))])),_:1})])),_:1})]),g("div",oe,[v(L,{data:h(l),status:h(a)},null,8,["data","status"])])])):(m(),b("div",Q,"请选择项目"))])),_:1})])])}}});se.__scopeId="data-v-33478162";export{se as default};
