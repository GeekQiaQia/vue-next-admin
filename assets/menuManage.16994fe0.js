var x=Object.defineProperty,ee=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var P=(e,l,o)=>l in e?x(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o,w=(e,l)=>{for(var o in l||(l={}))le.call(l,o)&&P(e,o,l[o]);if(N)for(var o of N(l))ce.call(l,o)&&P(e,o,l[o]);return e},$=(e,l)=>ee(e,ie(l));import{_ as V,u as O,a as oe}from"./index.0d1898b4.js";import{d as B,A as S,r as R,c as Z,C as z,s as n,f as C,e as k,t as i,m as c,h,F as H,v as te,n as A,p as ne,g as se,as as q,L as I,N as D,O as ue,j as M,ax as ae,ad as re,av as de,aw as me,k as pe,x as T,P as fe,an as ge,H as j}from"./vendor.6752bb16.js";const _e=B({name:"Icon",props:{msg:{type:String,required:!1,default:""}},emits:["success"],setup:(e,{emit:l})=>{const o=S({icons:["ic ic-accessory","ic ic-activity","ic ic-activity-fill","ic ic-add","ic ic-addition-fill","ic ic-addition","ic ic-addpeople-fill","ic ic-addpeople","ic ic-addressbook-fill","ic ic-addressbook","ic ic-barrage-fill","ic ic-barrage","ic ic-browse-fill","ic ic-browse","ic ic-brush","ic ic-brush-fill","ic ic-businesscard-fill","ic ic-businesscard","ic ic-camera-fill","ic ic-camera","ic ic-clock-fill","ic ic-clock","ic ic-close","ic ic-collection-fill","ic ic-collection","ic ic-computer-fill","ic ic-computer","ic ic-coordinates-fill","ic ic-coordinates","ic ic-coupons-fill","ic ic-coupons","ic ic-createtask-fill","ic ic-createtask","ic ic-customerservice-fill","ic ic-customerservice","ic ic-delete-fill","ic ic-delete","ic ic-document","ic ic-document-fill","ic ic-dynamic ic-fill","ic ic-dynamic","ic ic-editor","ic ic-eit","ic ic-emoji-fill","ic ic-emoji","ic ic-empty","ic ic-empty-fill","ic ic-enter","ic ic-enterinto","ic ic-enterinto-fill","ic ic-feedback-fill","ic ic-feedback","ic ic-flag-fill","ic ic-flag","ic ic-flashlight","ic ic-flashlight-fill","ic ic-flip","ic ic-flip-fill","ic ic-fullscreen","ic ic-group","ic ic-group-fill","ic ic-headlines-fill","ic ic-headlines","ic ic-homepage-fill","ic ic-homepage","ic ic-integral-fill","ic ic-integral","ic ic-interactive-fill","ic ic-interactive","ic ic-keyboard","ic ic-label","ic ic-label-fill","ic ic-like-fill","ic ic-like","ic ic-live-fill","ic ic-live","ic ic-lock-fill","ic ic-lock","ic ic-mail","ic ic-mail-fill","ic ic-manage-fill","ic ic-manage","ic ic-message","ic ic-message-fill","ic ic-mine","ic ic-mine-fill","ic ic-mobilephone-fill","ic ic-mobilephone","ic ic-more","ic ic-narrow","ic ic-offline-fill","ic ic-offline","ic ic-order-fill","ic ic-order","ic ic-other","ic ic-people-fill","ic ic-people","ic ic-picture-fill","ic ic-picture","ic ic-play","ic ic-play-fill","ic ic-playon-fill","ic ic-playon","ic ic-praise-fill","ic ic-praise","ic ic-prompt-fill","ic ic-prompt","ic ic-qrcode-fill","ic ic-qrcode","ic ic-redpacket-fill","ic ic-redpacket","ic ic-refresh","ic ic-remind-fill","ic ic-remind","ic ic-return","ic ic-right","ic ic-scan","ic ic-select-fill","ic ic-select","ic ic-send","ic ic-service-fill","ic ic-service","ic ic-setup-fill","ic ic-setup","ic ic-share-fill","ic ic-share","ic ic-shielding-fill","ic ic-shielding","ic ic-smallscreen-fill","ic ic-smallscreen","ic ic-stealth-fill","ic ic-stealth","ic ic-success-fill","ic ic-success","ic ic-suspend","ic ic-switch","ic ic-systemprompt-fill","ic ic-systemprompt","ic ic-tailor","ic ic-task","ic ic-task-fill","ic ic-tasklist-fill","ic ic-tasklist","ic ic-text","ic ic-time-fill","ic ic-time","ic ic-translation-fill","ic ic-translation","ic ic-trash","ic ic-trash-fill","ic ic-undo","ic ic-unlock-fill","ic ic-unlock","ic ic-video","ic ic-video-fill","ic ic-warning-fill","ic ic-warning","ic ic-workbench-fill","ic ic-workbench","ic ic-search","ic ic-searchfill","ic ic-publishgoods-fill","ic ic-shop-fill","ic ic-transaction-fill","ic ic-packup","ic ic-unfold","ic ic-wangwang","ic ic-financial-fill","ic ic-marketing-fill","ic ic-shake","ic ic-decoration-fill","ic ic-questions","ic ic-supply","ic ic-tools","ic ic-int","ic ic-commodity","ic ic-zhtn"],data:[""],key:""}),_=R(0),a=t=>d=>d.toLowerCase().indexOf(t.toLowerCase())>0,g=()=>{const{key:t}=o,{icons:d}=o;o.data=t?d.filter(a(t)):d},u=()=>o.icons,s=t=>{l("success",t)};return Z(()=>{o.data=u()}),$(w({count:_},z(o)),{search:g,selected:s})}}),U=e=>(ne("data-v-57f84410"),e=e(),se(),e),he={class:"icon-panel"},be=U(()=>h("br",null,null,-1)),Fe=U(()=>h("br",null,null,-1)),Ce=["onClick"],Ee=U(()=>h("br",null,null,-1));function ve(e,l,o,_,a,g){const u=n("el-button"),s=n("el-input");return C(),k("div",he,[i(s,{modelValue:e.key,"onUpdate:modelValue":l[1]||(l[1]=t=>e.key=t),placeholder:"\u641C\u7D22\u56FE\u6807",onInput:e.search},{default:c(()=>[i(u,{icon:"el-icon-search",onClick:l[0]||(l[0]=t=>e.search())})]),_:1},8,["modelValue","onInput"]),be,Fe,h("section",null,[(C(!0),k(H,null,te(e.data,t=>(C(),k("span",{key:t,class:"icon-items",onClick:d=>e.selected(t)},[h("i",{class:A(t)},null,2),Ee],8,Ce))),128))])])}var G=V(_e,[["render",ve],["__scopeId","data-v-57f84410"]]);const ke=/^(\/[a-zA-Z][0-9a-zA-Z]+)+$/,De=(e,l,o)=>{ke.test(l)?o():o(new Error("\u5FC5\u987B\u8F93\u5165\u6B63\u786E\u7684\u8DEF\u5F84"))},we=B({name:"MenuNew",components:{Icons:G},emits:["success"],setup(e,{emit:l}){const o={"meta.title":[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:"blur"},{min:2,max:10,message:"\u957F\u5EA6\u5728 2 \u5230 10 \u4E2A\u5B57\u7B26",trigger:"blur"}],"meta.icon":[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u56FE\u6807",trigger:"blur"}],path:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u8DEF\u5F84",trigger:"blur"},{min:2,message:"\u81F3\u5C112\u4E2A\u5B57\u7B26",trigger:"blur"},{validator:De,trigger:"blur"}]},_=R(),a=S({form:{path:"",meta:{title:"",icon:""}},modal:!1,loading:!1}),g=t=>{console.log("val is ",t),a.modal=!1,a.form.meta.icon=t},u=()=>{a.modal=!a.modal,console.log(" state.modal",a.modal)},s=()=>{_.value.validate(t=>t?(console.log(a.form),l("success",a.form),!0):!1)};return $(w({},z(a)),{formRef:_,rules:o,onSuccess:g,submitForm:s,handleClickChoose:u})}}),$e={class:"new"},ye=D("\u9009\u62E9\u56FE\u6807"),Ve=h("i",{class:"fa fa-plus"},null,-1),Be=D(" \u786E\u8BA4\u4FEE\u6539 ");function Se(e,l,o,_,a,g){const u=n("el-input"),s=n("el-form-item"),t=n("el-button"),d=n("icons"),b=n("el-popover"),m=n("el-row"),E=n("el-form"),v=q("loading");return I((C(),k("div",$e,[i(E,{ref:"formRef",model:e.form,rules:e.rules,"label-position":"right","label-width":"100px"},{default:c(()=>[i(s,{label:"\u83DC\u5355\u540D\u79F0",prop:"meta.title"},{default:c(()=>[i(u,{modelValue:e.form.meta.title,"onUpdate:modelValue":l[0]||(l[0]=r=>e.form.meta.title=r),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(s,{label:"\u83DC\u5355\u56FE\u6807",prop:"meta.icon"},{default:c(()=>[i(u,{modelValue:e.form.meta.icon,"onUpdate:modelValue":l[1]||(l[1]=r=>e.form.meta.icon=r),placeholder:"\u8BF7\u9009\u62E9\u83DC\u5355\u56FE\u6807",style:{width:"60%"}},null,8,["modelValue"]),i(t,{disabled:"disabled"},{default:c(()=>[h("i",{class:A(e.form.meta.icon)},null,2)]),_:1}),i(b,{visible:e.modal,placement:"bottom",width:"80vw",title:"\u8BF7\u9009\u62E9\u56FE\u6807"},{reference:c(()=>[i(t,{icon:"el-icon-search",onClick:e.handleClickChoose},{default:c(()=>[ye]),_:1},8,["onClick"])]),default:c(()=>[i(d,{onSuccess:e.onSuccess},null,8,["onSuccess"])]),_:1},8,["visible"])]),_:1}),i(s,{label:"\u83DC\u5355\u8DEF\u5F84",prop:"path"},{default:c(()=>[i(u,{modelValue:e.form.path,"onUpdate:modelValue":l[2]||(l[2]=r=>e.form.path=r),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u8DEF\u5F84"},null,8,["modelValue"])]),_:1}),i(m,{class:"btn-container"},{default:c(()=>[i(t,{size:"mini",type:"primary",onClick:l[3]||(l[3]=r=>e.submitForm())},{default:c(()=>[Ve,Be]),_:1})]),_:1})]),_:1},8,["model","rules"])])),[[v,e.loading]])}var ze=V(we,[["render",Se]]);const Ae=/^(\/[a-zA-Z][0-9a-zA-Z]+)+$/,Me=(e,l,o)=>{Ae.test(l)?o():o(new Error("\u5FC5\u987B\u8F93\u5165\u6B63\u786E\u7684\u8DEF\u5F84"))},Re=B({name:"MenuEdit",components:{Icons:G},props:{currentMenu:{type:Object,default:null}},emits:["success"],setup(e,{emit:l}){const o=ue(e,"currentMenu"),_=O(),a=M(()=>_.getters["settingsModule/getLangState"]);console.log(o);const g={"meta.title":[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:"blur"},{min:2,max:10,message:"\u957F\u5EA6\u5728 2 \u5230 10 \u4E2A\u5B57\u7B26",trigger:"blur"}],"meta.icon":[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u56FE\u6807",trigger:"blur"}],path:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u8DEF\u5F84",trigger:"blur"},{min:2,message:"\u81F3\u5C112\u4E2A\u5B57\u7B26",trigger:"blur"},{validator:Me,trigger:"blur"}]},u=R(),s=S({form:o,modal:!1,loading:!1}),t=m=>{console.log("val is ",m),s.modal=!1,s.form.meta.icon=m},d=()=>{s.modal=!s.modal,console.log(" state.modal",s.modal)},b=()=>{u.value.validate(m=>m?(console.log(s.form),l("success",s.form),!0):!1)};return $(w({},z(s)),{formRef:u,rules:g,lang:a,onSuccess:t,submitForm:b,handleClickChoose:d})}}),qe={class:"new"},Ie=D("\u9009\u62E9\u56FE\u6807"),Ue=h("i",{class:"fa fa-plus"},null,-1),Le=D(" \u786E\u8BA4\u4FEE\u6539 ");function Ne(e,l,o,_,a,g){const u=n("el-input"),s=n("el-form-item"),t=n("el-button"),d=n("icons"),b=n("el-popover"),m=n("el-row"),E=n("el-form"),v=q("loading");return I((C(),k("div",qe,[i(E,{ref:"formRef",model:e.form,rules:e.rules,"label-position":"right","label-width":"100px"},{default:c(()=>[i(s,{label:"\u83DC\u5355\u540D\u79F0",prop:"meta.title"},{default:c(()=>[i(u,{modelValue:e.form.meta.title[e.lang],"onUpdate:modelValue":l[0]||(l[0]=r=>e.form.meta.title[e.lang]=r),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(s,{label:"\u83DC\u5355\u56FE\u6807",prop:"meta.icon"},{default:c(()=>[i(u,{modelValue:e.form.meta.icon,"onUpdate:modelValue":l[1]||(l[1]=r=>e.form.meta.icon=r),placeholder:"\u8BF7\u9009\u62E9\u83DC\u5355\u56FE\u6807",style:{width:"60%"}},null,8,["modelValue"]),i(t,{disabled:"disabled"},{default:c(()=>[h("i",{class:A(e.form.meta.icon)},null,2)]),_:1}),i(b,{visible:e.modal,placement:"bottom",width:"80vw",title:"\u8BF7\u9009\u62E9\u56FE\u6807"},{reference:c(()=>[i(t,{icon:"el-icon-search",onClick:e.handleClickChoose},{default:c(()=>[Ie]),_:1},8,["onClick"])]),default:c(()=>[i(d,{onSuccess:e.onSuccess},null,8,["onSuccess"])]),_:1},8,["visible"])]),_:1}),i(s,{label:"\u83DC\u5355\u8DEF\u5F84",prop:"path"},{default:c(()=>[i(u,{modelValue:e.form.path,"onUpdate:modelValue":l[2]||(l[2]=r=>e.form.path=r),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u8DEF\u5F84"},null,8,["modelValue"])]),_:1}),i(m,{class:"btn-container"},{default:c(()=>[i(t,{size:"mini",type:"primary",onClick:l[3]||(l[3]=r=>e.submitForm())},{default:c(()=>[Ue,Le]),_:1})]),_:1})]),_:1},8,["model","rules"])])),[[v,e.loading]])}var Pe=V(Re,[["render",Ne]]);const Te=e=>{console.log(e),ge.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BE5\u6570\u636E, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{j({type:"success",message:"\u5220\u9664\u6210\u529F"})}).catch(()=>{j({type:"info",message:"\u5DF2\u53D6\u6D88\u5220\u9664"})})},je=B({name:"Menu",components:{MenuNew:ze,MenuEdit:Pe,Plus:ae,Refresh:re,Edit:de,Minus:me},setup(){const e=O(),l=M(()=>e.getters["settingsModule/getLangState"]),o=S({url:{c:"/menu/add",r:"/menu/list",u:"/menu/update",d:"/menu/delete"},param:{limit:10,page:1},data:[{path:"/",redirect:"/home",meta:{title:"\u9996\u9875",icon:"el-icon-s-home"},children:[{path:"/home",name:"home",component:()=>oe(()=>import("./home.aa3b0857.js"),["assets/home.aa3b0857.js","assets/home.e32d48d5.css","assets/installCanvasRenderer.cd6598a7.js","assets/universalTransition.91380cf9.js","assets/index.0d1898b4.js","assets/index.8c77e9d8.css","assets/vendor.6752bb16.js"]),meta:{title:"\u9996\u9875",icon:"home"}}]}],total:1,loading:!1,addVisible:!1,editVisible:!1,detailVisible:!1,posted:{menu:{path:"",meta:{title:"",icon:""}}}}),_=M(()=>e.state.permissionModule.accessRoutes),a=()=>{const p=_.value.filter(F=>{var y;return((y=F==null?void 0:F.meta)==null?void 0:y.hidden)!==!0});console.log("result",p),o.data=p},g=p=>{console.log(p)},u=p=>{g(p)},s=p=>{o.param.limit=p,g(p)},t=()=>{o.addVisible=!0},d=()=>{g()},b=(p,F)=>{console.log("row,",F,p),o.posted.menu=F,o.editVisible=!0},m=(p,F)=>{console.log(F),Te(p)},E=()=>{o.addVisible=!1,g()},v=()=>{console.log("on edit success"),o.editVisible=!1},r=()=>{};return Z(()=>{a()}),$(w({},z(o)),{onError:r,lang:l,onAddSuccess:E,onEditSuccess:v,onDelete:m,onCurrentChange:u,onSizeChange:s,onCreate:t,onRefresh:d,onEdit:b})}}),Oe=D(" \u65B0\u589E"),Ze=D(" \u5237\u65B0"),He={class:"pagination"};function Ge(e,l,o,_,a,g){const u=n("plus"),s=n("el-icon"),t=n("el-button"),d=n("refresh"),b=n("el-col"),m=n("el-table-column"),E=n("el-tag"),v=n("edit"),r=n("el-tooltip"),p=n("minus"),F=n("el-table"),y=n("el-pagination"),J=n("el-row"),K=n("el-card"),Q=n("menu-new"),L=n("el-dialog"),W=n("menu-edit"),X=q("loading");return C(),k("div",null,[i(K,{class:"card-ctrl"},{default:c(()=>[i(J,null,{default:c(()=>[i(b,null,{default:c(()=>[i(b,null,{default:c(()=>[i(t,{type:"primary",size:"small",onClick:e.onCreate},{default:c(()=>[i(s,null,{default:c(()=>[i(u)]),_:1}),Oe]),_:1},8,["onClick"]),i(t,{type:"success",size:"small",onClick:e.onRefresh},{default:c(()=>[i(s,null,{default:c(()=>[i(d)]),_:1}),Ze]),_:1},8,["onClick"])]),_:1}),I((C(),pe(F,{data:e.data,stripe:"",class:"table"},{default:c(()=>[i(m,{label:"\u83DC\u5355\u540D\u79F0",align:"center"},{default:c(f=>[h("span",null,T(f.row.meta.title[e.lang]),1)]),_:1}),i(m,{label:"\u56FE\u6807",align:"center"},{default:c(f=>[h("i",{class:A(f.row.meta.icon)},null,2)]),_:1}),i(m,{label:"\u8DEF\u5F84",align:"center"},{default:c(f=>[i(E,{size:"mini",type:"info"},{default:c(()=>[D(T(f.row.path),1)]),_:2},1024)]),_:1}),i(m,{label:"\u64CD\u4F5C",align:"center"},{default:c(f=>[f.row.state!=0?(C(),k(H,{key:0},[i(r,{class:"item",effect:"dark",content:"\u4FEE\u6539",placement:"bottom"},{default:c(()=>[i(t,{circle:"",plain:"",type:"primary",size:"mini",onClick:Y=>e.onEdit(f.$index,f.row)},{default:c(()=>[i(s,null,{default:c(()=>[i(v)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),i(r,{class:"item",effect:"dark",content:"\u5220\u9664",placement:"bottom"},{default:c(()=>[i(t,{circle:"",plain:"",type:"danger",size:"mini",onClick:Y=>e.onDelete(f.$index,f.row)},{default:c(()=>[i(s,null,{default:c(()=>[i(p)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)],64)):fe("",!0)]),_:1})]),_:1},8,["data"])),[[X,e.loading]]),h("div",He,[i(y,{"current-page":e.param.page,"page-size":e.param.limit,layout:"sizes,prev,pager,next,total","page-sizes":[5,10,20],total:e.total,background:"",onCurrentChange:e.onCurrentChange,onSizeChange:e.onSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]),_:1})]),_:1})]),_:1}),i(L,{modelValue:e.addVisible,"onUpdate:modelValue":l[0]||(l[0]=f=>e.addVisible=f),width:"632px",title:"\u65B0\u589E\u83DC\u5355"},{default:c(()=>[i(Q,{onSuccess:e.onAddSuccess},null,8,["onSuccess"])]),_:1},8,["modelValue"]),i(L,{modelValue:e.editVisible,"onUpdate:modelValue":l[1]||(l[1]=f=>e.editVisible=f),center:"",width:"632px",title:e.posted.menu.meta.title[e.lang]},{default:c(()=>[i(W,{"current-menu":e.posted.menu,onSuccess:e.onEditSuccess},null,8,["current-menu","onSuccess"])]),_:1},8,["modelValue","title"])])}var We=V(je,[["render",Ge]]);export{We as default};
