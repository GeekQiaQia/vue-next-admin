!function(){function e(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);r&&(l=l.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,l)}return t}function r(r){for(var l=1;l<arguments.length;l++){var n=null!=arguments[l]?arguments[l]:{};l%2?e(Object(n),!0).forEach((function(e){t(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}function t(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function l(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var l=0,a=function(){};return{s:a,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw o}}}}function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,l=new Array(r);t<r;t++)l[t]=e[t];return l}function a(e,r,t,l,n,a,o){try{var i=e[a](o),s=i.value}catch(c){return void t(c)}i.done?r(s):Promise.resolve(s).then(l,n)}function o(e,r){for(var t=0;t<r.length;t++){var l=r[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}var i=document.createElement("style");i.innerHTML='.el-alert{--el-alert-padding: 8px 16px;--el-alert-border-radius-base: var(--el-border-radius-base);--el-alert-title-font-size: 13px;--el-alert-description-font-size: 12px;--el-alert-close-font-size: 12px;--el-alert-close-customed-font-size: 13px;--el-alert-icon-size: 16px;--el-alert-icon-large-size: 28px;width:100%;padding:var(--el-alert-padding);margin:0;box-sizing:border-box;border-radius:var(--el-alert-border-radius-base);position:relative;background-color:var(--el-color-white);overflow:hidden;opacity:1;display:flex;align-items:center;transition:opacity var(--el-transition-duration-fast)}.el-alert.is-light .el-alert__close-btn{color:var(--el-text-color-placeholder)}.el-alert.is-dark .el-alert__close-btn,.el-alert.is-dark .el-alert__description{color:var(--el-color-white)}.el-alert.is-center{justify-content:center}.el-alert--success{--el-alert-bg-color: #e9f8ec}.el-alert--success.is-light{background-color:var(--el-alert-bg-color);color:var(--el-color-success)}.el-alert--success.is-light .el-alert__description{color:var(--el-color-success)}.el-alert--success.is-dark{background-color:var(--el-color-success);color:var(--el-color-white)}.el-alert--info{--el-alert-bg-color: #ecf8fc}.el-alert--info.is-light{background-color:var(--el-alert-bg-color);color:var(--el-color-info)}.el-alert--info.is-light .el-alert__description{color:var(--el-color-info)}.el-alert--info.is-dark{background-color:var(--el-color-info);color:var(--el-color-white)}.el-alert--warning{--el-alert-bg-color: #fef1e8}.el-alert--warning.is-light{background-color:var(--el-alert-bg-color);color:var(--el-color-warning)}.el-alert--warning.is-light .el-alert__description{color:var(--el-color-warning)}.el-alert--warning.is-dark{background-color:var(--el-color-warning);color:var(--el-color-white)}.el-alert--error{--el-alert-bg-color: #fbeaea}.el-alert--error.is-light{background-color:var(--el-alert-bg-color);color:var(--el-color-error)}.el-alert--error.is-light .el-alert__description{color:var(--el-color-error)}.el-alert--error.is-dark{background-color:var(--el-color-error);color:var(--el-color-white)}.el-alert__content{display:table-cell;padding:0 8px}.el-alert .el-alert__icon{font-size:var(--el-alert-icon-size);width:var(--el-alert-icon-size)}.el-alert .el-alert__icon.is-big{font-size:var(--el-alert-icon-large-size);width:var(--el-alert-icon-large-size)}.el-alert__title{font-size:var(--el-alert-title-font-size);line-height:18px;vertical-align:text-top}.el-alert__title.is-bold{font-weight:700}.el-alert .el-alert__description{font-size:var(--el-alert-description-font-size);margin:5px 0 0}.el-alert .el-alert__close-btn{font-size:var(--el-alert-close-font-size);opacity:1;position:absolute;top:12px;right:15px;cursor:pointer}.el-alert .el-alert__close-btn.is-customed{font-style:normal;font-size:var(--el-alert-close-customed-font-size);top:9px}.el-alert-fade-enter-from,.el-alert-fade-leave-active{opacity:0}.el-transfer{--el-transfer-border-color: var(--el-border-color-lighter);--el-transfer-border-radius: var(--el-border-radius-base);--el-transfer-panel-width: 200px;--el-transfer-panel-header-height: 40px;--el-transfer-panel-header-bg-color: var(--el-bg-color);--el-transfer-panel-footer-height: 40px;--el-transfer-panel-body-height: 278px;--el-transfer-item-height: 30px;--el-transfer-filter-height: 32px}.el-transfer{font-size:var(--el-font-size-base)}.el-transfer__buttons{display:inline-block;vertical-align:middle;padding:0 30px}.el-transfer__button{vertical-align:top}.el-transfer__button:nth-child(2){margin:0 0 0 10px}.el-transfer__button i,.el-transfer__button span{font-size:14px}.el-transfer__button .el-icon+span{margin-left:0}.el-transfer-panel{overflow:hidden;background:var(--el-color-white);display:inline-block;text-align:left;vertical-align:middle;width:var(--el-transfer-panel-width);max-height:100%;box-sizing:border-box;position:relative}.el-transfer-panel__body{height:var(--el-transfer-panel-body-height);border-left:1px solid var(--el-transfer-border-color);border-right:1px solid var(--el-transfer-border-color);border-bottom:1px solid var(--el-transfer-border-color);border-bottom-left-radius:var(--el-transfer-border-radius);border-bottom-right-radius:var(--el-transfer-border-radius);overflow:hidden}.el-transfer-panel__body.is-with-footer{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.el-transfer-panel__list{margin:0;padding:6px 0;list-style:none;height:var(--el-transfer-panel-body-height);overflow:auto;box-sizing:border-box}.el-transfer-panel__list.is-filterable{height:calc(100% - var(--el-transfer-filter-height) - 30px);padding-top:0}.el-transfer-panel__item{height:var(--el-transfer-item-height);line-height:var(--el-transfer-item-height);padding-left:15px;display:block!important}.el-transfer-panel__item+.el-transfer-panel__item{margin-left:0}.el-transfer-panel__item.el-checkbox{color:var(--el-text-color-regular)}.el-transfer-panel__item:hover{color:var(--el-color-primary)}.el-transfer-panel__item.el-checkbox .el-checkbox__label{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;box-sizing:border-box;padding-left:22px;line-height:var(--el-transfer-item-height)}.el-transfer-panel__item .el-checkbox__input{position:absolute;top:8px}.el-transfer-panel__filter{text-align:center;margin:15px;box-sizing:border-box;width:auto}.el-transfer-panel__filter .el-input__inner{height:var(--el-transfer-filter-height);width:100%;font-size:12px;display:inline-block;box-sizing:border-box;border-radius:calc(var(--el-transfer-filter-height) / 2)}.el-transfer-panel__filter .el-icon-circle-close{cursor:pointer}.el-transfer-panel .el-transfer-panel__header{display:flex;align-items:center;height:var(--el-transfer-panel-header-height);background:var(--el-transfer-panel-header-bg-color);margin:0;padding-left:15px;border:1px solid var(--el-transfer-border-color);border-top-left-radius:var(--el-transfer-border-radius);border-top-right-radius:var(--el-transfer-border-radius);box-sizing:border-box;color:var(--el-color-black)}.el-transfer-panel .el-transfer-panel__header .el-checkbox{position:relative;display:flex;width:100%;align-items:center}.el-transfer-panel .el-transfer-panel__header .el-checkbox .el-checkbox__label{font-size:16px;color:var(--el-text-color-primary);font-weight:400}.el-transfer-panel .el-transfer-panel__header .el-checkbox .el-checkbox__label span{position:absolute;right:15px;top:50%;transform:translateY(-50%);color:var(--el-text-color-secondary);font-size:12px;font-weight:400}.el-transfer-panel .el-transfer-panel__footer{height:var(--el-transfer-panel-footer-height);background:var(--el-color-white);margin:0;padding:0;border:1px solid var(--el-transfer-border-color);border-bottom-left-radius:var(--el-transfer-border-radius);border-bottom-right-radius:var(--el-transfer-border-radius)}.el-transfer-panel .el-transfer-panel__footer:after{display:inline-block;content:"";height:100%;vertical-align:middle}.el-transfer-panel .el-transfer-panel__footer .el-checkbox{padding-left:20px;color:var(--el-text-color-regular)}.el-transfer-panel .el-transfer-panel__empty{margin:0;height:var(--el-transfer-item-height);line-height:var(--el-transfer-item-height);padding:6px 15px 0;color:var(--el-text-color-secondary);text-align:center}.el-transfer-panel .el-checkbox__label{padding-left:8px}.el-transfer-panel .el-checkbox__inner{height:14px;width:14px;border-radius:3px}.el-transfer-panel .el-checkbox__inner:after{height:6px;width:3px;left:4px}.btns[data-v-7247ff70]{text-align:right}.el-transfer[data-v-7247ff70]{display:inline-block;text-align:left}.transfer[data-v-7247ff70]{text-align:center}.card-header[data-v-7247ff70]{text-align:left}\n',document.head.appendChild(i),System.register(["./vendor-legacy.fd567dca.js","./loading-legacy.a92cda73.js","./dialog-legacy.b0a805cc.js","./col-legacy.4976b2e9.js","./pagination-legacy.a6db97a4.js","./table-column-legacy.0f81edab.js","./checkbox-legacy.f04a5c48.js","./checkbox-group-legacy.c8d124f5.js","./index-legacy.837e2261.js"],(function(e){"use strict";var t,n,i,s,c,u,f,d,p,b,g,m,h,v,_,x,y,k,w,z,j,C,O,S,N,P,R,V,E,D,A,M,T,U,I,L,$,q,B,F,Y,H,J,Q,X,G,K;return{setters:[function(e){t=e.d,n=e.a1,i=e.e,s=e.q,c=e.c,u=e.v,f=e.x,d=e._,p=e.j,b=e.h,g=e.i,m=e.w,h=e.n,v=e.t,_=e.L,x=e.M,y=e.a0,k=e.ah,w=e.ai,z=e.b8,j=e.ay,C=e.R,O=e.ax,S=e.b9,N=e.r,P=e.aE,R=e.ba,V=e.bb,E=e.bc,D=e.aJ,A=e.z,M=e.m,T=e.a4,U=e.bd,I=e.y,L=e.aw,$=e.aP,q=e.b4,B=e.X,F=e.aQ,Y=e.be,H=e.a_,J=e.aY,Q=e.N},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(e){X=e.r,G=e.u,K=e._}],execute:function(){var W="/api/auth/permission/routes",Z=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,l;return r=e,l=[{key:"postAuthPermission",value:function(e){return X({url:W,method:"POST",json:!0,data:e}).then((function(e){return console.log(e),0===e.status?Promise.resolve(e):Promise.reject(e)}))}}],(t=null)&&o(r.prototype,t),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),e}(),ee=t({name:"RolesEdit",props:{currentRole:{type:Object,default:function(){return{roleName:"",state:1}}}},emits:["success"],setup:function(e,t){var o=t.emit,d=n(e,"currentRole"),p=G(),b=i((function(){return p.getters["settingsModule/getLangState"]})),g=s({url:"/role/allow",purl:"/role/permissions",loading:!1,form:{key:"",label:""},menu:{loading:!1,url:"/menu/list",data:[],form:[]}}),m=i((function(){return d.value.role})),h=i((function(){return p.state.permissionModule.routes})),v=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,t,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={roleName:m.value.roleName},e.next=3,Z.postAuthPermission(r);case 3:null!=(t=e.sent)&&t.data&&(l=t.data.authedRoutes,g.menu.form=l);case 5:case"end":return e.stop()}}),e)})),function(){var r=this,t=arguments;return new Promise((function(l,n){var o=e.apply(r,t);function i(e){a(o,l,n,i,s,"next",e)}function s(e){a(o,l,n,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}(),_=function(){var e,r=l(h.value);try{for(r.s();!(e=r.n()).done;){var t,n,a=e.value;if(null==a||null===(t=a.meta)||void 0===t||!t.hidden)g.menu.data.push({key:null==a?void 0:a.path,label:null==a||null===(n=a.meta)||void 0===n?void 0:n.title[b.value]})}}catch(o){r.e(o)}finally{r.f()}};return c((function(){_()})),u((function(){v()})),r(r({},f(g)),{},{lang:b,role:m,fetchMenuData:_,saveData:function(){console.log("form is ",g.menu.form),o("success")}})}}),re=function(e){return _("data-v-7247ff70"),e=e(),x(),e},te={class:"wrapper"},le={class:"card-header"},ne=re((function(){return h("br",null,null,-1)})),ae=re((function(){return h("i",{class:"fa fa-check"},null,-1)})),oe=y(" 确认修改 ");var ie=K(ee,[["render",function(e,r,t,l,n,a){var o=k,i=w,s=z,c=j,u=C,f=O,_=S;return d((p(),b("div",te,[g(c,{class:"transfer"},{header:m((function(){return[h("span",null,[h("div",le,[g(i,{"label-position":"left",inline:"",class:"info-table"},{default:m((function(){return[g(o,{label:"名称"},{default:m((function(){return[h("span",null,v(e.role.roleName),1)]})),_:1})]})),_:1})])])]})),default:m((function(){return[d(g(s,{modelValue:e.menu.form,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.menu.form=r}),data:e.menu.data,titles:["菜单","已授权"]},null,8,["modelValue","data"]),[[_,e.menu.loading]])]})),_:1}),ne,g(f,{class:"btns"},{default:m((function(){return[g(u,{size:"mini",type:"primary",disabled:0==e.role.state,onClick:e.saveData},{default:m((function(){return[ae,oe]})),_:1},8,["disabled","onClick"])]})),_:1})])),[[_,e.loading]])}],["__scopeId","data-v-7247ff70"]]),se=t({name:"RoleNew",emits:["success"],setup:function(e,t){var l=t.emit,n=N(),a=s({form:{roleName:"",remark:""},loading:!1});return r({submitForm:function(){n.value.validate((function(e){return e?(l("success",r({},a.form)),!0):(console.log("error submit!!"),!1)}))},rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}]},formRef:n,url:"/role/add"},f(a))}}),ce={class:"new"},ue=h("i",{class:"fa fa-plus"},null,-1),fe=y(" 新增 ");var de=t({name:"RoleManage",components:{RoleEdit:ie,RoleNew:K(se,[["render",function(e,r,t,l,n,a){var o=P,i=k,s=C,c=O,u=w,f=S;return d((p(),b("div",ce,[g(u,{ref:"formRef",model:e.form,rules:e.rules,"label-position":"right","label-width":"100px"},{default:m((function(){return[g(i,{label:"角色名称",prop:"roleName"},{default:m((function(){return[g(o,{modelValue:e.form.roleName,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.form.roleName=r}),placeholder:"请输入角色名称"},null,8,["modelValue"])]})),_:1}),g(i,{label:"备注"},{default:m((function(){return[g(o,{modelValue:e.form.remark,"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.form.remark=r}),placeholder:"请输入备注"},null,8,["modelValue"])]})),_:1}),g(c,{class:"btn-container"},{default:m((function(){return[g(s,{size:"mini",type:"primary",onClick:r[2]||(r[2]=function(r){return e.submitForm()})},{default:m((function(){return[ue,fe]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])])),[[f,e.loading]])}]]),Edit:R,Minus:V,Plus:E,Refresh:D},setup:function(){var e=s({url:{c:"/role/add",r:"/role/list",u:"/role/update",d:"/role/delete"},param:{limit:10,page:1},data:[{roleName:"超级管理员",remark:"拥有删除和创建等操作的权限",state:0},{roleName:"管理员",remark:"拥有创建和权限分配的权限",state:0},{roleName:"游客",remark:"只拥有操作部分菜单的权限",state:1}],loading:!1,is_search:!1,add_visible:!1,edit_visible:!1,detail_visible:!1,posted:{role:{roleName:"",state:1}}}),t=i((function(){return e.data.length}));return r(r({},f(e)),{},{total:t,onCurrentChange:function(){},onSizeChange:function(r){e.param.limit=r},onCreate:function(){e.add_visible=!0},onCreateSuccess:function(r){console.log(r);var t={roleName:r.roleName,remark:r.remark,state:1};e.data.push(t),e.add_visible=!1},onEditSuccess:function(){e.edit_visible=!1},onRefresh:function(){e.is_search=!1},onEdit:function(r,t){console.log("row",t),e.posted.role=t,e.edit_visible=!0},onDelete:function(e,r){console.log(e,r),function(e){console.log(e),J.confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Q({type:"success",message:"删除成功"})})).catch((function(){Q({type:"info",message:"已取消删除"})}))}(e)}})}}),pe=y(" 新增"),be=y(" 刷新"),ge=h("br",null,null,-1),me=h("i",{class:"ic ic-lock"},null,-1),he=y(" 锁定"),ve=y("正常"),_e=y("未知"),xe={class:"pagination"};e("default",K(de,[["render",function(e,r,t,l,n,a){var o=U,i=A("plus"),s=I,c=C,u=A("refresh"),f=L,v=O,_=$,x=q,y=A("edit"),k=B,w=A("minus"),z=F,N=Y,P=j,R=A("role-edit"),V=H,E=A("role-new"),D=S;return p(),b("div",null,[g(o,{title:"Tips:点击【新增】按钮进行新增角色；点击【编辑】按钮，进行不同角色的菜单授权操作！",type:"warning"}),g(o,{title:"Tips:权限控制体验：【管理员账号为：admin@outlook.com】、【超级管理员账号为：super@outlook.com】",type:"info"}),g(P,{class:"card-ctrl"},{default:m((function(){return[g(v,null,{default:m((function(){return[g(f,{span:8,style:{"text-align":"left"}},{default:m((function(){return[g(c,{type:"primary",size:"small",onClick:e.onCreate},{default:m((function(){return[g(s,null,{default:m((function(){return[g(i)]})),_:1}),pe]})),_:1},8,["onClick"]),g(c,{type:"success",size:"small",onClick:e.onRefresh},{default:m((function(){return[g(s,null,{default:m((function(){return[g(u)]})),_:1}),be]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),ge,d((p(),M(z,{data:e.data,stripe:"",class:"table"},{default:m((function(){return[g(_,{prop:"roleName",label:"角色名称",align:"center"}),g(_,{prop:"state",label:"角色状态",align:"center"},{default:m((function(e){return[0==e.row.state?(p(),M(x,{key:0,size:"mini",type:"info"},{default:m((function(){return[me,he]})),_:1})):1==e.row.state?(p(),M(x,{key:1,size:"mini",type:"success"},{default:m((function(){return[ve]})),_:1})):(p(),M(x,{key:2,size:"mini",type:"danger"},{default:m((function(){return[_e]})),_:1}))]})),_:1}),g(_,{prop:"remark",label:"备注",align:"center"}),g(_,{label:"操作",align:"center"},{default:m((function(r){return[g(k,{class:"item",effect:"dark",content:"菜单授权",placement:"bottom"},{default:m((function(){return[g(c,{circle:"",plain:"",type:"primary",size:"small",onClick:function(t){return e.onEdit(r.$index,r.row)}},{default:m((function(){return[g(s,null,{default:m((function(){return[g(y)]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024),0!=r.row.state?(p(),M(k,{key:0,class:"item",effect:"dark",content:"删除",placement:"bottom"},{default:m((function(){return[g(c,{circle:"",plain:"",type:"danger",size:"small",onClick:function(t){return e.onDelete(r.$index,r.row)}},{default:m((function(){return[g(s,null,{default:m((function(){return[g(w)]})),_:1})]})),_:2},1032,["onClick"])]})),_:2},1024)):T("",!0)]})),_:1})]})),_:1},8,["data"])),[[D,e.loading]]),h("div",xe,[g(N,{"current-page":e.param.page,"page-size":e.param.limit,layout:"sizes,prev,pager,next,total","page-sizes":[5,10,20],total:e.total,background:"",onCurrentChange:e.onCurrentChange,onSizeChange:e.onSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]})),_:1}),g(V,{modelValue:e.edit_visible,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.edit_visible=r}),center:"",title:e.posted.role.roleName},{default:m((function(){return[g(R,{"current-role":e.posted,onSuccess:e.onEditSuccess},null,8,["current-role","onSuccess"])]})),_:1},8,["modelValue","title"]),g(V,{modelValue:e.add_visible,"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.add_visible=r}),title:"新增角色"},{default:m((function(){return[g(E,{onSuccess:e.onCreateSuccess},null,8,["onSuccess"])]})),_:1},8,["modelValue"])])}]]))}}}))}();
