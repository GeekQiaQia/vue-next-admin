import{a as t}from"./prosemirror-state.1b80bdaa.js";import"./prosemirror-transform.de62111a.js";var e=function(t,e){var n;this.match=t,this.handler="string"==typeof e?(n=e,function(t,e,r,a){var s=n;if(e[1]){var o=e[0].lastIndexOf(e[1]);s+=e[0].slice(o+e[1].length);var i=(r+=o)-a;i>0&&(s=e[0].slice(o-i,o)+s,r=a)}return t.tr.insertText(s,r,a)}):e};function n(e){var n=e.rules,a=new t({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,e,s,o){return r(t,e,s,o,n,a)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var e=t.state.selection.$cursor;e&&r(t,e.pos,e.pos,"",n,a)}))}}},isInputRules:!0});return a}function r(t,e,n,r,a,s){if(t.composing)return!1;var o=t.state,i=o.doc.resolve(e);if(i.parent.type.spec.code)return!1;for(var u=i.parent.textBetween(Math.max(0,i.parentOffset-500),i.parentOffset,null,"￼")+r,c=0;c<a.length;c++){var f=a[c].match.exec(u),l=f&&a[c].handler(o,f,e-(f[0].length-r.length),n);if(l)return t.dispatch(l.setMeta(s,{transform:l,from:e,to:n,text:r})),!0}return!1}new e(/--$/,"—"),new e(/\.\.\.$/,"…"),new e(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new e(/"$/,"”"),new e(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new e(/'$/,"’");export{e as I,n as i};
