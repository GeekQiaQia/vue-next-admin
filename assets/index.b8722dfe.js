var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,d=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&d(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&d(e,t,a[t]);return e},n=(e,l)=>a(e,t(l));import{_ as u}from"./lodash.4c220a29.js";import{r as i}from"./index.9d041c96.js";import{r as p,d as c,k as _,e as m,c as b,s as v,q as f,m as y,v as k,I as w,y as j,i as g,g as V,F as h,t as x,n as O,bn as S,p as U,f as C}from"./vendor.b380b2be.js";const I={class:"task-table"},M={key:1},N={key:1},P={key:1},z=w("保存"),T=w("编辑"),L=w("删除");var $=c({props:{data:null,status:null},setup:e=>(a,t)=>{const l=_("el-input"),o=_("el-table-column"),s=_("el-tag"),d=_("el-button"),r=_("el-popconfirm"),n=_("el-table");return m(),b("div",I,[v(n,{data:e.data,style:{width:"100%"}},{default:f((()=>[v(o,{prop:"taskName",label:"任务名称"},{default:f((e=>[e.row.edit?(m(),y(l,{key:0,modelValue:e.row.taskName,"onUpdate:modelValue":a=>e.row.taskName=a},null,8,["modelValue","onUpdate:modelValue"])):(m(),b("span",M,k(e.row.taskName),1))])),_:1}),v(o,{prop:"developTime",label:"开发工时"},{default:f((e=>[e.row.edit?(m(),y(l,{key:0,modelValue:e.row.developTime,"onUpdate:modelValue":a=>e.row.developTime=a},null,8,["modelValue","onUpdate:modelValue"])):(m(),b("span",N,k(e.row.developTime),1))])),_:1}),v(o,{prop:"developMember",label:"开发人"},{default:f((e=>[e.row.edit?(m(),y(l,{key:0,modelValue:e.row.developMember,"onUpdate:modelValue":a=>e.row.developMember=a},null,8,["modelValue","onUpdate:modelValue"])):(m(),b("span",P,k(e.row.developMember),1))])),_:1}),v(o,{prop:"taskStatus",label:"任务状态"},{default:f((a=>{var t;return[a.row.edit?(m(),y(l,{key:0,modelValue:a.row.taskStatus,"onUpdate:modelValue":e=>a.row.taskStatus=e},null,8,["modelValue","onUpdate:modelValue"])):(m(),y(s,{key:1,type:null==(t=e.status.get(`${a.row.taskStatus}`))?void 0:t.type},{default:f((()=>{var t;return[w(k(null==(t=e.status.get(`${a.row.taskStatus}`))?void 0:t.text),1)]})),_:2},1032,["type"]))]})),_:1}),v(o,{label:"操作",width:"200"},{default:f((e=>[e.row.edit?(m(),y(d,{key:0,size:"mini",type:"success",icon:"el-icon-check",onClick:a=>(e.$index,void e.row)},{default:f((()=>[z])),_:2},1032,["onClick"])):(m(),y(d,{key:1,size:"mini",icon:"el-icon-edit",onClick:t[0]||(t[0]=e=>{var a,t;console.log(a,t)})},{default:f((()=>[T])),_:1})),v(r,{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该条记录吗？",onConfirm:t[1]||(t[1]=e=>{})},{reference:f((()=>[v(d,{size:"mini",icon:"el-icon-delete",type:"danger"},{default:f((()=>[L])),_:1})])),_:1})])),_:1})])),_:1},8,["data"])])}});$.__scopeId="data-v-49018695";const q=e=>(U("data-v-05843526"),e=e(),C(),e),B={class:"board"},D={class:"board__info"},E=w("项目看板"),F=q((()=>V("span",null,"项目看板主要应用场景：项目的任务管理，任务进度管理等。",-1))),A={class:"board__project"},G=q((()=>V("div",{class:"board__project-title"},"项目概览",-1))),H={class:"board__project-list"},J=["onClick"],K={class:"board__detail"},Q=q((()=>V("div",{class:"board__detail-title"},"项目详情",-1))),R={key:0,class:"board__detail-empty"},W={key:1,class:"board__detail-content"},X={class:"board__detail-head"},Y=q((()=>V("span",{class:"board__detail-name"},"项目名称",-1))),Z=q((()=>V("span",{class:"board__detail-name"},"负责人",-1))),ee=q((()=>V("span",{class:"board__detail-name"},"开发工时",-1))),ae=q((()=>V("span",{class:"board__detail-name"},"项目状态",-1))),te=q((()=>V("span",{class:"board__detail-name"},"任务总数",-1))),le=q((()=>V("span",{class:"board__detail-name"},"任务进度",-1))),oe=w("： "),se={class:"board__detail-search"},de=w("查询"),re={class:"board__detail-table"};var ne=c({setup(e){const a=j({taskStatus:"",developMember:""}),t=new Map([["1",{text:"准备阶段",type:"info"}],["2",{text:"开发中",type:""}],["3",{text:"开发完成",type:"success"}],["4",{text:"测试阶段",type:"danger"}],["5",{text:"待发布",type:"warning"}]]),l=p({}),{getProjectInfo:o,data:s}=(()=>{const e=p([]);return{data:e,getProjectInfo:function(){return i({url:"/api/project/list",method:"get",json:!0}).then((a=>{0===a.status&&(e.value=a.data)}))}}})();o();const d=g((()=>u.map(l.value.taskList,(e=>n(r({},e),{edit:!1})))));function c(e){const a=u.countBy(e,(e=>e.taskStatus));return u.map(Object.entries(a),(([e,a])=>{const l=t.get(e);return n(r({},l),{count:a})}))}function U(){console.log("search!")}return(e,o)=>{const r=_("el-divider"),n=_("el-avatar"),u=_("el-col"),i=_("el-row"),p=_("el-card"),j=_("el-tag"),g=_("el-input"),C=_("el-form-item"),I=_("el-option"),M=_("el-select"),N=_("el-button"),P=_("el-form");return m(),b("div",B,[V("div",D,[v(r,{"content-position":"left"},{default:f((()=>[E])),_:1}),F]),V("div",A,[G,V("div",H,[(m(!0),b(h,null,x(S(s),((e,a)=>(m(),b("div",{key:a,class:O(["board__project-item",{"board__project-item--active":l.value.projectId===e.projectId}]),onClick:a=>{return t=e,void(l.value=t);var t}},[v(p,null,{default:f((()=>[v(i,null,{default:f((()=>[v(u,{span:5},{default:f((()=>[v(n,{class:"board__project-avatar",size:90},{default:f((()=>[w(k(e.projectName.substr(0,1)),1)])),_:2},1024)])),_:2},1024),v(u,{span:18,style:{"margin-left":"6px",color:"#7a848d"}},{default:f((()=>[V("p",null,"项目名称："+k(e.projectName),1),V("p",null,"总负责人："+k(e.principal),1),V("p",null,"开发耗时："+k(e.timeConsuming),1),V("p",null,"项目状态: "+k(e.status),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)],10,J)))),128))])]),V("div",K,[Q,v(p,{class:"board__detail-wrap"},{default:f((()=>[l.value.projectId?(m(),b("div",W,[V("div",X,[v(i,null,{default:f((()=>[v(u,{span:5},{default:f((()=>[Y,w("："+k(l.value.projectName),1)])),_:1}),v(u,{span:5},{default:f((()=>[Z,w("："+k(l.value.principal),1)])),_:1}),v(u,{span:5},{default:f((()=>[ee,w("："+k(l.value.timeConsuming),1)])),_:1}),v(u,{span:5},{default:f((()=>[ae,w("："+k(l.value.status),1)])),_:1})])),_:1}),v(i,{class:"board__detail-task"},{default:f((()=>[v(u,{span:5},{default:f((()=>[te,w("："+k(l.value.taskList.length),1)])),_:1}),v(u,{span:18},{default:f((()=>[le,oe,(m(!0),b(h,null,x(c(l.value.taskList),((e,a)=>(m(),y(j,{key:a,class:"board__detail-tag",type:e.type},{default:f((()=>[w(k(e.text)+": "+k(e.count),1)])),_:2},1032,["type"])))),128))])),_:1})])),_:1})]),v(r),V("div",se,[v(P,{inline:!0,model:S(a)},{default:f((()=>[v(C,{label:"开发人"},{default:f((()=>[v(g,{modelValue:S(a).developMember,"onUpdate:modelValue":o[0]||(o[0]=e=>S(a).developMember=e),placeholder:"请输入开发人"},null,8,["modelValue"])])),_:1}),v(C,{label:"任务状态"},{default:f((()=>[v(M,{modelValue:S(a).taskStatus,"onUpdate:modelValue":o[1]||(o[1]=e=>S(a).taskStatus=e),placeholder:"选择任务状态"},{default:f((()=>[v(I,{label:"准备阶段",value:1}),v(I,{label:"开发中",value:2}),v(I,{label:"开发完成",value:3}),v(I,{label:"测试阶段",value:4}),v(I,{label:"待发布",value:5})])),_:1},8,["modelValue"])])),_:1}),v(C,null,{default:f((()=>[v(N,{type:"primary",onClick:U},{default:f((()=>[de])),_:1})])),_:1})])),_:1},8,["model"])]),V("div",re,[v($,{data:S(d),status:S(t)},null,8,["data","status"])])])):(m(),b("div",R,"请选择项目，查看项目详情！！！"))])),_:1})])])}}});ne.__scopeId="data-v-05843526";export{ne as default};
