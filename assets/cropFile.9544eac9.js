import{_ as e}from"./vue-cropperjs.b8623041.js";import"./cropperjs.231dfb32.js";import{E as t}from"./element-plus.c35c14b5.js";import{a7 as a,k as l,aJ as o,aB as s,Z as c,_ as r,a5 as n,b4 as p,br as i,aE as d,aC as v}from"./@vue.9dcf4325.js";import"./vue.1f809ab3.js";import"./lodash.a533b6d4.js";import"./resize-observer-polyfill.af5c5caa.js";import"./@popperjs.b42a2641.js";import"./dayjs.80b0a338.js";import"./mitt.06a3009f.js";import"./async-validator.9224cb80.js";import"./normalize-wheel.1d574cd1.js";var h=a({name:"Crop",components:{VueCropper:e},setup(){const e=l(),a=l(),o=l("https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81de421e98cc45dab6d8fcc87aef7f08~tplv-k3u1fbpfcp-watermark.image"),s=l(""),c=l(),r=l(),n=l(),p=(e,t)=>{const a=(e=>{var t,a;const l=e.split(","),o=null==(a=null==(t=l[0])?void 0:t.match(/:(.*?);/))?void 0:a[1],s=atob(l[1]);let c=s.length;const r=new Uint8Array(c);for(;c--;)r[c]=s.charCodeAt(c);return new Blob([r],{type:o})})(e);((e,t="What's the fuvk")=>{const a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("download",t),a.setAttribute("target","_blank");const l=document.createEvent("MouseEvents");l.initEvent("click",!0,!0),a.dispatchEvent(l)})(URL.createObjectURL(a),t)};return{filElem:a,openFile:()=>{a.value.dispatchEvent(new MouseEvent("click"))},chooseImage:()=>{const l=a.value.files[0];if(console.log(l),l){if(!/(gif|png|jpg|jpeg)$/i.test(l.type))return t({message:"上传头像图片只能是gif|png|jpg|jpeg 格式!",type:"warning"}),!1;const a=new FileReader;return a.readAsDataURL(l),a.onload=t=>{var a,l,s;o.value=null!=(l=null==(a=null==t?void 0:t.target)?void 0:a.result)?l:"",e.value.replace(null==(s=null==t?void 0:t.target)?void 0:s.result)},!0}return!1},cropper:e,cropShotImg:c,imgSrc:o,cropImage:()=>{console.log("cropImage"),s.value=e.value.getCroppedCanvas().toDataURL()},cropImageMove:()=>{s.value=e.value.getCroppedCanvas().toDataURL(),console.log("cropImageMove")},cropImageZoom:()=>{console.log("cropImageZoom")},cropImageReady:()=>{console.log("cropImageReady")},handleRotate:t=>{e.value.rotate(t)},handleFlipY:()=>{const t=r.value;let a=t.getAttribute("data-scale");a=a?-a:-1,e.value.scaleY(a),t.setAttribute("data-scale",a),e.value.rotate()},handleFlipX:()=>{const t=n.value;let a=t.getAttribute("data-scale");a=a?-a:-1,e.value.scaleX(a),t.setAttribute("data-scale",a),e.value.rotate()},handleReset:()=>{e.value.reset()},handleShot:()=>{c.value=e.value.getCroppedCanvas().toDataURL(),console.log(c.value)},flipY:r,flipX:n,handleZoom:t=>{e.value.relativeZoom(t)},handleSave:()=>{console.log("cropImg.value",s.value),p(s.value,"cropImg")}}}});const g=e=>(d("data-v-336d1d2f"),e=e(),v(),e),m={class:"cropWrapper"},u={class:"operation-bar"},f={class:"bar"},w=g((()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",class:"_2Xy1u button-icon"},[r("path",{d:"M15.6 13.3l1.9-.7c0-.1-1.2-3.2-4.2-3.2-2 0-3.1 1.3-3.7 2.3-.7-.2-1.8-.2-2.6.3-1 .6-1.4 1.8-1.4 3.4h2c0-.5.1-1.4.5-1.7.5-.3 1.3-.1 1.7.1l1 .5.3-1.1s.6-1.8 2.2-1.8c1.6.1 2.2 1.9 2.3 1.9z"}),r("circle",{cx:"8.5",cy:"8",r:"1.5"}),r("path",{d:"M21.5 16.5h-3v-3h-2v3h-3v2h3v3h2v-3h3z"}),r("path",{d:"M4.5 4.5h14v8h2v-8c0-1.1-.9-2-2-2h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2h-8v-14z"})],-1))),b=[g((()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"2",class:""},[r("rect",{width:"12",height:"2",x:"6",y:"11","fill-rule":"evenodd",rx:"1",transform:"translate(-6 -11)"})],-1)))],C=[g((()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",class:""},[r("path",{"fill-rule":"evenodd",d:"M5 5V1a1 1 0 0 1 2 0v4h4a1 1 0 0 1 0 2H7v4a1 1 0 0 1-2 0V7H1a1 1 0 0 1 0-2h4z"})],-1)))],j=[g((()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",class:""},[r("path",{"fill-rule":"evenodd",d:"M14 6V0l-2.05 2.05a7 7 0 1 0 0 9.9l-1.416-1.416A4.988 4.988 0 0 1 7 12c-2.757 0-5-2.243-5-5s2.243-5 5-5c1.378 0 2.628.561 3.534 1.466L8 6h6z"})],-1)))],I=[g((()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",class:""},[r("path",{"fill-rule":"evenodd",d:"M0 6V0l2.05 2.05C3.611.488 5.907-.338 8.375.131c2.741.521 4.955 2.723 5.488 5.463A7.007 7.007 0 0 1 7 14a6.974 6.974 0 0 1-4.95-2.05l1.416-1.416a4.995 4.995 0 0 0 4.379 1.396c1.983-.326 3.627-1.883 4.041-3.85A5.01 5.01 0 0 0 7 2a4.988 4.988 0 0 0-3.534 1.466L6 6H0z"})],-1)))],y=[g((()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",class:""},[r("path",{"fill-rule":"evenodd",d:"M7 0l4 4H3l4-4zM3 10h8l-4 4-4-4zM0 8V6h14v2H0z"})],-1)))],k=[g((()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"14",class:""},[r("path",{"fill-rule":"evenodd",d:"M0 6.999l4-4v8L0 7zM10.184 11V3l4 4-4 4zm-4.185 3V0H8v14H5.999z"})],-1)))],x={class:"cropperAll"},R={class:"cropContainer"},M={class:"preview-area"},z=g((()=>r("div",{class:"tip"},"预览",-1))),A=g((()=>r("div",{class:"preview"},null,-1))),_={class:"cropped-image"},S=g((()=>r("div",{class:"tip"},"快照",-1))),E=["src"],Z={key:1,class:"crop-placeholder"};h.render=function(e,t,a,l,d,v){const h=o("el-tooltip"),g=o("VueCropper");return s(),c("div",m,[r("div",u,[r("div",f,[n(h,{content:"打开",placement:"left-end",effect:"light"},{default:p((()=>[r("div",{class:"operator",onClick:t[1]||(t[1]=(...t)=>e.openFile&&e.openFile(...t))},[w,r("input",{ref:"filElem",style:{display:"none"},type:"file",accept:"image/*",class:"upload-file",onChange:t[0]||(t[0]=(...t)=>e.chooseImage&&e.chooseImage(...t))},null,544)])])),_:1}),r("div",{class:"text",onClick:t[2]||(t[2]=i(((...t)=>e.handleSave&&e.handleSave(...t)),["prevent"]))},"保存"),r("div",{class:"text",onClick:t[3]||(t[3]=i(((...t)=>e.handleReset&&e.handleReset(...t)),["prevent"]))},"重做"),r("div",{class:"text",onClick:t[4]||(t[4]=i(((...t)=>e.handleShot&&e.handleShot(...t)),["prevent"]))},"快照"),n(h,{content:"缩小",placement:"top",effect:"light"},{default:p((()=>[r("div",{class:"operator",onClick:t[5]||(t[5]=i((t=>e.handleZoom(-.2)),["prevent"]))},b)])),_:1}),n(h,{content:"放大",placement:"top",effect:"light"},{default:p((()=>[r("div",{class:"operator",onClick:t[6]||(t[6]=i((t=>e.handleZoom(.2)),["prevent"]))},C)])),_:1}),n(h,{content:"正向旋转+90",placement:"top",effect:"light"},{default:p((()=>[r("div",{class:"text",onClick:t[7]||(t[7]=t=>e.handleRotate(90))},j)])),_:1}),n(h,{content:"反向旋转-90",placement:"top",effect:"light"},{default:p((()=>[r("div",{class:"text",onClick:t[8]||(t[8]=t=>e.handleRotate(-90))},I)])),_:1}),n(h,{content:"上下翻转",placement:"top",effect:"light"},{default:p((()=>[r("div",{ref:"flipY",class:"text",onClick:t[9]||(t[9]=t=>e.handleFlipY())},y,512)])),_:1}),n(h,{content:"左右翻转",placement:"top",effect:"light"},{default:p((()=>[r("div",{ref:"flipX",class:"text",onClick:t[10]||(t[10]=t=>e.handleFlipX())},k,512)])),_:1})])]),r("div",x,[r("div",R,[n(g,{ref:"cropper","aspect-ratio":16/9,src:e.imgSrc,preview:".preview",alt:"Source Image",onReady:e.cropImageReady,onZoom:e.cropImageZoom,onCropmove:e.cropImageMove,onCrop:e.cropImage},null,8,["src","onReady","onZoom","onCropmove","onCrop"])]),r("section",M,[z,A,r("div",_,[S,e.cropShotImg?(s(),c("img",{key:0,src:e.cropShotImg,alt:"Cropped Image"},null,8,E)):(s(),c("div",Z))])])])])},h.__scopeId="data-v-336d1d2f";export{h as default};
