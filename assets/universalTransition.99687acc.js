import{_ as B,g as Aa,h as Ma,B as Ta,r as ma,t as Sa,j as Ia,A as ir,m as Pa,k as Vr,l as Da,C as na,S as ia,n as La,o as Ca,p as Y,q as oa,s as Ea,v as $,w as J,x as C,y as Nr,z as Or,D as Ra,E as Z,F as wa,G as mr,H as yr,R as _a,L as tr,I as U,J as b,K as Ga,M as ka,Z as Wa,N as ba,O as Va,P as or,Q as Na,T as Oa,U as xr,V as Ba,u as qa,W as Ha,X as Br,Y as Ua,$ as $a,a0 as Za,a1 as vr,a2 as va,a3 as Ka,a4 as F,a5 as Sr,a6 as Fa,a7 as Qa,a8 as Xa,a9 as ar,aa as ja,ab as Ir,ac as z,ad as cr,ae as qr,af as fr,ag as Ja,ah as Ya,ai as za,aj as Hr}from"./installCanvasRenderer.8d905dcd.js";var rt=function(a){B(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(t,e,i,n,l){var o=i.axis;o.dim==="angle"&&(this.animationThreshold=Math.PI/18);var v=o.polar,s=v.getOtherAxis(o),d=s.getExtent(),u=o.dataToCoord(e),c=n.get("type");if(c&&c!=="none"){var f=Aa(n),p=tt[c](o,v,u,d);p.style=f,t.graphicKey=p.type,t.pointer=p}var h=n.get(["label","margin"]),g=at(e,i,n,v,h);Ma(t,i,n,l,g)},r}(Ta);function at(a,r,t,e,i){var n=r.axis,l=n.dataToCoord(a),o=e.getAngleAxis().getExtent()[0];o=o/180*Math.PI;var v=e.getRadiusAxis().getExtent(),s,d,u;if(n.dim==="radius"){var c=Da();ma(c,c,o),Sa(c,c,[e.cx,e.cy]),s=Ia([l,-i],c);var f=r.getModel("axisLabel").get("rotate")||0,p=ir.innerTextLayout(o,f*Math.PI/180,-1);d=p.textAlign,u=p.textVerticalAlign}else{var h=v[1];s=e.coordToPoint([h+i,l]);var g=e.cx,y=e.cy;d=Math.abs(s[0]-g)/h<.3?"center":s[0]>g?"left":"right",u=Math.abs(s[1]-y)/h<.3?"middle":s[1]>y?"top":"bottom"}return{position:s,align:d,verticalAlign:u}}var tt={line:function(a,r,t,e){return a.dim==="angle"?{type:"Line",shape:Pa(r.coordToPoint([e[0],t]),r.coordToPoint([e[1],t]))}:{type:"Circle",shape:{cx:r.cx,cy:r.cy,r:t}}},shadow:function(a,r,t,e){var i=Math.max(1,a.getBandWidth()),n=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:Vr(r.cx,r.cy,e[0],e[1],(-t-i/2)*n,(-t+i/2)*n)}:{type:"Sector",shape:Vr(r.cx,r.cy,t-i/2,t+i/2,0,Math.PI*2)}}},et=rt,nt=function(a){B(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.findAxisModel=function(t){var e,i=this.ecModel;return i.eachComponent(t,function(n){n.getCoordSysModel()===this&&(e=n)},this),e},r.type="polar",r.dependencies=["radiusAxis","angleAxis"],r.defaultOption={z:0,center:["50%","50%"],radius:"80%"},r}(na),it=nt,Pr=function(a){B(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",ia).models[0]},r.type="polarAxis",r}(na);La(Pr,Ca);var ot=function(a){B(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="angleAxis",r}(Pr),vt=function(a){B(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="radiusAxis",r}(Pr),Dr=function(a){B(r,a);function r(t,e){return a.call(this,"radius",t,e)||this}return r.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)[this.dim==="radius"?0:1]},r}(Y);Dr.prototype.dataToRadius=Y.prototype.dataToCoord;Dr.prototype.radiusToData=Y.prototype.coordToData;var st=Dr,lt=oa(),Lr=function(a){B(r,a);function r(t,e){return a.call(this,"angle",t,e||[0,360])||this}return r.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)[this.dim==="radius"?0:1]},r.prototype.calculateCategoryInterval=function(){var t=this,e=t.getLabelModel(),i=t.scale,n=i.getExtent(),l=i.count();if(n[1]-n[0]<1)return 0;var o=n[0],v=t.dataToCoord(o+1)-t.dataToCoord(o),s=Math.abs(v),d=Ea(o==null?"":o+"",e.getFont(),"center","top"),u=Math.max(d.height,7),c=u/s;isNaN(c)&&(c=1/0);var f=Math.max(0,Math.floor(c)),p=lt(t.model),h=p.lastAutoInterval,g=p.lastTickCount;return h!=null&&g!=null&&Math.abs(h-f)<=1&&Math.abs(g-l)<=1&&h>f?f=h:(p.lastTickCount=l,p.lastAutoInterval=f),f},r}(Y);Lr.prototype.dataToAngle=Y.prototype.dataToCoord;Lr.prototype.angleToData=Y.prototype.coordToData;var dt=Lr,sa=["radius","angle"],ut=function(){function a(r){this.dimensions=sa,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new st,this._angleAxis=new dt,this.axisPointerEnabled=!0,this.name=r||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(r){var t=this.pointToCoord(r);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},a.prototype.containData=function(r){return this._radiusAxis.containData(r[0])&&this._angleAxis.containData(r[1])},a.prototype.getAxis=function(r){var t="_"+r+"Axis";return this[t]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(r){var t=[],e=this._angleAxis,i=this._radiusAxis;return e.scale.type===r&&t.push(e),i.scale.type===r&&t.push(i),t},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(r){var t=this._angleAxis;return r===t?this._radiusAxis:t},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(r){var t=r!=null&&r!=="auto"?this.getAxis(r):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},a.prototype.dataToPoint=function(r,t){return this.coordToPoint([this._radiusAxis.dataToRadius(r[0],t),this._angleAxis.dataToAngle(r[1],t)])},a.prototype.pointToData=function(r,t){var e=this.pointToCoord(r);return[this._radiusAxis.radiusToData(e[0],t),this._angleAxis.angleToData(e[1],t)]},a.prototype.pointToCoord=function(r){var t=r[0]-this.cx,e=r[1]-this.cy,i=this.getAngleAxis(),n=i.getExtent(),l=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);i.inverse?l=o-360:o=l+360;var v=Math.sqrt(t*t+e*e);t/=v,e/=v;for(var s=Math.atan2(-e,t)/Math.PI*180,d=s<l?1:-1;s<l||s>o;)s+=d*360;return[v,s]},a.prototype.coordToPoint=function(r){var t=r[0],e=r[1]/180*Math.PI,i=Math.cos(e)*t+this.cx,n=-Math.sin(e)*t+this.cy;return[i,n]},a.prototype.getArea=function(){var r=this.getAngleAxis(),t=this.getRadiusAxis(),e=t.getExtent().slice();e[0]>e[1]&&e.reverse();var i=r.getExtent(),n=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-i[0]*n,endAngle:-i[1]*n,clockwise:r.inverse,contain:function(l,o){var v=l-this.cx,s=o-this.cy,d=v*v+s*s-1e-4,u=this.r,c=this.r0;return d<=u*u&&d>=c*c}}},a.prototype.convertToPixel=function(r,t,e){var i=Ur(t);return i===this?this.dataToPoint(e):null},a.prototype.convertFromPixel=function(r,t,e){var i=Ur(t);return i===this?this.pointToData(e):null},a}();function Ur(a){var r=a.seriesModel,t=a.polarModel;return t&&t.coordinateSystem||r&&r.coordinateSystem}var ct=ut;function ft(a,r,t){var e=r.get("center"),i=t.getWidth(),n=t.getHeight();a.cx=$(e[0],i),a.cy=$(e[1],n);var l=a.getRadiusAxis(),o=Math.min(i,n)/2,v=r.get("radius");v==null?v=[0,"100%"]:J(v)||(v=[0,v]);var s=[$(v[0],o),$(v[1],o)];l.inverse?l.setExtent(s[1],s[0]):l.setExtent(s[0],s[1])}function ht(a,r){var t=this,e=t.getAngleAxis(),i=t.getRadiusAxis();if(e.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),a.eachSeries(function(o){if(o.coordinateSystem===t){var v=o.getData();C(Nr(v,"radius"),function(s){i.scale.unionExtentFromData(v,s)}),C(Nr(v,"angle"),function(s){e.scale.unionExtentFromData(v,s)})}}),Or(e.scale,e.model),Or(i.scale,i.model),e.type==="category"&&!e.onBand){var n=e.getExtent(),l=360/e.scale.count();e.inverse?n[1]+=l:n[1]-=l,e.setExtent(n[0],n[1])}}function gt(a){return a.mainType==="angleAxis"}function $r(a,r){if(a.type=r.get("type"),a.scale=Ra(r),a.onBand=r.get("boundaryGap")&&a.type==="category",a.inverse=r.get("inverse"),gt(r)){a.inverse=a.inverse!==r.get("clockwise");var t=r.get("startAngle");a.setExtent(t,t+(a.inverse?-360:360))}r.axis=a,a.model=r}var pt={dimensions:sa,create:function(a,r){var t=[];return a.eachComponent("polar",function(e,i){var n=new ct(i+"");n.update=ht;var l=n.getRadiusAxis(),o=n.getAngleAxis(),v=e.findAxisModel("radiusAxis"),s=e.findAxisModel("angleAxis");$r(l,v),$r(o,s),ft(n,e,r),t.push(n),e.coordinateSystem=n,n.model=e}),a.eachSeries(function(e){if(e.get("coordinateSystem")==="polar"){var i=e.getReferringComponents("polar",ia).models[0];e.coordinateSystem=i.coordinateSystem}}),t}},yt=pt,xt=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function er(a,r,t){r[1]>r[0]&&(r=r.slice().reverse());var e=a.coordToPoint([r[0],t]),i=a.coordToPoint([r[1],t]);return{x1:e[0],y1:e[1],x2:i[0],y2:i[1]}}function nr(a){var r=a.getRadiusAxis();return r.inverse?0:1}function Zr(a){var r=a[0],t=a[a.length-1];r&&t&&Math.abs(Math.abs(r.coord-t.coord)-360)<1e-4&&a.pop()}var At=function(a){B(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.axisPointerClass="PolarAxisPointer",t}return r.prototype.render=function(t,e){if(this.group.removeAll(),!!t.get("show")){var i=t.axis,n=i.polar,l=n.getRadiusAxis().getExtent(),o=i.getTicksCoords(),v=i.getMinorTicksCoords(),s=Z(i.getViewLabels(),function(d){d=wa(d);var u=i.scale,c=u.type==="ordinal"?u.getRawOrdinalNumber(d.tickValue):d.tickValue;return d.coord=i.dataToCoord(c),d});Zr(s),Zr(o),C(xt,function(d){t.get([d,"show"])&&(!i.scale.isBlank()||d==="axisLine")&&Mt[d](this.group,t,n,o,v,l,s)},this)}},r.type="angleAxis",r}(mr),Mt={axisLine:function(a,r,t,e,i,n){var l=r.getModel(["axisLine","lineStyle"]),o=nr(t),v=o?0:1,s;n[v]===0?s=new yr({shape:{cx:t.cx,cy:t.cy,r:n[o]},style:l.getLineStyle(),z2:1,silent:!0}):s=new _a({shape:{cx:t.cx,cy:t.cy,r:n[o],r0:n[v]},style:l.getLineStyle(),z2:1,silent:!0}),s.style.fill=null,a.add(s)},axisTick:function(a,r,t,e,i,n){var l=r.getModel("axisTick"),o=(l.get("inside")?-1:1)*l.get("length"),v=n[nr(t)],s=Z(e,function(d){return new tr({shape:er(t,[v,v+o],d.coord)})});a.add(U(s,{style:b(l.getModel("lineStyle").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,r,t,e,i,n){if(!!i.length){for(var l=r.getModel("axisTick"),o=r.getModel("minorTick"),v=(l.get("inside")?-1:1)*o.get("length"),s=n[nr(t)],d=[],u=0;u<i.length;u++)for(var c=0;c<i[u].length;c++)d.push(new tr({shape:er(t,[s,s+v],i[u][c].coord)}));a.add(U(d,{style:b(o.getModel("lineStyle").getLineStyle(),b(l.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,r,t,e,i,n,l){var o=r.getCategories(!0),v=r.getModel("axisLabel"),s=v.get("margin"),d=r.get("triggerEvent");C(l,function(u,c){var f=v,p=u.tickValue,h=n[nr(t)],g=t.coordToPoint([h+s,u.coord]),y=t.cx,M=t.cy,x=Math.abs(g[0]-y)/h<.3?"center":g[0]>y?"left":"right",S=Math.abs(g[1]-M)/h<.3?"middle":g[1]>M?"top":"bottom";if(o&&o[p]){var m=o[p];Ga(m)&&m.textStyle&&(f=new ka(m.textStyle,v,v.ecModel))}var A=new Wa({silent:ir.isLabelSilent(r),style:ba(f,{x:g[0],y:g[1],fill:f.getTextColor()||r.get(["axisLine","lineStyle","color"]),text:u.formattedLabel,align:x,verticalAlign:S})});if(a.add(A),d){var T=ir.makeAxisEventDataBase(r);T.targetType="axisLabel",T.value=u.rawLabel,Va(A).eventData=T}},this)},splitLine:function(a,r,t,e,i,n){var l=r.getModel("splitLine"),o=l.getModel("lineStyle"),v=o.get("color"),s=0;v=v instanceof Array?v:[v];for(var d=[],u=0;u<e.length;u++){var c=s++%v.length;d[c]=d[c]||[],d[c].push(new tr({shape:er(t,n,e[u].coord)}))}for(var u=0;u<d.length;u++)a.add(U(d[u],{style:b({stroke:v[u%v.length]},o.getLineStyle()),silent:!0,z:r.get("z")}))},minorSplitLine:function(a,r,t,e,i,n){if(!!i.length){for(var l=r.getModel("minorSplitLine"),o=l.getModel("lineStyle"),v=[],s=0;s<i.length;s++)for(var d=0;d<i[s].length;d++)v.push(new tr({shape:er(t,n,i[s][d].coord)}));a.add(U(v,{style:o.getLineStyle(),silent:!0,z:r.get("z")}))}},splitArea:function(a,r,t,e,i,n){if(!!e.length){var l=r.getModel("splitArea"),o=l.getModel("areaStyle"),v=o.get("color"),s=0;v=v instanceof Array?v:[v];for(var d=[],u=Math.PI/180,c=-e[0].coord*u,f=Math.min(n[0],n[1]),p=Math.max(n[0],n[1]),h=r.get("clockwise"),g=1,y=e.length;g<=y;g++){var M=g===y?e[0].coord:e[g].coord,x=s++%v.length;d[x]=d[x]||[],d[x].push(new or({shape:{cx:t.cx,cy:t.cy,r0:f,r:p,startAngle:c,endAngle:-M*u,clockwise:h},silent:!0})),c=-M*u}for(var g=0;g<d.length;g++)a.add(U(d[g],{style:b({fill:v[g%v.length]},o.getAreaStyle()),silent:!0}))}}},Tt=At,mt=["axisLine","axisTickLabel","axisName"],St=["splitLine","splitArea","minorSplitLine"],It=function(a){B(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.axisPointerClass="PolarAxisPointer",t}return r.prototype.render=function(t,e){if(this.group.removeAll(),!!t.get("show")){var i=this._axisGroup,n=this._axisGroup=new Na;this.group.add(n);var l=t.axis,o=l.polar,v=o.getAngleAxis(),s=l.getTicksCoords(),d=l.getMinorTicksCoords(),u=v.getExtent()[0],c=l.getExtent(),f=Dt(o,t,u),p=new ir(t,f);C(mt,p.add,p),n.add(p.getGroup()),Oa(i,n,t),C(St,function(h){t.get([h,"show"])&&!l.scale.isBlank()&&Pt[h](this.group,t,o,u,c,s,d)},this)}},r.type="radiusAxis",r}(mr),Pt={splitLine:function(a,r,t,e,i,n){var l=r.getModel("splitLine"),o=l.getModel("lineStyle"),v=o.get("color"),s=0;v=v instanceof Array?v:[v];for(var d=[],u=0;u<n.length;u++){var c=s++%v.length;d[c]=d[c]||[],d[c].push(new yr({shape:{cx:t.cx,cy:t.cy,r:n[u].coord}}))}for(var u=0;u<d.length;u++)a.add(U(d[u],{style:b({stroke:v[u%v.length],fill:null},o.getLineStyle()),silent:!0}))},minorSplitLine:function(a,r,t,e,i,n,l){if(!!l.length){for(var o=r.getModel("minorSplitLine"),v=o.getModel("lineStyle"),s=[],d=0;d<l.length;d++)for(var u=0;u<l[d].length;u++)s.push(new yr({shape:{cx:t.cx,cy:t.cy,r:l[d][u].coord}}));a.add(U(s,{style:b({fill:null},v.getLineStyle()),silent:!0}))}},splitArea:function(a,r,t,e,i,n){if(!!n.length){var l=r.getModel("splitArea"),o=l.getModel("areaStyle"),v=o.get("color"),s=0;v=v instanceof Array?v:[v];for(var d=[],u=n[0].coord,c=1;c<n.length;c++){var f=s++%v.length;d[f]=d[f]||[],d[f].push(new or({shape:{cx:t.cx,cy:t.cy,r0:u,r:n[c].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),u=n[c].coord}for(var c=0;c<d.length;c++)a.add(U(d[c],{style:b({fill:v[c%v.length]},o.getAreaStyle()),silent:!0}))}}};function Dt(a,r,t){return{position:[a.cx,a.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}var Lt=It;function la(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function da(a,r){return r.dim+a.model.componentIndex}function Ct(a,r,t){var e={},i=Et(xr(r.getSeriesByType(a),function(n){return!r.isSeriesFiltered(n)&&n.coordinateSystem&&n.coordinateSystem.type==="polar"}));r.eachSeriesByType(a,function(n){if(n.coordinateSystem.type==="polar"){var l=n.getData(),o=n.coordinateSystem,v=o.getBaseAxis(),s=da(o,v),d=la(n),u=i[s][d],c=u.offset,f=u.width,p=o.getOtherAxis(v),h=n.coordinateSystem.cx,g=n.coordinateSystem.cy,y=n.get("barMinHeight")||0,M=n.get("barMinAngle")||0;e[d]=e[d]||[];for(var x=l.mapDimension(p.dim),S=l.mapDimension(v.dim),m=Ba(l,x),A=v.dim!=="radius"||!n.get("roundCap",!0),T=p.dataToCoord(0),I=0,P=l.count();I<P;I++){var D=l.get(x,I),R=l.get(S,I),W=D>=0?"p":"n",E=T;m&&(e[d][R]||(e[d][R]={p:T,n:T}),E=e[d][R][W]);var w=void 0,_=void 0,L=void 0,G=void 0;if(p.dim==="radius"){var k=p.dataToCoord(D)-T,V=v.dataToCoord(R);Math.abs(k)<y&&(k=(k<0?-1:1)*y),w=E,_=E+k,L=V-c,G=L-f,m&&(e[d][R][W]=_)}else{var N=p.dataToCoord(D,A)-T,q=v.dataToCoord(R);Math.abs(N)<M&&(N=(N<0?-1:1)*M),w=q+c,_=w+f,L=E,G=E+N,m&&(e[d][R][W]=G)}l.setItemLayout(I,{cx:h,cy:g,r0:w,r:_,startAngle:-L*Math.PI/180,endAngle:-G*Math.PI/180,clockwise:L>=G})}}})}function Et(a){var r={};C(a,function(e,i){var n=e.getData(),l=e.coordinateSystem,o=l.getBaseAxis(),v=da(l,o),s=o.getExtent(),d=o.type==="category"?o.getBandWidth():Math.abs(s[1]-s[0])/n.count(),u=r[v]||{bandWidth:d,remainedWidth:d,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=u.stacks;r[v]=u;var f=la(e);c[f]||u.autoWidthCount++,c[f]=c[f]||{width:0,maxWidth:0};var p=$(e.get("barWidth"),d),h=$(e.get("barMaxWidth"),d),g=e.get("barGap"),y=e.get("barCategoryGap");p&&!c[f].width&&(p=Math.min(u.remainedWidth,p),c[f].width=p,u.remainedWidth-=p),h&&(c[f].maxWidth=h),g!=null&&(u.gap=g),y!=null&&(u.categoryGap=y)});var t={};return C(r,function(e,i){t[i]={};var n=e.stacks,l=e.bandWidth,o=$(e.categoryGap,l),v=$(e.gap,1),s=e.remainedWidth,d=e.autoWidthCount,u=(s-o)/(d+(d-1)*v);u=Math.max(u,0),C(n,function(h,g){var y=h.maxWidth;y&&y<u&&(y=Math.min(y,s),h.width&&(y=Math.min(y,h.width)),s-=y,h.width=y,d--)}),u=(s-o)/(d+(d-1)*v),u=Math.max(u,0);var c=0,f;C(n,function(h,g){h.width||(h.width=u),f=h,c+=h.width*(1+v)}),f&&(c-=f.width*v);var p=-c/2;C(n,function(h,g){t[i][g]=t[i][g]||{offset:p,width:h.width},p+=h.width*(1+v)})}),t}var Rt={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},wt={splitNumber:5},_t=function(a){B(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="polar",r}($a);function ne(a){qa(Ha),mr.registerAxisPointerClass("PolarAxisPointer",et),a.registerCoordinateSystem("polar",yt),a.registerComponentModel(it),a.registerComponentView(_t),Br(a,"angle",ot,Rt),Br(a,"radius",vt,wt),a.registerComponentView(Tt),a.registerComponentView(Lt),a.registerLayout(Ua(Ct,"bar"))}var O=Za.CMD;function j(a,r){return Math.abs(a-r)<1e-5}function Ar(a){var r=a.data,t=a.len(),e=[],i,n=0,l=0,o=0,v=0;function s(E,w){i&&i.length>2&&e.push(i),i=[E,w]}function d(E,w,_,L){j(E,_)&&j(w,L)||i.push(E,w,_,L,_,L)}function u(E,w,_,L,G,k){var V=Math.abs(w-E),N=Math.tan(V/4)*4/3,q=w<E?-1:1,Er=Math.cos(E),Rr=Math.sin(E),wr=Math.cos(w),_r=Math.sin(w),ya=Er*G+_,xa=Rr*k+L,Gr=wr*G+_,kr=_r*k+L,Wr=G*N*q,br=k*N*q;i.push(ya-Wr*Rr,xa+br*Er,Gr+Wr*_r,kr-br*wr,Gr,kr)}for(var c,f,p,h,g=0;g<t;){var y=r[g++],M=g===1;switch(M&&(n=r[g],l=r[g+1],o=n,v=l,(y===O.L||y===O.C||y===O.Q)&&(i=[o,v])),y){case O.M:n=o=r[g++],l=v=r[g++],s(o,v);break;case O.L:c=r[g++],f=r[g++],d(n,l,c,f),n=c,l=f;break;case O.C:i.push(r[g++],r[g++],r[g++],r[g++],n=r[g++],l=r[g++]);break;case O.Q:c=r[g++],f=r[g++],p=r[g++],h=r[g++],i.push(n+2/3*(c-n),l+2/3*(f-l),p+2/3*(c-p),h+2/3*(f-h),p,h),n=p,l=h;break;case O.A:var x=r[g++],S=r[g++],m=r[g++],A=r[g++],T=r[g++],I=r[g++]+T;g+=1;var P=!r[g++];c=Math.cos(T)*m+x,f=Math.sin(T)*A+S,M?(o=c,v=f,s(o,v)):d(n,l,c,f),n=Math.cos(I)*m+x,l=Math.sin(I)*A+S;for(var D=(P?-1:1)*Math.PI/2,R=T;P?R>I:R<I;R+=D){var W=P?Math.max(R+D,I):Math.min(R+D,I);u(R,W,x,S,m,A)}break;case O.R:o=n=r[g++],v=l=r[g++],c=o+r[g++],f=v+r[g++],s(c,v),d(c,v,c,f),d(c,f,o,f),d(o,f,o,v),d(o,v,c,v);break;case O.Z:i&&d(n,l,o,v),n=o,l=v;break}}return i&&i.length>2&&e.push(i),e}function Mr(a,r,t,e,i,n,l,o,v,s){if(j(a,t)&&j(r,e)&&j(i,l)&&j(n,o)){v.push(l,o);return}var d=2/s,u=d*d,c=l-a,f=o-r,p=Math.sqrt(c*c+f*f);c/=p,f/=p;var h=t-a,g=e-r,y=i-l,M=n-o,x=h*h+g*g,S=y*y+M*M;if(x<u&&S<u){v.push(l,o);return}var m=c*h+f*g,A=-c*y-f*M,T=x-m*m,I=S-A*A;if(T<u&&m>=0&&I<u&&A>=0){v.push(l,o);return}var P=[],D=[];vr(a,t,i,l,.5,P),vr(r,e,n,o,.5,D),Mr(P[0],D[0],P[1],D[1],P[2],D[2],P[3],D[3],v,s),Mr(P[4],D[4],P[5],D[5],P[6],D[6],P[7],D[7],v,s)}function Gt(a,r){var t=Ar(a),e=[];r=r||1;for(var i=0;i<t.length;i++){var n=t[i],l=[],o=n[0],v=n[1];l.push(o,v);for(var s=2;s<n.length;){var d=n[s++],u=n[s++],c=n[s++],f=n[s++],p=n[s++],h=n[s++];Mr(o,v,d,u,c,f,p,h,l,r),o=p,v=h}e.push(l)}return e}function ua(a,r,t){var e=a[r],i=a[1-r],n=Math.abs(e/i),l=Math.ceil(Math.sqrt(n*t)),o=Math.floor(t/l);o===0&&(o=1,l=t);for(var v=[],s=0;s<l;s++)v.push(o);var d=l*o,u=t-d;if(u>0)for(var s=0;s<u;s++)v[s%l]+=1;return v}function Kr(a,r,t){for(var e=a.r0,i=a.r,n=a.startAngle,l=a.endAngle,o=Math.abs(l-n),v=o*i,s=i-e,d=v>Math.abs(s),u=ua([v,s],d?0:1,r),c=(d?o:s)/u.length,f=0;f<u.length;f++)for(var p=(d?s:o)/u[f],h=0;h<u[f];h++){var g={};d?(g.startAngle=n+c*f,g.endAngle=n+c*(f+1),g.r0=e+p*h,g.r=e+p*(h+1)):(g.startAngle=n+p*h,g.endAngle=n+p*(h+1),g.r0=e+c*f,g.r=e+c*(f+1)),g.clockwise=a.clockwise,g.cx=a.cx,g.cy=a.cy,t.push(g)}}function kt(a,r,t){for(var e=a.width,i=a.height,n=e>i,l=ua([e,i],n?0:1,r),o=n?"width":"height",v=n?"height":"width",s=n?"x":"y",d=n?"y":"x",u=a[o]/l.length,c=0;c<l.length;c++)for(var f=a[v]/l[c],p=0;p<l[c];p++){var h={};h[s]=c*u,h[d]=p*f,h[o]=u,h[v]=f,h.x+=a.x,h.y+=a.y,t.push(h)}}function Fr(a,r,t,e){return a*e-t*r}function Wt(a,r,t,e,i,n,l,o){var v=t-a,s=e-r,d=l-i,u=o-n,c=Fr(d,u,v,s);if(Math.abs(c)<1e-6)return null;var f=a-i,p=r-n,h=Fr(f,p,d,u)/c;return h<0||h>1?null:new F(h*v+a,h*s+r)}function bt(a,r,t){var e=new F;F.sub(e,t,r),e.normalize();var i=new F;F.sub(i,a,r);var n=i.dot(e);return n}function Q(a,r){var t=a[a.length-1];t&&t[0]===r[0]&&t[1]===r[1]||a.push(r)}function Vt(a,r,t){for(var e=a.length,i=[],n=0;n<e;n++){var l=a[n],o=a[(n+1)%e],v=Wt(l[0],l[1],o[0],o[1],r.x,r.y,t.x,t.y);v&&i.push({projPt:bt(v,r,t),pt:v,idx:n})}if(i.length<2)return[{points:a},{points:a}];i.sort(function(g,y){return g.projPt-y.projPt});var s=i[0],d=i[i.length-1];if(d.idx<s.idx){var u=s;s=d,d=u}for(var c=[s.pt.x,s.pt.y],f=[d.pt.x,d.pt.y],p=[c],h=[f],n=s.idx+1;n<=d.idx;n++)Q(p,a[n].slice());Q(p,f),Q(p,c);for(var n=d.idx+1;n<=s.idx+e;n++)Q(h,a[n%e].slice());return Q(h,c),Q(h,f),[{points:p},{points:h}]}function Qr(a){var r=a.points,t=[],e=[];va(r,t,e);var i=new Ka(t[0],t[1],e[0]-t[0],e[1]-t[1]),n=i.width,l=i.height,o=i.x,v=i.y,s=new F,d=new F;return n>l?(s.x=d.x=o+n/2,s.y=v,d.y=v+l):(s.y=d.y=v+l/2,s.x=o,d.x=o+n),Vt(r,s,d)}function sr(a,r,t,e){if(t===1)e.push(r);else{var i=Math.floor(t/2),n=a(r);sr(a,n[0],i,e),sr(a,n[1],t-i,e)}return e}function Nt(a,r){for(var t=[],e=0;e<r;e++)t.push(Sr(a));return t}function Ot(a,r){r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel}function Bt(a){for(var r=[],t=0;t<a.length;)r.push([a[t++],a[t++]]);return r}function qt(a,r){var t=[],e=a.shape,i;switch(a.type){case"rect":kt(e,r,t),i=Qa;break;case"sector":Kr(e,r,t),i=or;break;case"circle":Kr({r0:0,r:e.r,startAngle:0,endAngle:Math.PI*2,cx:e.cx,cy:e.cy},r,t),i=or;break;default:var n=a.getComputedTransform(),l=n?Math.sqrt(Math.max(n[0]*n[0]+n[1]*n[1],n[2]*n[2]+n[3]*n[3])):1,o=Z(Gt(a.getUpdatedPathProxy(),l),function(y){return Bt(y)}),v=o.length;if(v===0)sr(Qr,{points:o[0]},r,t);else if(v===r)for(var s=0;s<v;s++)t.push({points:o[s]});else{var d=0,u=Z(o,function(y){var M=[],x=[];va(y,M,x);var S=(x[1]-M[1])*(x[0]-M[0]);return d+=S,{poly:y,area:S}});u.sort(function(y,M){return M.area-y.area});for(var c=r,s=0;s<v;s++){var f=u[s];if(c<=0)break;var p=s===v-1?c:Math.ceil(f.area/d*r);p<0||(sr(Qr,{points:f.poly},p,t),c-=p)}}i=Fa;break}if(!i)return Nt(a,r);for(var h=[],s=0;s<t.length;s++){var g=new i;g.setShape(t[s]),Ot(a,g),h.push(g)}return h}function Ht(a,r){var t=a.length,e=r.length;if(t===e)return[a,r];for(var i=[],n=[],l=t<e?a:r,o=Math.min(t,e),v=Math.abs(e-t)/6,s=(o-2)/6,d=Math.ceil(v/s)+1,u=[l[0],l[1]],c=v,f=2;f<o;){var p=l[f-2],h=l[f-1],g=l[f++],y=l[f++],M=l[f++],x=l[f++],S=l[f++],m=l[f++];if(c<=0){u.push(g,y,M,x,S,m);continue}for(var A=Math.min(c,d-1)+1,T=1;T<=A;T++){var I=T/A;vr(p,g,M,S,I,i),vr(h,y,x,m,I,n),p=i[3],h=n[3],u.push(i[1],n[1],i[2],n[2],p,h),g=i[5],y=n[5],M=i[6],x=n[6]}c-=A-1}return l===a?[u,r]:[a,u]}function Xr(a,r){for(var t=a.length,e=a[t-2],i=a[t-1],n=[],l=0;l<r.length;)n[l++]=e,n[l++]=i;return n}function Ut(a,r){for(var t,e,i,n=[],l=[],o=0;o<Math.max(a.length,r.length);o++){var v=a[o],s=r[o],d=void 0,u=void 0;v?s?(t=Ht(v,s),d=t[0],u=t[1],e=d,i=u):(u=Xr(i||v,v),d=v):(d=Xr(e||s,s),u=s),n.push(d),l.push(u)}return[n,l]}function jr(a){for(var r=0,t=0,e=0,i=a.length,n=0,l=i-2;n<i;l=n,n+=2){var o=a[l],v=a[l+1],s=a[n],d=a[n+1],u=o*d-s*v;r+=u,t+=(o+s)*u,e+=(v+d)*u}return r===0?[a[0]||0,a[1]||0]:[t/r/3,e/r/3,r]}function $t(a,r,t,e){for(var i=(a.length-2)/6,n=1/0,l=0,o=a.length,v=o-2,s=0;s<i;s++){for(var d=s*6,u=0,c=0;c<o;c+=2){var f=c===0?d:(d+c-2)%v+2,p=a[f]-t[0],h=a[f+1]-t[1],g=r[c]-e[0],y=r[c+1]-e[1],M=g-p,x=y-h;u+=M*M+x*x}u<n&&(n=u,l=s)}return l}function Zt(a){for(var r=[],t=a.length,e=0;e<t;e+=2)r[e]=a[t-e-2],r[e+1]=a[t-e-1];return r}function Kt(a,r,t,e){for(var i=[],n,l=0;l<a.length;l++){var o=a[l],v=r[l],s=jr(o),d=jr(v);n==null&&(n=s[2]<0!=d[2]<0);var u=[],c=[],f=0,p=1/0,h=[],g=o.length;n&&(o=Zt(o));for(var y=$t(o,v,s,d)*6,M=g-2,x=0;x<M;x+=2){var S=(y+x)%M+2;u[x+2]=o[S]-s[0],u[x+3]=o[S+1]-s[1]}if(u[0]=o[y]-s[0],u[1]=o[y+1]-s[1],t>0)for(var m=e/t,A=-e/2;A<=e/2;A+=m){for(var T=Math.sin(A),I=Math.cos(A),P=0,x=0;x<o.length;x+=2){var D=u[x],R=u[x+1],W=v[x]-d[0],E=v[x+1]-d[1],w=W*I-E*T,_=W*T+E*I;h[x]=w,h[x+1]=_;var L=w-D,G=_-R;P+=L*L+G*G}if(P<p){p=P,f=A;for(var k=0;k<h.length;k++)c[k]=h[k]}}else for(var V=0;V<g;V+=2)c[V]=v[V]-d[0],c[V+1]=v[V+1]-d[1];i.push({from:u,to:c,fromCp:s,toCp:d,rotation:-f})}return i}function lr(a){return a.__isCombineMorphing}var ca="__mOriginal_";function dr(a,r,t){var e=ca+r,i=a[e]||a[r];a[e]||(a[e]=a[r]);var n=t.replace,l=t.after,o=t.before;a[r]=function(){var v=arguments,s;return o&&o.apply(this,v),n?s=n.apply(this,v):s=i.apply(this,v),l&&l.apply(this,v),s}}function rr(a,r){var t=ca+r;a[t]&&(a[r]=a[t],a[t]=null)}function Jr(a,r){for(var t=0;t<a.length;t++)for(var e=a[t],i=0;i<e.length;){var n=e[i],l=e[i+1];e[i++]=r[0]*n+r[2]*l+r[4],e[i++]=r[1]*n+r[3]*l+r[5]}}function fa(a,r){var t=a.getUpdatedPathProxy(),e=r.getUpdatedPathProxy(),i=Ut(Ar(t),Ar(e)),n=i[0],l=i[1],o=a.getComputedTransform(),v=r.getComputedTransform();function s(){this.transform=null}o&&Jr(n,o),v&&Jr(l,v),dr(r,"updateTransform",{replace:s}),r.transform=null;var d=Kt(n,l,10,Math.PI),u=[];dr(r,"buildPath",{replace:function(c){for(var f=r.__morphT,p=1-f,h=[],g=0;g<d.length;g++){var y=d[g],M=y.from,x=y.to,S=y.rotation*f,m=y.fromCp,A=y.toCp,T=Math.sin(S),I=Math.cos(S);Xa(h,m,A,f);for(var P=0;P<M.length;P+=2){var D=M[P],R=M[P+1],W=x[P],E=x[P+1],w=D*p+W*f,_=R*p+E*f;u[P]=w*I-_*T+h[0],u[P+1]=w*T+_*I+h[1]}var L=u[0],G=u[1];c.moveTo(L,G);for(var P=2;P<M.length;){var W=u[P++],E=u[P++],k=u[P++],V=u[P++],N=u[P++],q=u[P++];L===W&&G===E&&k===N&&V===q?c.lineTo(N,q):c.bezierCurveTo(W,E,k,V,N,q),L=N,G=q}}}})}function Cr(a,r,t){if(!a||!r)return r;var e=t.done,i=t.during;fa(a,r),r.__morphT=0;function n(){rr(r,"buildPath"),rr(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape()}return r.animateTo({__morphT:1},b({during:function(l){r.dirtyShape(),i&&i(l)},done:function(){n(),e&&e()}},t)),r}function Ft(a,r,t,e,i,n){var l=16;a=i===t?0:Math.round(32767*(a-t)/(i-t)),r=n===e?0:Math.round(32767*(r-e)/(n-e));for(var o=0,v,s=(1<<l)/2;s>0;s/=2){var d=0,u=0;(a&s)>0&&(d=1),(r&s)>0&&(u=1),o+=s*s*(3*d^u),u===0&&(d===1&&(a=s-1-a,r=s-1-r),v=a,a=r,r=v)}return o}function ur(a){var r=1/0,t=1/0,e=-1/0,i=-1/0,n=Z(a,function(o){var v=o.getBoundingRect(),s=o.getComputedTransform(),d=v.x+v.width/2+(s?s[4]:0),u=v.y+v.height/2+(s?s[5]:0);return r=Math.min(d,r),t=Math.min(u,t),e=Math.max(d,e),i=Math.max(u,i),[d,u]}),l=Z(n,function(o,v){return{cp:o,z:Ft(o[0],o[1],r,t,e,i),path:a[v]}});return l.sort(function(o,v){return o.z-v.z}).map(function(o){return o.path})}function ha(a){return qt(a.path,a.count)}function Tr(){return{fromIndividuals:[],toIndividuals:[],count:0}}function Qt(a,r,t){var e=[];function i(m){for(var A=0;A<m.length;A++){var T=m[A];lr(T)?i(T.childrenRef()):T instanceof ar&&e.push(T)}}i(a);var n=e.length;if(!n)return Tr();var l=t.dividePath||ha,o=l({path:r,count:n});if(o.length!==n)return console.error("Invalid morphing: unmatched splitted path"),Tr();e=ur(e),o=ur(o);for(var v=t.done,s=t.during,d=t.individualDelay,u=new ja,c=0;c<n;c++){var f=e[c],p=o[c];p.parent=r,p.copyTransform(u),d||fa(f,p)}r.__isCombineMorphing=!0,r.childrenRef=function(){return o};function h(m){for(var A=0;A<o.length;A++)o[A].addSelfToZr(m)}dr(r,"addSelfToZr",{after:function(m){h(m)}}),dr(r,"removeSelfFromZr",{after:function(m){for(var A=0;A<o.length;A++)o[A].removeSelfFromZr(m)}});function g(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,rr(r,"addSelfToZr"),rr(r,"removeSelfFromZr")}var y=o.length;if(d)for(var M=y,x=function(){M--,M===0&&(g(),v&&v())},c=0;c<y;c++){var S=d?b({delay:(t.delay||0)+d(c,y,e[c],o[c]),done:x},t):t;Cr(e[c],o[c],S)}else r.__morphT=0,r.animateTo({__morphT:1},b({during:function(m){for(var A=0;A<y;A++){var T=o[A];T.__morphT=r.__morphT,T.dirtyShape()}s&&s(m)},done:function(){g();for(var m=0;m<a.length;m++)rr(a[m],"updateTransform");v&&v()}},t));return r.__zr&&h(r.__zr),{fromIndividuals:e,toIndividuals:o,count:y}}function Xt(a,r,t){var e=r.length,i=[],n=t.dividePath||ha;function l(f){for(var p=0;p<f.length;p++){var h=f[p];lr(h)?l(h.childrenRef()):h instanceof ar&&i.push(h)}}if(lr(a)){l(a.childrenRef());var o=i.length;if(o<e)for(var v=0,s=o;s<e;s++)i.push(Sr(i[v++%o]));i.length=e}else{i=n({path:a,count:e});for(var d=a.getComputedTransform(),s=0;s<i.length;s++)i[s].setLocalTransform(d);if(i.length!==e)return console.error("Invalid morphing: unmatched splitted path"),Tr()}i=ur(i),r=ur(r);for(var u=t.individualDelay,s=0;s<e;s++){var c=u?b({delay:(t.delay||0)+u(s,e,i[s],r[s])},t):t;Cr(i[s],r[s],c)}return{fromIndividuals:i,toIndividuals:r,count:r.length}}function Yr(a){return J(a[0])}function zr(a,r){for(var t=[],e=a.length,i=0;i<e;i++)t.push({one:a[i],many:[]});for(var i=0;i<r.length;i++){var n=r[i].length,l=void 0;for(l=0;l<n;l++)t[l%e].many.push(r[i][l])}for(var o=0,i=e-1;i>=0;i--)if(!t[i].many.length){var v=t[o].many;if(v.length<=1)if(o)o=0;else return t;var n=v.length,s=Math.ceil(n/2);t[i].many=v.slice(s,n),t[o].many=v.slice(0,s),o++}return t}var jt={clone:function(a){for(var r=[],t=1-Math.pow(1-a.path.style.opacity,1/a.count),e=0;e<a.count;e++){var i=Sr(a.path);i.setStyle("opacity",t),r.push(i)}return r},split:null};function hr(a,r,t,e,i,n){if(!a.length||!r.length)return;var l=Ir("update",e,i);if(!(l&&l.duration>0))return;var o=e.getModel("universalTransition").get("delay"),v=Object.assign({setToFinal:!0},l),s,d;Yr(a)&&(s=a,d=r),Yr(r)&&(s=r,d=a);function u(y,M,x,S,m){var A=y.many,T=y.one;if(A.length===1&&!m){var I=M?A[0]:T,P=M?T:A[0];if(lr(I))u({many:[I],one:P},!0,x,S,!0);else{var D=o?b({delay:o(x,S)},v):v;Cr(I,P,D),n(I,P,I,P,D)}}else for(var R=b({dividePath:jt[t],individualDelay:o&&function(G,k,V,N){return o(G+x,S)}},v),W=M?Qt(A,T,R):Xt(T,A,R),E=W.fromIndividuals,w=W.toIndividuals,_=E.length,L=0;L<_;L++){var D=o?b({delay:o(L,_)},v):v;n(E[L],w[L],M?A[L]:y.one,M?y.one:A[L],D)}}for(var c=s?s===a:a.length>r.length,f=s?zr(d,s):zr(c?r:a,[c?a:r]),p=0,h=0;h<f.length;h++)p+=f[h].many.length;for(var g=0,h=0;h<f.length;h++)u(f[h],c,g,p),g+=f[h].many.length}function K(a){if(!a)return[];if(J(a)){for(var r=[],t=0;t<a.length;t++)r.push(K(a[t]));return r}var e=[];return a.traverse(function(i){i instanceof ar&&!i.disableMorphing&&!i.invisible&&!i.ignore&&e.push(i)}),e}var ga=1e4,Jt=oa();function Yt(a){for(var r=a.dimensions,t=0;t<r.length;t++){var e=a.getDimensionInfo(r[t]);if(e&&e.otherDims.itemGroupId===0)return r[t]}}function ra(a){var r=[];return C(a,function(t){var e=t.data;if(!(e.count()>ga))for(var i=e.getIndices(),n=Yt(e),l=0;l<i.length;l++)r.push({data:e,dim:t.dim||n,divide:t.divide,dataIndex:l})}),r}function gr(a,r,t){a.traverse(function(e){e instanceof ar&&Ja(e,{style:{opacity:0}},r,{dataIndex:t,isFrom:!0})})}function pr(a){if(a.parent){var r=a.getComputedTransform();a.setLocalTransform(r),a.parent.remove(a)}}function X(a){a.stopAnimation(),a.isGroup&&a.traverse(function(r){r.stopAnimation()})}function zt(a,r,t){var e=Ir("update",t,r);e&&a.traverse(function(i){if(i instanceof Ya){var n=za(i);n&&i.animateFrom({style:n},e)}})}function re(a,r){var t=a.length;if(t!==r.length)return!1;for(var e=0;e<t;e++){var i=a[e],n=r[e];if(i.data.getId(i.dataIndex)!==n.data.getId(n.dataIndex))return!1}return!0}function pa(a,r,t){var e=ra(a),i=ra(r);function n(y,M,x,S,m){(x||y)&&M.animateFrom({style:x&&x!==y?Hr(Hr({},x.style),y.style):y.style},m)}function l(y){for(var M=0;M<y.length;M++)if(y[M].dim)return y[M].dim}var o=l(e),v=l(i),s=!1;function d(y,M){return function(x){var S=x.data,m=x.dataIndex;if(M)return S.getId(m);var A=S.hostModel&&S.hostModel.get("dataGroupId"),T=y?o||v:v||o,I=T&&S.getDimensionInfo(T),P=I&&I.ordinalMeta;if(I){var D=S.get(I.name,m);return P&&P.categories[D]||D+""}var R=S.getRawDataItem(m);return R&&R.groupId?R.groupId+"":A||S.getId(m)}}var u=re(e,i),c={};if(!u)for(var f=0;f<i.length;f++){var p=i[f],h=p.data.getItemGraphicEl(p.dataIndex);h&&(c[h.id]=!0)}function g(y,M){var x=e[M],S=i[y],m=S.data.hostModel,A=x.data.getItemGraphicEl(x.dataIndex),T=S.data.getItemGraphicEl(S.dataIndex);if(A===T){T&&zt(T,S.dataIndex,m);return}A&&c[A.id]||T&&(X(T),A?(X(A),pr(A),s=!0,hr(K(A),K(T),S.divide,m,y,n)):gr(T,m,y))}new qr(e,i,d(!0,u),d(!1,u),null,"multiple").update(g).updateManyToOne(function(y,M){var x=i[y],S=x.data,m=S.hostModel,A=S.getItemGraphicEl(x.dataIndex),T=xr(Z(M,function(I){return e[I].data.getItemGraphicEl(e[I].dataIndex)}),function(I){return I&&I!==A&&!c[I.id]});A&&(X(A),T.length?(C(T,function(I){X(I),pr(I)}),s=!0,hr(K(T),K(A),x.divide,m,y,n)):gr(A,m,x.dataIndex))}).updateOneToMany(function(y,M){var x=e[M],S=x.data.getItemGraphicEl(x.dataIndex);if(!(S&&c[S.id])){var m=xr(Z(y,function(T){return i[T].data.getItemGraphicEl(i[T].dataIndex)}),function(T){return T&&T!==S}),A=i[y[0]].data.hostModel;m.length&&(C(m,function(T){return X(T)}),S?(X(S),pr(S),s=!0,hr(K(S),K(m),x.divide,A,y[0],n)):C(m,function(T){return gr(T,A,y[0])}))}}).updateManyToMany(function(y,M){new qr(M,y,function(x){return e[x].data.getId(e[x].dataIndex)},function(x){return i[x].data.getId(i[x].dataIndex)}).update(function(x,S){g(y[x],M[S])}).execute()}).execute(),s&&C(r,function(y){var M=y.data,x=M.hostModel,S=x&&t.getViewOfSeriesModel(x),m=Ir("update",x,0);S&&x.isAnimationEnabled()&&m&&m.duration>0&&S.group.traverse(function(A){A instanceof ar&&!A.animators.length&&A.animateFrom({style:{opacity:0}},m)})})}function aa(a){var r=a.getModel("universalTransition").get("seriesKey");return r||a.id}function ta(a){return J(a)?a.sort().join(","):a}function H(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function ae(a,r){var t=fr(),e=fr(),i=fr();return C(a.oldSeries,function(n,l){var o=a.oldData[l],v=aa(n),s=ta(v);e.set(s,o),J(v)&&C(v,function(d){i.set(d,{data:o,key:s})})}),C(r.updatedSeries,function(n){if(n.isUniversalTransitionEnabled()&&n.isAnimationEnabled()){var l=n.getData(),o=aa(n),v=ta(o),s=e.get(v);if(s)t.set(v,{oldSeries:[{divide:H(s),data:s}],newSeries:[{divide:H(l),data:l}]});else if(J(o)){var d=[];C(o,function(f){var p=e.get(f);p&&d.push({divide:H(p),data:p})}),d.length&&t.set(v,{oldSeries:d,newSeries:[{data:l,divide:H(l)}]})}else{var u=i.get(o);if(u){var c=t.get(u.key);c||(c={oldSeries:[{data:u.data,divide:H(u.data)}],newSeries:[]},t.set(u.key,c)),c.newSeries.push({data:l,divide:H(l)})}}}}),t}function ea(a,r){for(var t=0;t<a.length;t++){var e=r.seriesIndex!=null&&r.seriesIndex===a[t].seriesIndex||r.seriesId!=null&&r.seriesId===a[t].id;if(e)return t}}function te(a,r,t,e){var i=[],n=[];C(z(a.from),function(l){var o=ea(r.oldSeries,l);o>=0&&i.push({data:r.oldData[o],divide:H(r.oldData[o]),dim:l.dimension})}),C(z(a.to),function(l){var o=ea(t.updatedSeries,l);if(o>=0){var v=t.updatedSeries[o].getData();n.push({data:v,divide:H(v),dim:l.dimension})}}),i.length>0&&n.length>0&&pa(i,n,e)}function ie(a){a.registerUpdateLifecycle("series:beforeupdate",function(r,t,e){C(z(e.seriesTransition),function(i){C(z(i.to),function(n){for(var l=e.updatedSeries,o=0;o<l.length;o++)(n.seriesIndex!=null&&n.seriesIndex===l[o].seriesIndex||n.seriesId!=null&&n.seriesId===l[o].id)&&(l[o][cr]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(r,t,e){var i=Jt(t);if(i.oldSeries&&e.updatedSeries&&e.optionChanged){var n=e.seriesTransition;if(n)C(z(n),function(c){te(c,i,e,t)});else{var l=ae(i,e);C(l.keys(),function(c){var f=l.get(c);pa(f.oldSeries,f.newSeries,t)})}C(e.updatedSeries,function(c){c[cr]&&(c[cr]=!1)})}for(var o=r.getSeries(),v=i.oldSeries=[],s=i.oldData=[],d=0;d<o.length;d++){var u=o[d].getData();u.count()<ga&&(v.push(o[d]),s.push(u))}})}export{ie as a,ne as i};
