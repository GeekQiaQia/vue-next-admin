System.register(["./installCanvasRenderer-legacy.8c9c1aa6.js"],(function(e){"use strict";var t,n,o,i,a,r,s,l,u,d,h,c,p,g,f,v,m,y,x,b,_,M,w,S,A,C,T,L,I,D,O,k,R,P,z,E,B,V,Z,N,W,H,G,Y,X,U,F,j,q,K,$,J,Q,ee,te,ne,oe,ie,ae,re,se,le,ue,de,he,ce,pe,ge,fe,ve,me,ye,xe,be,_e,Me,we,Se,Ae,Ce,Te,Le,Ie,De,Oe,ke,Re,Pe,ze,Ee,Be,Ve,Ze,Ne,We,He,Ge,Ye,Xe,Ue,Fe,je,qe,Ke,$e,Je,Qe,et,tt,nt,ot;return{setters:[function(e){t=e.a0,n=e.a4,o=e.al,i=e.am,a=e.an,r=e.J,s=e.ao,l=e.ap,u=e.a9,d=e.aq,h=e.a8,c=e.ar,p=e.as,g=e.at,f=e.q,v=e.a3,m=e.au,y=e.av,x=e.O,b=e.v,_=e.aw,M=e.U,w=e.ax,S=e.ay,A=e.az,C=e.x,T=e.aA,L=e.aB,I=e.ag,D=e.aC,O=e.aD,k=e.aE,R=e.aa,P=e.aF,z=e.aG,E=e._,B=e.aH,V=e.F,Z=e.aI,N=e.aJ,W=e.aK,H=e.aL,G=e.Q,Y=e.aM,X=e.E,U=e.ae,F=e.a6,j=e.Y,q=e.a7,K=e.aN,$=e.aO,J=e.aP,Q=e.af,ee=e.aQ,te=e.S,ne=e.C,oe=e.$,ie=e.aR,ae=e.aS,re=e.aT,se=e.aU,le=e.aV,ue=e.M,de=e.aW,he=e.aX,ce=e.aY,pe=e.aZ,ge=e.Z,fe=e.a_,ve=e.a$,me=e.b0,ye=e.s,xe=e.b1,be=e.b2,_e=e.b3,Me=e.aj,we=e.K,Se=e.w,Ae=e.b4,Ce=e.b5,Te=e.b6,Le=e.u,Ie=e.N,De=e.b7,Oe=e.b8,ke=e.b9,Re=e.ba,Pe=e.bb,ze=e.bc,Ee=e.bd,Be=e.be,Ve=e.bf,Ze=e.j,Ne=e.bg,We=e.bh,He=e.bi,Ge=e.bj,Ye=e.bk,Xe=e.bl,Ue=e.bm,Fe=e.bn,je=e.P,qe=e.bo,Ke=e.bp,$e=e.bq,Je=e.br,Qe=e.bs,et=e.bt,tt=e.bu,nt=e.bv,ot=e.bw}],execute:function(){e({a:function(e){Le(bi),Le(Oi)},b:function(e){e.registerComponentModel(mo),e.registerComponentView(xo),go("saveAsImage",_o),go("magicType",Co),go("dataView",Po),go("dataZoom",ii),go("restore",Zo),Le(ho)},c:function(e){e.registerChartView(Ui),e.registerSeriesModel($i),ot("pie",e.registerAction),e.registerLayout(j(Ei,"pie")),e.registerProcessor(Bi("pie")),e.registerProcessor({seriesType:"pie",reset:function(e,t){var n=e.getData();n.filterSelf((function(e){var t=n.mapDimension("value"),o=n.get(t,e);return!(Ne(o)&&!isNaN(o)&&o<0)}))}})},d:function(e){e.registerUpdateLifecycle("series:beforeupdate",(function(e,t,n){var o=Bt(t).labelManager;o||(o=Bt(t).labelManager=new Et),o.clearLabels()})),e.registerUpdateLifecycle("series:layoutlabels",(function(e,t,n){var o=Bt(t).labelManager;n.updatedSeries.forEach((function(e){o.addLabelsOfSeries(t.getViewOfSeriesModel(e))})),o.updateLayoutConfig(t),o.layout(t),o.processLabelsOverall()}))},e:Wn,f:Nn,h:Fi,i:function(e){e.registerComponentModel(ai),e.registerComponentView(ri)},j:Bi,k:Ct,l:Tt,m:Zn,n:Gi,o:Ft,p:bi,q:Oi,r:go,s:jt});var it=2*Math.PI,at=t.CMD,rt=["top","right","bottom","left"];function st(e,t,n,o,i){var a=n.width,r=n.height;switch(e){case"top":o.set(n.x+a/2,n.y-t),i.set(0,-1);break;case"bottom":o.set(n.x+a/2,n.y+r+t),i.set(0,1);break;case"left":o.set(n.x-t,n.y+r/2),i.set(-1,0);break;case"right":o.set(n.x+a+t,n.y+r/2),i.set(1,0)}}function lt(e,t,n,o,i,a,r,s,l){r-=e,s-=t;var u=Math.sqrt(r*r+s*s),d=(r/=u)*n+e,h=(s/=u)*n+t;if(Math.abs(o-i)%it<1e-4)return l[0]=d,l[1]=h,u-n;if(a){var c=o;o=g(i),i=g(c)}else o=g(o),i=g(i);o>i&&(i+=it);var p=Math.atan2(s,r);if(p<0&&(p+=it),p>=o&&p<=i||p+it>=o&&p+it<=i)return l[0]=d,l[1]=h,u-n;var f=n*Math.cos(o)+e,v=n*Math.sin(o)+t,m=n*Math.cos(i)+e,y=n*Math.sin(i)+t,x=(f-r)*(f-r)+(v-s)*(v-s),b=(m-r)*(m-r)+(y-s)*(y-s);return x<b?(l[0]=f,l[1]=v,Math.sqrt(x)):(l[0]=m,l[1]=y,Math.sqrt(b))}function ut(e,t,n,o,i,a,r,s){var l=i-e,u=a-t,d=n-e,h=o-t,c=Math.sqrt(d*d+h*h),p=(l*(d/=c)+u*(h/=c))/c;s&&(p=Math.min(Math.max(p,0),1)),p*=c;var g=r[0]=e+p*d,f=r[1]=t+p*h;return Math.sqrt((g-i)*(g-i)+(f-a)*(f-a))}function dt(e,t,n,o,i,a,r){n<0&&(e+=n,n=-n),o<0&&(t+=o,o=-o);var s=e+n,l=t+o,u=r[0]=Math.min(Math.max(i,e),s),d=r[1]=Math.min(Math.max(a,t),l);return Math.sqrt((u-i)*(u-i)+(d-a)*(d-a))}var ht=[];function ct(e,t,n){var o=dt(t.x,t.y,t.width,t.height,e.x,e.y,ht);return n.set(ht[0],ht[1]),o}function pt(e,t,n){for(var o,i,a=0,r=0,s=0,l=0,u=1/0,d=t.data,h=e.x,g=e.y,f=0;f<d.length;){var v=d[f++];1===f&&(s=a=d[f],l=r=d[f+1]);var m=u;switch(v){case at.M:a=s=d[f++],r=l=d[f++];break;case at.L:m=ut(a,r,d[f],d[f+1],h,g,ht,!0),a=d[f++],r=d[f++];break;case at.C:m=p(a,r,d[f++],d[f++],d[f++],d[f++],d[f],d[f+1],h,g,ht),a=d[f++],r=d[f++];break;case at.Q:m=c(a,r,d[f++],d[f++],d[f],d[f+1],h,g,ht),a=d[f++],r=d[f++];break;case at.A:var y=d[f++],x=d[f++],b=d[f++],_=d[f++],M=d[f++],w=d[f++];f+=1;var S=!!(1-d[f++]);o=Math.cos(M)*b+y,i=Math.sin(M)*_+x,f<=1&&(s=o,l=i),m=lt(y,x,_,M,M+w,S,(h-y)*_/b+y,g,ht),a=Math.cos(M+w)*b+y,r=Math.sin(M+w)*_+x;break;case at.R:m=dt(s=a=d[f++],l=r=d[f++],d[f++],d[f++],h,g,ht);break;case at.Z:m=ut(a,r,s,l,h,g,ht,!0),a=s,r=l}m<u&&(u=m,n.set(ht[0],ht[1]))}return u}var gt=new n,ft=new n,vt=new n,mt=new n,yt=new n;function xt(e,t){if(e){var o=e.getTextGuideLine(),i=e.getTextContent();if(i&&o){var a=e.textGuideLineConfig||{},r=[[0,0],[0,0],[0,0]],s=a.candidates||rt,d=i.getBoundingRect().clone();d.applyTransform(i.getComputedTransform());var h=1/0,c=a.anchor,p=e.getComputedTransform(),g=p&&l([],p),f=t.get("length2")||0;c&&vt.copy(c);for(var v=0;v<s.length;v++){st(s[v],0,d,gt,mt),n.scaleAndAdd(ft,gt,mt,f),ft.transform(g);var m=e.getBoundingRect(),y=c?c.distance(ft):e instanceof u?pt(ft,e.path,vt):ct(ft,m,vt);y<h&&(h=y,ft.transform(p),vt.transform(p),vt.toArray(r[0]),ft.toArray(r[1]),gt.toArray(r[2]))}Mt(r,t.get("minTurnAngle")),o.setShape({points:r})}}}var bt=[],_t=new n;function Mt(e,t){if(t<=180&&t>0){t=t/180*Math.PI,gt.fromArray(e[0]),ft.fromArray(e[1]),vt.fromArray(e[2]),n.sub(mt,gt,ft),n.sub(yt,vt,ft);var o=mt.len(),i=yt.len();if(!(o<.001||i<.001)){mt.scale(1/o),yt.scale(1/i);var a=mt.dot(yt);if(Math.cos(t)<a){var r=ut(ft.x,ft.y,vt.x,vt.y,gt.x,gt.y,bt,!1);_t.fromArray(bt),_t.scaleAndAdd(yt,r/Math.tan(Math.PI-t));var s=vt.x!==ft.x?(_t.x-ft.x)/(vt.x-ft.x):(_t.y-ft.y)/(vt.y-ft.y);if(isNaN(s))return;s<0?n.copy(_t,ft):s>1&&n.copy(_t,vt),_t.toArray(e[1])}}}}function wt(e,t,o){if(o<=180&&o>0){o=o/180*Math.PI,gt.fromArray(e[0]),ft.fromArray(e[1]),vt.fromArray(e[2]),n.sub(mt,ft,gt),n.sub(yt,vt,ft);var i=mt.len(),a=yt.len();if(!(i<.001||a<.001)&&(mt.scale(1/i),yt.scale(1/a),mt.dot(t)<Math.cos(o))){var r=ut(ft.x,ft.y,vt.x,vt.y,gt.x,gt.y,bt,!1);_t.fromArray(bt);var s=Math.PI/2,l=s+Math.acos(yt.dot(t))-o;if(l>=s)n.copy(_t,vt);else{_t.scaleAndAdd(yt,r/Math.tan(Math.PI/2-l));var u=vt.x!==ft.x?(_t.x-ft.x)/(vt.x-ft.x):(_t.y-ft.y)/(vt.y-ft.y);if(isNaN(u))return;u<0?n.copy(_t,ft):u>1&&n.copy(_t,vt)}_t.toArray(e[1])}}}function St(e,t,n,o){var i="normal"===n,a=i?e:e.ensureState(n);a.ignore=t;var r=o.get("smooth");r&&!0===r&&(r=.3),a.shape=a.shape||{},r>0&&(a.shape.smooth=r);var s=o.getModel("lineStyle").getLineStyle();i?e.useStyle(s):a.style=s}function At(e,t){var n=t.smooth,o=t.points;if(o)if(e.moveTo(o[0][0],o[0][1]),n>0&&o.length>=3){var i=d(o[0],o[1]),a=d(o[1],o[2]);if(!i||!a)return e.lineTo(o[1][0],o[1][1]),void e.lineTo(o[2][0],o[2][1]);var r=Math.min(i,a)*n,s=h([],o[1],o[0],r/i),l=h([],o[1],o[2],r/a),u=h([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],o[2][0],o[2][1])}else for(var c=1;c<o.length;c++)e.lineTo(o[c][0],o[c][1])}function Ct(e,t,n){var s=e.getTextGuideLine(),l=e.getTextContent();if(l){for(var u=t.normal,d=u.get("show"),h=l.ignore,c=0;c<o.length;c++){var p=o[c],g=t[p],f="normal"===p;if(g){var v=g.get("show");if((f?h:i(l.states[p]&&l.states[p].ignore,h))||!i(v,d)){var m=f?s:s&&s.states.normal;m&&(m.ignore=!0);continue}s||(s=new a,e.setTextGuideLine(s),f||!h&&d||St(s,!0,"normal",t.normal),e.stateProxy&&(s.stateProxy=e.stateProxy)),St(s,!1,p,g)}}if(s){r(s.style,n),s.style.fill=null;var y=u.get("showAbove");(e.textGuideLineConfig=e.textGuideLineConfig||{}).showAbove=y||!1,s.buildPath=At}}else s&&e.removeTextGuideLine()}function Tt(e,t){t=t||"labelLine";for(var n={normal:e.getModel(t)},o=0;o<s.length;o++){var i=s[o];n[i]=e.getModel([i,t])}return n}function Lt(e){if(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice());return t}}function It(e,t){var n=e.label,o=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:Lt(o&&o.shape.points)}}var Dt=["align","verticalAlign","width","height","fontSize"],Ot=new R,kt=f(),Rt=f();function Pt(e,t,n){for(var o=0;o<n.length;o++){var i=n[o];null!=t[i]&&(e[i]=t[i])}}var zt=["x","y","rotation"],Et=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(e,t,n,o,i){var a=o.style,r=o.__hostTarget.textConfig||{},s=o.getComputedTransform(),l=o.getBoundingRect().plain();v.applyTransform(l,l,s),s?Ot.setLocalTransform(s):(Ot.x=Ot.y=Ot.rotation=Ot.originX=Ot.originY=0,Ot.scaleX=Ot.scaleY=1);var u,d=o.__hostTarget;if(d){u=d.getBoundingRect().plain();var h=d.getComputedTransform();v.applyTransform(u,u,h)}var c=u&&d.getTextGuideLine();this._labelList.push({label:o,labelLine:c,seriesModel:n,dataIndex:e,dataType:t,layoutOption:i,computedLayoutOption:null,rect:l,hostRect:u,priority:u?u.width*u.height:0,defaultAttr:{ignore:o.ignore,labelGuideIgnore:c&&c.ignore,x:Ot.x,y:Ot.y,scaleX:Ot.scaleX,scaleY:Ot.scaleY,rotation:Ot.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:o.cursor,attachedPos:r.position,attachedRot:r.rotation}})},e.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var n=e.__model,o=n.get("labelLayout");(m(o)||y(o).length)&&e.group.traverse((function(e){if(e.ignore)return!0;var i=e.getTextContent(),a=x(e);i&&!i.disableLabelLayout&&t._addLabel(a.dataIndex,a.dataType,n,i,o)}))},e.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),n=e.getHeight();function o(e,t){return function(){xt(e,t)}}for(var i=0;i<this._labelList.length;i++){var a=this._labelList[i],r=a.label,s=r.__hostTarget,l=a.defaultAttr,u=void 0;u=(u=m(a.layoutOption)?a.layoutOption(It(a,s)):a.layoutOption)||{},a.computedLayoutOption=u;var d=Math.PI/180;s&&s.setTextConfig({local:!1,position:null!=u.x||null!=u.y?null:l.attachedPos,rotation:null!=u.rotate?u.rotate*d:l.attachedRot,offset:[u.dx||0,u.dy||0]});var h=!1;if(null!=u.x?(r.x=b(u.x,t),r.setStyle("x",0),h=!0):(r.x=l.x,r.setStyle("x",l.style.x)),null!=u.y?(r.y=b(u.y,n),r.setStyle("y",0),h=!0):(r.y=l.y,r.setStyle("y",l.style.y)),u.labelLinePoints){var c=s.getTextGuideLine();c&&(c.setShape({points:u.labelLinePoints}),h=!1)}kt(r).needsUpdateLabelLine=h,r.rotation=null!=u.rotate?u.rotate*d:l.rotation,r.scaleX=l.scaleX,r.scaleY=l.scaleY;for(var p=0;p<Dt.length;p++){var g=Dt[p];r.setStyle(g,null!=u[g]?u[g]:l.style[g])}if(u.draggable){if(r.draggable=!0,r.cursor="move",s){var f=a.seriesModel;null!=a.dataIndex&&(f=a.seriesModel.getData(a.dataType).getItemModel(a.dataIndex)),r.on("drag",o(s,f.getModel("labelLine")))}}else r.off("drag"),r.cursor=l.cursor}},e.prototype.layout=function(e){var t=e.getWidth(),n=e.getHeight(),o=_(this._labelList),i=M(o,(function(e){return"shiftX"===e.layoutOption.moveOverlap})),a=M(o,(function(e){return"shiftY"===e.layoutOption.moveOverlap}));w(i,0,t),S(a,0,n);var r=M(o,(function(e){return e.layoutOption.hideOverlap}));A(r)},e.prototype.processLabelsOverall=function(){var e=this;C(this._chartViewList,(function(t){var n=t.__model,o=t.ignoreLabelLineUpdate,i=n.isAnimationEnabled();t.group.traverse((function(t){if(t.ignore&&!t.forceLabelAnimation)return!0;var a=!o,r=t.getTextContent();!a&&r&&(a=kt(r).needsUpdateLabelLine),a&&e._updateLabelLine(t,n),i&&e._animateLabels(t,n)}))}))},e.prototype._updateLabelLine=function(e,t){var n=e.getTextContent(),o=x(e),i=o.dataIndex;if(n&&null!=i){var a=t.getData(o.dataType),r=a.getItemModel(i),s={},l=a.getItemVisual(i,"style"),u=a.getVisual("drawType");s.stroke=l[u];var d=r.getModel("labelLine");Ct(e,Tt(r),s),xt(e,d)}},e.prototype._animateLabels=function(e,t){var n=e.getTextContent(),o=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!T(e))){var a=(g=kt(n)).oldLayout,r=x(e),s=r.dataIndex,l={x:n.x,y:n.y,rotation:n.rotation},u=t.getData(r.dataType);if(a){n.attr(a);var d=e.prevStates;d&&(D(d,"select")>=0&&n.attr(g.oldLayoutSelect),D(d,"emphasis")>=0&&n.attr(g.oldLayoutEmphasis)),O(n,l,t,s)}else if(n.attr(l),!L(n).valueAnimation){var h=i(n.style.opacity,1);n.style.opacity=0,I(n,{style:{opacity:h}},t,s)}if(g.oldLayout=l,n.states.select){var c=g.oldLayoutSelect={};Pt(c,l,zt),Pt(c,n.states.select,zt)}if(n.states.emphasis){var p=g.oldLayoutEmphasis={};Pt(p,l,zt),Pt(p,n.states.emphasis,zt)}k(n,s,u,t,t)}if(o&&!o.ignore&&!o.invisible){a=(g=Rt(o)).oldLayout;var g,f={points:o.shape.points};a?(o.attr({shape:a}),O(o,{shape:f},t)):(o.setShape(f),o.style.strokePercent=0,I(o,{style:{strokePercent:1}},t)),g.oldLayout=f}},e}(),Bt=f(),Vt="\0_ec_interaction_mutex";function Zt(e,t){return!!Nt(e)[t]}function Nt(e){return e[Vt]||(e[Vt]={})}P({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},z);var Wt=function(e){function t(t){var n=e.call(this)||this;n._zr=t;var o=B(n._mousedownHandler,n),i=B(n._mousemoveHandler,n),a=B(n._mouseupHandler,n),s=B(n._mousewheelHandler,n),l=B(n._pinchHandler,n);return n.enable=function(e,n){this.disable(),this._opt=r(V(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",o),t.on("mousemove",i),t.on("mouseup",a)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",s),t.on("pinch",l))},n.disable=function(){t.off("mousedown",o),t.off("mousemove",i),t.off("mouseup",a),t.off("mousewheel",s),t.off("pinch",l)},n}return E(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!(Z(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&Yt("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!Zt(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,o=this._x,i=this._y,a=t-o,r=n-i;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&W(e.event),Gt(this,"pan","moveOnMouseMove",e,{dx:a,dy:r,oldX:o,oldY:i,newX:t,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){Z(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=Yt("zoomOnMouseWheel",e,this._opt),n=Yt("moveOnMouseWheel",e,this._opt),o=e.wheelDelta,i=Math.abs(o),a=e.offsetX,r=e.offsetY;if(0!==o&&(t||n)){if(t){var s=i>3?1.4:i>1?1.2:1.1;Ht(this,"zoom","zoomOnMouseWheel",e,{scale:o>0?s:1/s,originX:a,originY:r,isAvailableBehavior:null})}if(n){var l=Math.abs(o);Ht(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(o>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:r,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){Zt(this._zr,"globalPan")||Ht(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(H);function Ht(e,t,n,o,i){e.pointerChecker&&e.pointerChecker(o,i.originX,i.originY)&&(W(o.event),Gt(e,t,n,o,i))}function Gt(e,t,n,o,i){i.isAvailableBehavior=B(Yt,null,n,o),e.trigger(t,i)}function Yt(e,t,n){var o=n[e];return!e||o&&(!N(o)||t.event[o+"Key"])}var Xt=e("R",Wt),Ut={axisPointer:1,tooltip:1,brush:1};function Ft(e,t,n){var o=t.getComponentByElement(e.topTarget),i=o&&o.coordinateSystem;return o&&o!==n&&!Ut.hasOwnProperty(o.mainType)&&i&&i.model!==n}function jt(e,t,n,o,i,a){e=e||0;var r=n[1]-n[0];if(null!=i&&(i=Kt(i,[0,r])),null!=a&&(a=Math.max(a,null!=i?i:0)),"all"===o){var s=Math.abs(t[1]-t[0]);s=Kt(s,[0,r]),i=a=Kt(s,[i,a]),o=0}t[0]=Kt(t[0],n),t[1]=Kt(t[1],n);var l=qt(t,o);t[o]+=e;var u,d=i||0,h=n.slice();return l.sign<0?h[0]+=d:h[1]-=d,t[o]=Kt(t[o],h),u=qt(t,o),null!=i&&(u.sign!==l.sign||u.span<i)&&(t[1-o]=t[o]+l.sign*i),u=qt(t,o),null!=a&&u.span>a&&(t[1-o]=t[o]+u.sign*a),t}function qt(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function Kt(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var $t=!0,Jt=Math.min,Qt=Math.max,en=Math.pow,tn="globalPan",nn={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},on={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},an={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},rn=0,sn=function(e){function t(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new G,n._uid="brushController_"+rn++,C(Pn,(function(e,t){this._handlers[t]=B(e,this)}),n),n}return E(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,n){Nt(e)[t]=n}(t,tn,this._uid),C(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=Y(V(an),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,n){var o=Nt(e);o[t]===n&&(o[t]=null)}(e,tn,this._uid),C(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};C(e,(function(e){t[e.panelId]=V(e)}))}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=X(e,(function(e){return Y(V(an),e,!0)}));var t=this._covers,n=this._covers=[],o=this,i=this._creatingCover;return new U(t,e,(function(e,t){return a(e.__brushOption,t)}),a).add(r).update(r).remove((function(e){t[e]!==i&&o.group.remove(t[e])})).execute(),this;function a(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function r(a,r){var s=e[a];if(null!=r&&t[r]===i)n[a]=t[r];else{var l=n[a]=null!=r?(t[r].__brushOption=s,t[r]):un(o,ln(o,s));cn(o,l)}}},t.prototype.unmount=function(){return this.enableBrush(!1),vn(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(H);function ln(e,t){var n=En[t.brushType].createCover(e,t);return n.__brushOption=t,hn(n,t),e.group.add(n),n}function un(e,t){var n=pn(t);return n.endCreating&&(n.endCreating(e,t),hn(t,t.__brushOption)),t}function dn(e,t){var n=t.__brushOption;pn(t).updateCoverShape(e,t,n.range,n)}function hn(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function cn(e,t){pn(t).updateCommon(e,t),dn(e,t)}function pn(e){return En[e.__brushOption.brushType]}function gn(e,t,n){var o,i=e._panels;if(!i)return $t;var a=e._transform;return C(i,(function(e){e.isTargetByCursor(t,n,a)&&(o=e)})),o}function fn(e,t){var n=e._panels;if(!n)return $t;var o=t.__brushOption.panelId;return null!=o?n[o]:$t}function vn(e){var t=e._covers,n=t.length;return C(t,(function(t){e.group.remove(t)}),e),t.length=0,!!n}function mn(e,t){var n=X(e._covers,(function(e){var t=e.__brushOption,n=V(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function yn(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function xn(e,t,n,o){var i=new G;return i.add(new q({name:"main",style:wn(n),silent:!0,draggable:!0,cursor:"move",drift:j(Cn,e,t,i,["n","s","w","e"]),ondragend:j(mn,t,{isEnd:!0})})),C(o,(function(n){i.add(new q({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:j(Cn,e,t,i,n),ondragend:j(mn,t,{isEnd:!0})}))})),i}function bn(e,t,n,o){var i=o.brushStyle.lineWidth||0,a=Qt(i,6),r=n[0][0],s=n[1][0],l=r-i/2,u=s-i/2,d=n[0][1],h=n[1][1],c=d-a+i/2,p=h-a+i/2,g=d-r,f=h-s,v=g+i,m=f+i;Mn(e,t,"main",r,s,g,f),o.transformable&&(Mn(e,t,"w",l,u,a,m),Mn(e,t,"e",c,u,a,m),Mn(e,t,"n",l,u,v,a),Mn(e,t,"s",l,p,v,a),Mn(e,t,"nw",l,u,a,a),Mn(e,t,"ne",c,u,a,a),Mn(e,t,"sw",l,p,a,a),Mn(e,t,"se",c,p,a,a))}function _n(e,t){var n=t.__brushOption,o=n.transformable,i=t.childAt(0);i.useStyle(wn(n)),i.attr({silent:!o,cursor:o?"move":"default"}),C([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var i=t.childOfName(n.join("")),a=1===n.length?An(e,n[0]):function(e,t){var n=[An(e,t[0]),An(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);i&&i.attr({silent:!o,invisible:!o,cursor:o?on[a]+"-resize":null})}))}function Mn(e,t,n,o,i,a,r){var s,l,u,d,h,c=t.childOfName(n);c&&c.setShape((s=In(e,t,[[o,i],[o+a,i+r]]),l=Jt(s[0][0],s[1][0]),u=Jt(s[0][1],s[1][1]),d=Qt(s[0][0],s[1][0]),h=Qt(s[0][1],s[1][1]),{x:l,y:u,width:d-l,height:h-u}))}function wn(e){return r({strokeNoScale:!0},e.brushStyle)}function Sn(e,t,n,o){var i=[Jt(e,n),Jt(t,o)],a=[Qt(e,n),Qt(t,o)];return[[i[0],a[0]],[i[1],a[1]]]}function An(e,t){var n=K({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return $(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function Cn(e,t,n,o,i,a){var r=n.__brushOption,s=e.toRectRange(r.range),l=Ln(t,i,a);C(o,(function(e){var t=nn[e];s[t[0]][t[1]]+=l[t[0]]})),r.range=e.fromRectRange(Sn(s[0][0],s[1][0],s[0][1],s[1][1])),cn(t,n),mn(t,{isEnd:!1})}function Tn(e,t,n,o){var i=t.__brushOption.range,a=Ln(e,n,o);C(i,(function(e){e[0]+=a[0],e[1]+=a[1]})),cn(e,t),mn(e,{isEnd:!1})}function Ln(e,t,n){var o=e.group,i=o.transformCoordToLocal(t,n),a=o.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function In(e,t,n){var o=fn(e,t);return o&&o!==$t?o.clipPath(n,e._transform):V(n)}function Dn(e){var t=e.event;t.preventDefault&&t.preventDefault()}function On(e,t,n){return e.childOfName("main").contain(t,n)}function kn(e,t,n,o){var i,a=e._creatingCover,r=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],o=t[0],i=n[0]-o[0],a=n[1]-o[1];return en(i*i+a*a,.5)>6}(e)||a){if(r&&!a){"single"===s.brushMode&&vn(e);var l=V(s);l.brushType=Rn(l.brushType,r),l.panelId=r===$t?null:r.panelId,a=e._creatingCover=ln(e,l),e._covers.push(a)}if(a){var u=En[Rn(e._brushType,r)];a.__brushOption.range=u.getCreatingRange(In(e,a,e._track)),o&&(un(e,a),u.updateCommon(e,a)),dn(e,a),i={isEnd:o}}}else o&&"single"===s.brushMode&&s.removeOnClick&&gn(e,t,n)&&vn(e)&&(i={isEnd:o,removeOnClick:!0});return i}function Rn(e,t){return"auto"===e?t.defaultBrushType:e}var Pn={mousedown:function(e){if(this._dragging)zn(this,e);else if(!e.target||!e.target.draggable){Dn(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=gn(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,o=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var o=e._zr;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}(e,t.offsetX,t.offsetY)){var o=e._zr,i=e._covers,a=gn(e,t,n);if(!e._dragging)for(var r=0;r<i.length;r++){var s=i[r].__brushOption;if(a&&(a===$t||s.panelId===a.panelId)&&En[s.brushType].contain(i[r],n[0],n[1]))return}a&&o.setCursorStyle("crosshair")}}(this,e,o),this._dragging){Dn(e);var i=kn(this,e,o,!1);i&&mn(this,i)}},mouseup:function(e){zn(this,e)}};function zn(e,t){if(e._dragging){Dn(t);var n=t.offsetX,o=t.offsetY,i=e.group.transformCoordToLocal(n,o),a=kn(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&mn(e,a)}}var En={lineX:Bn(0),lineY:Bn(1),rect:{createCover:function(e,t){function n(e){return e}return xn({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=yn(e);return Sn(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,o){bn(e,t,n,o)},updateCommon:_n,contain:On},polygon:{createCover:function(e,t){var n=new G;return n.add(new a({name:"main",style:wn(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new F({name:"main",draggable:!0,drift:j(Tn,e,t),ondragend:j(mn,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,o){t.childAt(0).setShape({points:In(e,t,n)})},updateCommon:_n,contain:On}};function Bn(e){return{createCover:function(t,n){return xn({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=yn(t);return[Jt(n[0][e],n[1][e]),Qt(n[0][e],n[1][e])]},updateCoverShape:function(t,n,o,i){var a,r=fn(t,n);if(r!==$t&&r.getLinearBrushOtherExtent)a=r.getLinearBrushOtherExtent(e);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[o,a];e&&l.reverse(),bn(t,n,l,i)},updateCommon:_n,contain:On}}var Vn=e("B",sn);function Zn(e){return e=Hn(e),function(t){return J(t,e)}}function Nn(e,t){return e=Hn(e),function(n){var o=null!=t?t:n,i=o?e.width:e.height,a=o?e.x:e.y;return[a,a+(i||0)]}}function Wn(e,t,n){var o=Hn(e);return function(e,i){return o.contain(i[0],i[1])&&!Ft(e,t,n)}}function Hn(e){return v.create(e)}var Gn=["x","y","radius","angle","single"],Yn=["cartesian2d","polar","singleAxis"];function Xn(e){return e+"Axis"}function Un(e,t){var n,o=Q(),i=[],a=Q();e.eachComponent({mainType:"dataZoom",query:t},(function(e){a.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",r)}while(n);function r(e){!a.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var i=o.get(e);i&&i[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){a.set(e.uid,!0),i.push(e),e.eachTargetAxis((function(e,t){(o.get(e)||o.set(e,[]))[t]=!0}))}return i}function Fn(e){var t=e.ecModel,n={infoList:[],infoMap:Q()};return e.eachTargetAxis((function(e,o){var i=t.getComponent(Xn(e),o);if(i){var a=i.getCoordSysModel();if(a){var r=a.uid,s=n.infoMap.get(r);s||(s={model:a,axisModels:[]},n.infoList.push(s),n.infoMap.set(r,s)),s.axisModels.push(i)}}})),n}var jn=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),qn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return E(t,e),t.prototype.init=function(e,t,n){var o=Kn(e);this.settledOption=o,this.mergeDefaultAndTheme(e,n),this._doInit(o)},t.prototype.mergeOption=function(e){var t=Kn(e);Y(this.option,e,!0),Y(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;C([["start","startValue"],["end","endValue"]],(function(e,o){"value"===this._rangePropMode[o]&&(t[e[0]]=n[e[0]]=null)}),this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=Q();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return C(Gn,(function(n){var o=this.getReferringComponents(Xn(n),ee);if(o.specified){t=!0;var i=new jn;C(o.models,(function(e){i.add(e.componentIndex)})),e.set(n,i)}}),this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,o=!0;if(o){var i="vertical"===t?"y":"x";a(n.findComponents({mainType:i+"Axis"}),i)}function a(t,n){var i=t[0];if(i){var a=new jn;if(a.add(i.componentIndex),e.set(n,a),o=!1,"x"===n||"y"===n){var r=i.getReferringComponents("grid",te).models[0];r&&C(t,(function(e){i.componentIndex!==e.componentIndex&&r===e.getReferringComponents("grid",te).models[0]&&a.add(e.componentIndex)}))}}}o&&a(n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single"),o&&C(Gn,(function(t){if(o){var i=n.findComponents({mainType:Xn(t),filter:function(e){return"category"===e.get("type",!0)}});if(i[0]){var a=new jn;a.add(i[0].componentIndex),e.set(t,a),o=!1}}}),this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");C([["start","startValue"],["end","endValue"]],(function(o,i){var a=null!=e[o[0]],r=null!=e[o[1]];a&&!r?t[i]="percent":!a&&r?t[i]="value":n?t[i]=n[i]:a&&(t[i]="percent")}))},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(Xn(t),n))}),this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(n,o){C(n.indexList,(function(n){e.call(t,o,n)}))}))},t.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(Xn(e),t)},t.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;C([["start","startValue"],["end","endValue"]],(function(o){null==e[o[0]]&&null==e[o[1]]||(t[o[0]]=n[o[0]]=e[o[0]],t[o[1]]=n[o[1]]=e[o[1]])}),this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;C(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),o=0;o<n.length;o++)for(var i=n[o],a=this._targetAxisInfoMap.get(i),r=0;r<a.indexList.length;r++){var s=this.getAxisProxy(i,a.indexList[r]);if(s.hostedBy(this))return s;t||(t=s)}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(ne);function Kn(e){var t={};return C(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}var $n=qn,Jn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.type="dataZoom.select",t}($n),Qn=Jn,eo=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.prototype.render=function(e,t,n,o){this.dataZoomModel=e,this.ecModel=t,this.api=n},t.type="dataZoom",t}(oe),to=eo,no=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.type="dataZoom.select",t}(to),oo=no,io=C,ao=le,ro=function(){function e(e,t,n,o){this._dimName=e,this._axisIndex=t,this.ecModel=o,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return D(Yn,t)>=0}(t)){var n=Xn(this._dimName),o=t.getReferringComponents(n,te).models[0];o&&this._axisIndex===o.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return V(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,o=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),a=[0,100],r=[],s=[];io(["start","end"],(function(l,u){var d=e[l],h=e[l+"Value"];"percent"===i[u]?(null==d&&(d=a[u]),h=o.parse(ie(d,a,n))):(t=!0,h=null==h?n[u]:o.parse(h),d=ie(h,n,a)),s[u]=h,r[u]=d})),ao(s),ao(r);var l=this._minMaxSpan;function u(e,t,n,i,a){var r=a?"Span":"ValueSpan";jt(0,e,n,"all",l["min"+r],l["max"+r]);for(var s=0;s<2;s++)t[s]=ie(e[s],n,i,!0),a&&(t[s]=o.parse(t[s]))}return t?u(s,r,n,a,!1):u(r,s,a,n,!0),{valueWindow:s,percentWindow:r}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var o=[1/0,-1/0];io(n,(function(e){re(o,e.getData(),t)}));var i=e.getAxisModel(),a=se(i.axis.scale,i,o).calculate();return[a.min,a.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),i=e.get("filterMode"),a=this._valueWindow;"none"!==i&&io(o,(function(e){var t=e.getData(),o=t.mapDimensionsAll(n);if(o.length){if("weakFilter"===i){var r=t.getStore(),s=X(o,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,i,l=0;l<o.length;l++){var u=r.get(s[l],e),d=!isNaN(u),h=u<a[0],c=u>a[1];if(d&&!h&&!c)return!0;d&&(i=!0),h&&(t=!0),c&&(n=!0)}return i&&t&&n}))}else io(o,(function(n){if("empty"===i)e.setData(t=t.map(n,(function(e){return function(e){return e>=a[0]&&e<=a[1]}(e)?e:NaN})));else{var o={};o[n]=a,t.selectRange(o)}}));io(o,(function(e){t.setApproximateExtent(a,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;io(["min","max"],(function(o){var i=t.get(o+"Span"),a=t.get(o+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?i=ie(n[0]+a,n,[0,100],!0):null!=i&&(a=ie(i,[0,100],n,!0)-n[0]),e[o+"Span"]=i,e[o+"ValueSpan"]=a}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var o=ae(n,[0,500]);o=Math.min(o,20);var i=e.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(o)),100!==t[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(o)),i.freeze()}},e}(),so={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(o,i){var a=e.getComponent(Xn(o),i);t(o,i,a,n)}))}))}t((function(e,t,n,o){n.__dzAxisProxy=null}));var n=[];t((function(t,o,i,a){i.__dzAxisProxy||(i.__dzAxisProxy=new ro(t,o,a,e),n.push(i.__dzAxisProxy))}));var o=Q();return C(n,(function(e){C(e.getTargetSeriesModels(),(function(e){o.set(e.uid,e)}))})),o},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){e.getAxisProxy(t,n).reset(e)})),e.eachTargetAxis((function(n,o){e.getAxisProxy(n,o).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),o=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}}))}},lo=!1;function uo(e){lo||(lo=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,so),function(e){e.registerAction("dataZoom",(function(e,t){var n=Un(t,e);C(n,(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function ho(e){e.registerComponentModel(Qn),e.registerComponentView(oo),uo(e)}var co=e("T",(function(){})),po={};function go(e,t){po[e]=t}function fo(e){return po[e]}var vo=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;C(this.option.feature,(function(e,n){var o=fo(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(t)),Y(e,o.defaultOption))}))},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(ne),mo=vo,yo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.render=function(e,t,n,o){var i=this.group;if(i.removeAll(),e.get("show")){var a=+e.get("itemSize"),r=e.get("feature")||{},s=this._features||(this._features={}),l=[];C(r,(function(e,t){l.push(t)})),new U(this._featureNames||[],l).add(u).update(u).remove(j(u,null)).execute(),this._featureNames=l,ve(i,e,n),i.add(me(i.getBoundingRect(),e)),i.eachChild((function(e){var t=e.__title,o=e.ensureState("emphasis"),r=o.textConfig||(o.textConfig={}),s=e.getTextContent(),l=s&&s.states.emphasis;if(l&&!m(l)&&t){var u=l.style||(l.style={}),d=ye(t,ge.makeFont(u)),h=e.x+i.x,c=!1;e.y+i.y+a+d.height>n.getHeight()&&(r.position="top",c=!0);var p=c?-5-d.height:a+8;h+d.width/2>n.getWidth()?(r.position=["100%",p],u.align="right"):h-d.width/2<0&&(r.position=[0,p],u.align="left")}}))}function u(u,d){var h,c=l[u],p=l[d],g=r[c],f=new ue(g,e,e.ecModel);if(o&&null!=o.newTitle&&o.featureName===c&&(g.title=o.newTitle),c&&!p){if(function(e){return 0===e.indexOf("my")}(c))h={onclick:f.option.onclick,featureName:c};else{var v=fo(c);if(!v)return;h=new v}s[c]=h}else if(!(h=s[p]))return;h.uid=de("toolbox-feature"),h.model=f,h.ecModel=t,h.api=n;var m=h instanceof co;c||!p?!f.get("show")||m&&h.unusable?m&&h.remove&&h.remove(t,n):(function(o,r,s){var l,u,d=o.getModel("iconStyle"),h=o.getModel(["emphasis","iconStyle"]),c=r instanceof co&&r.getIcons?r.getIcons():o.get("icon"),p=o.get("title")||{};N(c)?(l={})[s]=c:l=c,N(p)?(u={})[s]=p:u=p;var g=o.iconPaths={};C(l,(function(s,l){var c=pe(s,{},{x:-a/2,y:-a/2,width:a,height:a});c.setStyle(d.getItemStyle()),c.ensureState("emphasis").style=h.getItemStyle();var p=new ge({style:{text:u[l],align:h.get("textAlign"),borderRadius:h.get("textBorderRadius"),padding:h.get("textPadding"),fill:null},ignore:!0});c.setTextContent(p),fe({el:c,componentModel:e,itemName:l,formatterParamsExtra:{title:u[l]}}),c.__title=u[l],c.on("mouseover",(function(){var t=h.getItemStyle(),n="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";p.setStyle({fill:h.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:h.get("textBackgroundColor")}),c.setTextConfig({position:h.get("textPosition")||n}),p.ignore=!e.get("showTitle"),he(this)})).on("mouseout",(function(){"emphasis"!==o.get(["iconStatus",l])&&ce(this),p.hide()})),("emphasis"===o.get(["iconStatus",l])?he:ce)(c),i.add(c),c.on("click",B(r.onclick,r,t,n,l)),g[l]=c}))}(f,h,c),f.setIconStatus=function(e,t){var n=this.option,o=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,o[e]&&("emphasis"===t?he:ce)(o[e])},h instanceof co&&h.render&&h.render(f,t,n,o)):m&&h.dispose&&h.dispose(t,n)}},t.prototype.updateView=function(e,t,n,o){C(this._features,(function(e){e instanceof co&&e.updateView&&e.updateView(e.model,t,n,o)}))},t.prototype.remove=function(e,t){C(this._features,(function(n){n instanceof co&&n.remove&&n.remove(e,t)})),this.group.removeAll()},t.prototype.dispose=function(e,t){C(this._features,(function(n){n instanceof co&&n.dispose&&n.dispose(e,t)}))},t.type="toolbox",t}(oe),xo=yo,bo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.onclick=function(e,t){var n=this.model,o=n.get("name")||e.get("title.0.text")||"echarts",i="svg"===t.getZr().painter.getType(),a=i?"svg":n.get("type",!0)||"png",r=t.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=xe.browser;if(m(MouseEvent)&&(s.newEdge||!s.ie&&!s.edge)){var l=document.createElement("a");l.download=o+"."+a,l.target="_blank",l.href=r;var u=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});l.dispatchEvent(u)}else if(window.navigator.msSaveOrOpenBlob||i){var d=r.split(","),h=d[0].indexOf("base64")>-1,c=i?decodeURIComponent(d[1]):d[1];h&&(c=window.atob(c));var p=o+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var g=c.length,f=new Uint8Array(g);g--;)f[g]=c.charCodeAt(g);var v=new Blob([f]);window.navigator.msSaveOrOpenBlob(v,p)}else{var y=document.createElement("iframe");document.body.appendChild(y);var x=y.contentWindow,b=x.document;b.open("image/svg+xml","replace"),b.write(c),b.close(),x.focus(),b.execCommand("SaveAs",!0,p),document.body.removeChild(y)}}else{var _=n.get("lang"),M='<body style="margin:0;"><img src="'+r+'" style="max-width:100%;" title="'+(_&&_[0]||"")+'" /></body>',w=window.open();w.document.write(M),w.document.title=o}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},t}(co),_o=bo,Mo="__ec_magicType_stack__",wo=[["line","bar"],["stack"]],So=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return C(e.get("type"),(function(e){t[e]&&(n[e]=t[e])})),n},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,t,n){var o=this.model,i=o.get(["seriesIndex",n]);if(Ao[n]){var a,s={series:[]};C(wo,(function(e){D(e,n)>=0&&C(e,(function(e){o.setIconStatus(e,"normal")}))})),o.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==i?null:{seriesIndex:i}},(function(e){var t=e.subType,i=e.id,a=Ao[n](t,i,e,o);a&&(r(a,e.option),s.series.push(a));var l=e.coordinateSystem;if(l&&"cartesian2d"===l.type&&("line"===n||"bar"===n)){var u=l.getAxesByScale("ordinal")[0];if(u){var d=u.dim+"Axis",h=e.getReferringComponents(d,te).models[0].componentIndex;s[d]=s[d]||[];for(var c=0;c<=h;c++)s[d][h]=s[d][h]||{};s[d][h].boundaryGap="bar"===n}}}));var l=n;"stack"===n&&(a=Y({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),"emphasis"!==o.get(["iconStatus",n])&&(l="tiled")),t.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:a,featureName:"magicType"})}},t}(co),Ao={line:function(e,t,n,o){if("bar"===e)return Y({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(e,t,n,o){if("line"===e)return Y({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(e,t,n,o){var i=n.get("stack")===Mo;if("line"===e||"bar"===e)return o.setIconStatus("stack",i?"normal":"emphasis"),Y({id:t,stack:i?"":Mo},o.get(["option","stack"])||{},!0)}};P({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var Co=So,To=new Array(60).join("-"),Lo="\t";function Io(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Do=new RegExp("[\t]+","g");function Oo(e,t){var n=e.split(new RegExp("\n*"+To+"\n*","g")),o={series:[]};return C(n,(function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(Lo)>=0)return!0}(e)){var i=function(e){for(var t=e.split(/\n+/g),n=Io(t.shift()).split(Do),o=[],i=X(n,(function(e){return{name:e,data:[]}})),a=0;a<t.length;a++){var r=Io(t[a]).split(Do);o.push(r.shift());for(var s=0;s<r.length;s++)i[s]&&(i[s].data[a]=r[s])}return{series:i,categories:o}}(e),a=t[n],r=a.axisDim+"Axis";a&&(o[r]=o[r]||[],o[r][a.axisIndex]={data:i.categories},o.series=o.series.concat(i.series))}else i=function(e){for(var t=e.split(/\n+/g),n=Io(t.shift()),o=[],i=0;i<t.length;i++){var a=Io(t[i]);if(a){var r=a.split(Do),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),o[i]={name:s,value:[]},l=o[i].value):l=o[i]=[];for(var d=0;d<r.length;d++)l.push(+r[d]);1===l.length&&(u?o[i].value=l[0]:o[i]=l[0])}}return{name:n,data:o}}(e),o.series.push(i)})),o}var ko=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.onclick=function(e,t){var n=t.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",i.style.backgroundColor=o.get("backgroundColor")||"#fff";var a=document.createElement("h4"),r=o.get("lang")||[];a.innerHTML=r[0]||o.get("title"),a.style.cssText="margin: 10px 20px;",a.style.color=o.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var u=o.get("optionToContent"),d=o.get("contentToOption"),h=function(e){var t,n,o,i=function(e){var t={},n=[],o=[];return e.eachRawSeries((function(e){var i=e.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)n.push(e);else{var a=i.getBaseAxis();if("category"===a.type){var r=a.dim+"_"+a.index;t[r]||(t[r]={categoryAxis:a,valueAxis:i.getOtherAxis(a),series:[]},o.push({axisDim:a.dim,axisIndex:a.index})),t[r].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:o}}(e);return{value:M([(n=i.seriesGroupByCategoryAxis,o=[],C(n,(function(e,t){var n=e.categoryAxis,i=e.valueAxis.dim,a=[" "].concat(X(e.series,(function(e){return e.name}))),r=[n.model.getCategories()];C(e.series,(function(e){var t=e.getRawData();r.push(e.getRawData().mapArray(t.mapDimension(i),(function(e){return e})))}));for(var s=[a.join(Lo)],l=0;l<r[0].length;l++){for(var u=[],d=0;d<r.length;d++)u.push(r[d][l]);s.push(u.join(Lo))}o.push(s.join("\n"))})),o.join("\n\n"+To+"\n\n")),(t=i.other,X(t,(function(e){var t=e.getRawData(),n=[e.name],o=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,i=arguments[e-1],a=t.getName(i),r=0;r<e-1;r++)o[r]=arguments[r];n.push((a?a+Lo:"")+o.join(Lo))})),n.join("\n")})).join("\n\n"+To+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+To+"\n\n"),meta:i.meta}}(e);if(m(u)){var c=u(t.getOption());N(c)?s.innerHTML=c:be(c)&&s.appendChild(c)}else s.appendChild(l),l.readOnly=o.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=o.get("textColor"),l.style.borderColor=o.get("textareaBorderColor"),l.style.backgroundColor=o.get("textareaColor"),l.value=h.value;var p=h.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:0;left:0;right:0;";var f="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),y=document.createElement("div");f+=";background-color:"+o.get("buttonColor"),f+=";color:"+o.get("buttonTextColor");var x=this;function b(){n.removeChild(i),x._dom=null}_e(v,"click",b),_e(y,"click",(function(){if(null==d&&null!=u||null!=d&&null==u)b();else{var e;try{e=m(d)?d(s,t.getOption()):Oo(l.value,p)}catch(n){throw b(),new Error("Data view format error "+n)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),b()}})),v.innerHTML=r[1],y.innerHTML=r[2],y.style.cssText=f,v.style.cssText=f,!o.get("readOnly")&&g.appendChild(y),g.appendChild(v),i.appendChild(a),i.appendChild(s),i.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(i),this._dom=i},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(co);function Ro(e,t){return X(e,(function(e,n){var o=t&&t[n];if(we(o)&&!Se(o)){we(e)&&!Se(e)||(e={value:e});var i=null!=o.name&&null==e.name;return e=r(e,o),i&&delete e.name,e}return e}))}P({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var n=[];C(e.newOption.series,(function(e){var o=t.getSeriesByName(e.name)[0];if(o){var i=o.get("data");n.push({name:e.name,data:Ro(e.data,i)})}else n.push(Me({type:"scatter"},e))})),t.mergeOption(r({series:n},e.newOption))}));var Po=ko,zo=C,Eo=f();function Bo(e){var t=Eo(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var Vo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.onclick=function(e,t){!function(e){Eo(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},t}(co);P({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var Zo=Vo,No=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Wo=function(){function e(e,t,n){var o=this;this._targetInfoList=[];var i=Go(t,e);C(Yo,(function(e,t){(!n||!n.include||D(n.include,t)>=0)&&e(i,o._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var o=Fo[e.brushType](0,n,t);e.__rangeOffset={offset:qo[e.brushType](o.values,e.range,[1,1]),xyMinMax:o.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,n){C(e,(function(e){var o=this.findTargetInfo(e,t);o&&!0!==o&&C(o.coordSyses,(function(o){var i=Fo[e.brushType](1,o,e.range,!0);n(e,i.values,o,t)}))}),this)},e.prototype.setInputRanges=function(e,t){C(e,(function(e){var n,o,i,a,r,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var l=Fo[e.brushType](0,s.coordSys,e.coordRange),u=e.__rangeOffset;e.range=u?qo[e.brushType](l.values,u.offset,(n=l.xyMinMax,o=u.xyMinMax,i=$o(n),a=$o(o),r=[i[0]/a[0],i[1]/a[1]],isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r)):l.values}}),this)},e.prototype.makePanelOpts=function(e,t){return X(this._targetInfoList,(function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:Zn(o),isTargetByCursor:Wn(o,e,n.coordSysModel),getLinearBrushOtherExtent:Nn(o)}}))},e.prototype.controlSeries=function(e,t,n){var o=this.findTargetInfo(e,n);return!0===o||o&&D(o.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,o=Go(t,e),i=0;i<n.length;i++){var a=n[i],r=e.panelId;if(r){if(a.panelId===r)return a}else for(var s=0;s<Xo.length;s++)if(Xo[s](o,a))return a}return!0},e}();function Ho(e){return e[0]>e[1]&&e.reverse(),e}function Go(e,t){return Ae(e,t,{includeMainTypes:No})}var Yo={grid:function(e,t){var n=e.xAxisModels,o=e.yAxisModels,i=e.gridModels,a=Q(),r={},s={};(n||o||i)&&(C(n,(function(e){var t=e.axis.grid.model;a.set(t.id,t),r[t.id]=!0})),C(o,(function(e){var t=e.axis.grid.model;a.set(t.id,t),s[t.id]=!0})),C(i,(function(e){a.set(e.id,e),r[e.id]=!0,s[e.id]=!0})),a.each((function(e){var i=e.coordinateSystem,a=[];C(i.getCartesians(),(function(e,t){(D(n,e.getAxis("x").model)>=0||D(o,e.getAxis("y").model)>=0)&&a.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:Uo.grid,xAxisDeclared:r[e.id],yAxisDeclared:s[e.id]})})))},geo:function(e,t){C(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:Uo.geo})}))}},Xo=[function(e,t){var n=e.xAxisModel,o=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&o&&(i=o.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],Uo={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform($(e)),t}},Fo={lineX:j(jo,0),lineY:j(jo,1),rect:function(e,t,n,o){var i=e?t.pointToData([n[0][0],n[1][0]],o):t.dataToPoint([n[0][0],n[1][0]],o),a=e?t.pointToData([n[0][1],n[1][1]],o):t.dataToPoint([n[0][1],n[1][1]],o),r=[Ho([i[0],a[0]]),Ho([i[1],a[1]])];return{values:r,xyMinMax:r}},polygon:function(e,t,n,o){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:X(n,(function(n){var a=e?t.pointToData(n,o):t.dataToPoint(n,o);return i[0][0]=Math.min(i[0][0],a[0]),i[1][0]=Math.min(i[1][0],a[1]),i[0][1]=Math.max(i[0][1],a[0]),i[1][1]=Math.max(i[1][1],a[1]),a})),xyMinMax:i}}};function jo(e,t,n,o){var i=n.getAxis(["x","y"][e]),a=Ho(X([0,1],(function(e){return t?i.coordToData(i.toLocalCoord(o[e]),!0):i.toGlobalCoord(i.dataToCoord(o[e]))}))),r=[];return r[e]=a,r[1-e]=[NaN,NaN],{values:a,xyMinMax:r}}var qo={lineX:j(Ko,0),lineY:j(Ko,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return X(e,(function(e,o){return[e[0]-n[0]*t[o][0],e[1]-n[1]*t[o][1]]}))}};function Ko(e,t,n,o){return[t[0]-o[e]*n[0],t[1]-o[e]*n[1]]}function $o(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var Jo=e("g",Wo),Qo=C,ei=Te("toolbox-dataZoom_"),ti=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.render=function(e,t,n,o){this._brushController||(this._brushController=new Vn(n.getZr()),this._brushController.on("brush",B(this._onBrush,this)).mount()),function(e,t,n,o,i){var a=n._isZoomActive;o&&"takeGlobalCursor"===o.type&&(a="dataZoomSelect"===o.key&&o.dataZoomSelectActive),n._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var r=new Jo(oi(e),t,{include:["grid"]}).makePanelOpts(i,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(r).enableBrush(!(!a||!r.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,o,n),function(e,t){e.setIconStatus("back",function(e){return Bo(e).length}(t)>1?"emphasis":"normal")}(e,t)},t.prototype.onclick=function(e,t,n){ni[n].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},o=this.ecModel;this._brushController.updateCovers([]),new Jo(oi(this.model),o,{include:["grid"]}).matchOutputRanges(t,o,(function(e,t,n){if("cartesian2d"===n.type){var o=e.brushType;"rect"===o?(i("x",n,t[0]),i("y",n,t[1])):i({lineX:"x",lineY:"y"}[o],n,t)}})),function(e,t){var n=Bo(e);zo(t,(function(t,o){for(var i=n.length-1;i>=0&&!n[i][o];i--);if(i<0){var a=e.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(a){var r=a.getPercentRange();n[0][o]={dataZoomId:o,start:r[0],end:r[1]}}}})),n.push(t)}(o,n),this._dispatchZoomAction(n)}function i(e,t,i){var a=t.getAxis(e),r=a.model,s=function(e,t,n){var o;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(o=n)})),o}(e,r,o),l=s.findRepresentativeAxisProxy(r).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(i=jt(0,i.slice(),a.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:i[0],endValue:i[1]})}},t.prototype._dispatchZoomAction=function(e){var t=[];Qo(e,(function(e,n){t.push(V(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(co),ni={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=Bo(e),n=t[t.length-1];t.length>1&&t.pop();var o={};return zo(n,(function(e,n){for(var i=t.length-1;i>=0;i--)if(e=t[i][n]){o[n]=e;break}})),o}(this.ecModel))}};function oi(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}Ce("dataZoom",(function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var o=t.getModel(n),i=[],a=oi(o),r=Ae(e,a);return Qo(r.xAxisModels,(function(e){return s(e,"xAxis","xAxisIndex")})),Qo(r.yAxisModels,(function(e){return s(e,"yAxis","yAxisIndex")})),i}function s(e,t,n){var a=e.componentIndex,r={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:ei+t+a};r[n]=a,i.push(r)}}));var ii=ti,ai=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return E(t,e),t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(ne),ri=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.prototype.render=function(e,t,n){if(this.group.removeAll(),e.get("show")){var o=this.group,a=e.getModel("textStyle"),r=e.getModel("subtextStyle"),s=e.get("textAlign"),l=i(e.get("textBaseline"),e.get("textVerticalAlign")),u=new ge({style:Ie(a,{text:e.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),h=e.get("subtext"),c=new ge({style:Ie(r,{text:h,fill:r.getTextColor(),y:d.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=e.get("link"),g=e.get("sublink"),f=e.get("triggerEvent",!0);u.silent=!p&&!f,c.silent=!g&&!f,p&&u.on("click",(function(){De(p,"_"+e.get("target"))})),g&&c.on("click",(function(){De(g,"_"+e.get("subtarget"))})),x(u).eventData=x(c).eventData=f?{componentType:"title",componentIndex:e.componentIndex}:null,o.add(u),h&&o.add(c);var v=o.getBoundingRect(),m=e.getBoxLayoutParams();m.width=v.width,m.height=v.height;var y=Oe(m,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));s||("middle"===(s=e.get("left")||e.get("right"))&&(s="center"),"right"===s?y.x+=y.width:"center"===s&&(y.x+=y.width/2)),l||("center"===(l=e.get("top")||e.get("bottom"))&&(l="middle"),"bottom"===l?y.y+=y.height:"middle"===l&&(y.y+=y.height/2),l=l||"top"),o.x=y.x,o.y=y.y,o.markRedraw();var b={align:s,verticalAlign:l};u.setStyle(b),c.setStyle(b),v=o.getBoundingRect();var _=y.margin,M=e.getItemStyle(["color","opacity"]);M.fill=e.get("backgroundColor");var w=new q({shape:{x:v.x-_[3],y:v.y-_[0],width:v.width+_[1]+_[3],height:v.height+_[0]+_[2],r:e.get("borderRadius")},style:M,subPixelOptimize:!0,silent:!0});o.add(w)}},t.type="title",t}(oe),si=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.type="dataZoom.inside",t.defaultOption=ke($n.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}($n),li=si,ui=f();function di(e,t,n){ui(e).coordSysRecordMap.each((function(e){var o=e.dataZoomInfoMap.get(t.uid);o&&(o.getRange=n)}))}function hi(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function ci(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function pi(e,t,n,o){return e.coordinateSystem.containPoint([n,o])}function gi(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,(function(e,t){var n=ui(t),o=n.coordSysRecordMap||(n.coordSysRecordMap=Q());o.each((function(e){e.dataZoomInfoMap=null})),e.eachComponent({mainType:"dataZoom",subType:"inside"},(function(e){var n=Fn(e);C(n.infoList,(function(n){var i=n.model.uid,a=o.get(i)||o.set(i,function(e,t){var n={model:t,containsPoint:j(pi,t),dispatchAction:j(ci,e),dataZoomInfoMap:null,controller:null},o=n.controller=new Xt(e.getZr());return C(["pan","zoom","scrollMove"],(function(e){o.on(e,(function(t){var o=[];n.dataZoomInfoMap.each((function(i){if(t.isAvailableBehavior(i.model.option)){var a=(i.getRange||{})[e],r=a&&a(i.dzReferCoordSysInfo,n.model.mainType,n.controller,t);!i.model.get("disabled",!0)&&r&&o.push({dataZoomId:i.model.id,start:r[0],end:r[1]})}})),o.length&&n.dispatchAction(o)}))})),n}(t,n.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=Q())).set(e.uid,{dzReferCoordSysInfo:n,model:e,getRange:null})}))})),o.each((function(e){var t,n=e.controller,i=e.dataZoomInfoMap;if(i){var a=i.keys()[0];null!=a&&(t=i.get(a))}if(t){var r=function(e){var t,n="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return e.each((function(e){var a=e.model,r=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");o[n+r]>o[n+t]&&(t=r),i=i&&a.get("preventDefaultMouseMove",!0)})),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}(i);n.enable(r.controlType,r.opt),n.setPointerChecker(e.containsPoint),Re(e,"dispatchAction",t.model.get("throttle",!0),"fixRate")}else hi(o,e)}))}))}var fi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return E(t,e),t.prototype.render=function(t,n,o){e.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),di(o,t,{pan:B(vi.pan,this),zoom:B(vi.zoom,this),scrollMove:B(vi.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){for(var n=ui(e).coordSysRecordMap,o=n.keys(),i=0;i<o.length;i++){var a=o[i],r=n.get(a),s=r.dataZoomInfoMap;if(s){var l=t.uid;s.get(l)&&(s.removeKey(l),s.keys().length||hi(n,r))}}}(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(to),vi={zoom:function(e,t,n,o){var i=this.range,a=i.slice(),r=e.axisModels[0];if(r){var s=yi[t](null,[o.originX,o.originY],r,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/o.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return jt(0,a,[0,100],0,d.minSpan,d.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1]?a:void 0}},pan:mi((function(e,t,n,o,i,a){var r=yi[o]([a.oldX,a.oldY],[a.newX,a.newY],t,i,n);return r.signal*(e[1]-e[0])*r.pixel/r.pixelLength})),scrollMove:mi((function(e,t,n,o,i,a){return yi[o]([0,0],[a.scrollDelta,a.scrollDelta],t,i,n).signal*(e[1]-e[0])*a.scrollDelta}))};function mi(e){return function(t,n,o,i){var a=this.range,r=a.slice(),s=t.axisModels[0];if(s)return jt(e(r,s,t,n,o,i),r,[0,100],"all"),this.range=r,a[0]!==r[0]||a[1]!==r[1]?r:void 0}}var yi={grid:function(e,t,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem.getRect();return e=e||[0,0],"x"===a.dim?(r.pixel=t[0]-e[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r},polar:function(e,t,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(r.pixel=t[0]-e[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=u[1]-u[0],r.pixelStart=u[0],r.signal=a.inverse?-1:1),r},singleAxis:function(e,t,n,o,i){var a=n.axis,r=i.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===a.orient?(s.pixel=t[0]-e[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s}},xi=fi;function bi(e){uo(e),e.registerComponentModel(li),e.registerComponentView(xi),gi(e)}var _i=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=ke($n.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}($n),Mi=_i,wi=q,Si="horizontal",Ai="vertical",Ci=["line","bar","candlestick","scatter"],Ti={easing:"cubicOut",duration:100,delay:0},Li=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return E(t,e),t.prototype.init=function(e,t){this.api=t,this._onBrush=B(this._onBrush,this),this._onBrushEnd=B(this._onBrushEnd,this)},t.prototype.render=function(t,n,o,i){if(e.prototype.render.apply(this,arguments),Re(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show")){if(t.noTarget())return this._clear(),void this.group.removeAll();i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Pe(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new G;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,n=e.get("brushSelect")?7:0,o=this._findCoordRect(),i={width:t.getWidth(),height:t.getHeight()},a=this._orient===Si?{right:i.width-o.x-o.width,top:i.height-30-7-n,width:o.width,height:30}:{right:7,top:o.y,width:30,height:o.height},r=ze(e.option);C(["right","top","width","height"],(function(e){"ph"===r[e]&&(r[e]=a[e])}));var s=Oe(r,i);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===Ai&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,t=this._location,n=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),i=o&&o.get("inverse"),a=this._displayables.sliderGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==Si||i?n===Si&&i?{scaleY:r?1:-1,scaleX:-1}:n!==Ai||i?{scaleY:r?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:r?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:r?1:-1,scaleX:1});var s=e.getBoundingRect([a]);e.x=t.x-s.x,e.y=t.y-s.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,n=this._displayables.sliderGroup,o=e.get("brushSelect");n.add(new wi({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var i=new wi({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:B(this._onClickPanel,this)}),a=this.api.getZr();o?(i.on("mousedown",this._onBrushStart,this),i.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),n.add(i)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var t=this._size,n=this._shadowSize||[],o=e.series,i=o.getRawData(),r=o.getShadowDim?o.getShadowDim():e.otherDim;if(null!=r){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(i!==this._shadowData||r!==this._shadowDim||t[0]!==n[0]||t[1]!==n[1]){var u=i.getDataExtent(r),d=.3*(u[1]-u[0]);u=[u[0]-d,u[1]+d];var h,c=[0,t[1]],p=[0,t[0]],g=[[t[0],0],[0,0]],f=[],v=p[1]/(i.count()-1),m=0,y=Math.round(i.count()/t[0]);i.each([r],(function(e,t){if(y>0&&t%y)m+=v;else{var n=null==e||isNaN(e)||""===e,o=n?0:ie(e,u,c,!0);n&&!h&&t?(g.push([g[g.length-1][0],0]),f.push([f[f.length-1][0],0])):!n&&h&&(g.push([m,0]),f.push([m,0])),g.push([m,o]),f.push([m,o]),m+=v,h=n}})),s=this._shadowPolygonPts=g,l=this._shadowPolylinePts=f}this._shadowData=i,this._shadowDim=r,this._shadowSize=[t[0],t[1]];for(var x=this.dataZoomModel,b=0;b<3;b++){var _=M(1===b);this._displayables.sliderGroup.add(_),this._displayables.dataShadowSegs.push(_)}}}function M(e){var t=x.getModel(e?"selectedDataBackground":"dataBackground"),n=new G,o=new F({shape:{points:s},segmentIgnoreThreshold:1,style:t.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),i=new a({shape:{points:l},segmentIgnoreThreshold:1,style:t.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(o),n.add(i),n}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,o=this.ecModel;return e.eachTargetAxis((function(i,a){var r=e.getAxisProxy(i,a).getTargetSeriesModels();C(r,(function(e){if(!(n||!0!==t&&D(Ci,e.get("type"))<0)){var r,s=o.getComponent(Xn(i),a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[i],u=e.coordinateSystem;null!=l&&u.getOtherAxis&&(r=u.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),n={thisAxis:s,series:e,thisDim:i,otherDim:l,otherAxisInverse:r}}}),this)}),this),n}},t.prototype._renderHandle=function(){var e=this.group,t=this._displayables,n=t.handles=[null,null],o=t.handleLabels=[null,null],i=this._displayables.sliderGroup,a=this._size,r=this.dataZoomModel,s=this.api,l=r.get("borderRadius")||0,u=r.get("brushSelect"),d=t.filler=new wi({silent:u,style:{fill:r.get("fillerColor")},textConfig:{position:"inside"}});i.add(d),i.add(new wi({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:l},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),C([0,1],(function(t){var a=r.get("handleIcon");!Ee[a]&&a.indexOf("path://")<0&&a.indexOf("image://")<0&&(a="path://"+a);var s=Be(a,-1,0,2,2,null,!0);s.attr({cursor:Ii(this._orient),draggable:!0,drift:B(this._onDragMove,this,t),ondragend:B(this._onDragEnd,this),onmouseover:B(this._showDataInfo,this,!0),onmouseout:B(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),u=r.get("handleSize");this._handleHeight=b(u,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(r.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),Ve(s);var d=r.get("handleColor");null!=d&&(s.style.fill=d),i.add(n[t]=s);var h=r.getModel("textStyle");e.add(o[t]=new ge({silent:!0,invisible:!0,style:Ie(h,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:h.getTextColor(),font:h.getFont()}),z2:10}))}),this);var h=d;if(u){var c=b(r.get("moveHandleSize"),a[1]),p=t.moveHandle=new q({style:r.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:c}}),g=.8*c,f=t.moveHandleIcon=Be(r.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);f.silent=!0,f.y=a[1]+c/2-.5,p.ensureState("emphasis").style=r.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var v=Math.min(a[1]/2,Math.max(c,10));(h=t.moveZone=new q({invisible:!0,shape:{y:a[1]-v,height:c+v}})).on("mouseover",(function(){s.enterEmphasis(p)})).on("mouseout",(function(){s.leaveEmphasis(p)})),i.add(p),i.add(f),i.add(h)}h.attr({draggable:!0,cursor:Ii(this._orient),drift:B(this._onDragMove,this,"all"),ondragstart:B(this._showDataInfo,this,!0),ondragend:B(this._onDragEnd,this),onmouseover:B(this._showDataInfo,this,!0),onmouseout:B(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[ie(e[0],[0,100],t,!0),ie(e[1],[0,100],t,!0)]},t.prototype._updateInterval=function(e,t){var n=this.dataZoomModel,o=this._handleEnds,i=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];jt(t,o,i,n.get("zoomLock")?"all":e,null!=a.minSpan?ie(a.minSpan,r,i,!0):null,null!=a.maxSpan?ie(a.maxSpan,r,i,!0):null);var s=this._range,l=this._range=le([ie(o[0],i,r,!0),ie(o[1],i,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},t.prototype._updateView=function(e){var t=this._displayables,n=this._handleEnds,o=le(n.slice()),i=this._size;C([0,1],(function(e){var o=t.handles[e],a=this._handleHeight;o.attr({scaleX:a/2,scaleY:a/2,x:n[e]+(e?-1:1),y:i[1]/2-a/2})}),this),t.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:i[1]});var a={x:o[0],width:o[1]-o[0]};t.moveHandle&&(t.moveHandle.setShape(a),t.moveZone.setShape(a),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",a.x+a.width/2));for(var r=t.dataShadowSegs,s=[0,o[0],o[1],i[0]],l=0;l<r.length;l++){var u=r[l],d=u.getClipPath();d||(d=new q,u.setClipPath(d)),d.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:i[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,n=this._displayables,o=n.handleLabels,i=this._orient,a=["",""];if(t.get("showDetail")){var r=t.findRepresentativeAxisProxy();if(r){var s=r.getAxisModel().axis,l=this._range,u=e?r.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:r.getDataValueWindow();a=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var d=le(this._handleEnds.slice());function h(e){var t=$(n.handles[e].parent,this.group),r=K(0===e?"right":"left",t),s=this._handleWidth/2+5,l=Ze([d[e]+(0===e?-s:s),this._size[1]/2],t);o[e].setStyle({x:l[0],y:l[1],verticalAlign:i===Si?"middle":r,align:i===Si?r:"center",text:a[e]})}h.call(this,0),h.call(this,1)},t.prototype._formatLabel=function(e,t){var n=this.dataZoomModel,o=n.get("labelFormatter"),i=n.get("labelPrecision");null!=i&&"auto"!==i||(i=t.getPixelPrecision());var a=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(i,20));return m(o)?o(e,a):N(o)?o.replace("{value}",a):a},t.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,n=t.handleLabels;n[0].attr("invisible",!e),n[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},t.prototype._onDragMove=function(e,t,n,o){this._dragging=!0,W(o.event);var i=this._displayables.sliderGroup.getLocalTransform(),a=Ze([t,n],i,!0),r=this._updateInterval(e,a[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),r&&s&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var t=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var o=this._handleEnds,i=(o[0]+o[1])/2,a=this._updateInterval("all",n[0]-i);this._updateView(),a&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var t=e.offsetX,o=e.offsetY;this._brushStart=new n(t,o),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,t){t.attr("ignore",!0);var n=t.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),i=[0,100];this._range=le([ie(n.x,o,i,!0),ie(n.x+n.width,o,i,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(W(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,t){var n=this._displayables,o=this.dataZoomModel,i=n.brushRect;i||(i=n.brushRect=new wi({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(i)),i.attr("ignore",!1);var a=this._brushStart,r=this._displayables.sliderGroup,s=r.transformCoordToLocal(e,t),l=r.transformCoordToLocal(a.x,a.y),u=this._size;s[0]=Math.max(Math.min(u[0],s[0]),0),i.setShape({x:l[0],y:0,width:s[0]-l[0],height:u[1]})},t.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?Ti:null,start:t[0],end:t[1]})},t.prototype._findCoordRect=function(){var e,t=Fn(this.dataZoomModel).infoList;if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var o=this.api.getWidth(),i=this.api.getHeight();e={x:.2*o,y:.2*i,width:.6*o,height:.6*i}}return e},t.type="dataZoom.slider",t}(to);function Ii(e){return"vertical"===e?"ns-resize":"ew-resize"}var Di=Li;function Oi(e){e.registerComponentModel(Mi),e.registerComponentView(Di),uo(e)}var ki=2*Math.PI,Ri=Math.PI/180;function Pi(e,t){return Oe(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function zi(e,t){var n=Pi(e,t),o=e.get("center"),i=e.get("radius");Se(i)||(i=[0,i]),Se(o)||(o=[o,o]);var a=b(n.width,t.getWidth()),r=b(n.height,t.getHeight()),s=Math.min(a,r);return{cx:b(o[0],a)+n.x,cy:b(o[1],r)+n.y,r0:b(i[0],s/2),r:b(i[1],s/2)}}function Ei(e,t,n){t.eachSeriesByType(e,(function(e){var t=e.getData(),o=t.mapDimension("value"),i=Pi(e,n),a=zi(e,n),r=a.cx,s=a.cy,l=a.r,u=a.r0,d=-e.get("startAngle")*Ri,h=e.get("minAngle")*Ri,c=0;t.each(o,(function(e){!isNaN(e)&&c++}));var p=t.getSum(o),g=Math.PI/(p||c)*2,f=e.get("clockwise"),v=e.get("roseType"),m=e.get("stillShowZeroSum"),y=t.getDataExtent(o);y[0]=0;var x=ki,b=0,_=d,M=f?1:-1;if(t.setLayout({viewRect:i,r:l}),t.each(o,(function(e,n){var o;if(isNaN(e))t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:f,cx:r,cy:s,r0:u,r:v?NaN:l});else{(o="area"!==v?0===p&&m?g:e*g:ki/c)<h?(o=h,x-=h):b+=e;var i=_+M*o;t.setItemLayout(n,{angle:o,startAngle:_,endAngle:i,clockwise:f,cx:r,cy:s,r0:u,r:v?ie(e,y,[u,l]):l}),_=i}})),x<ki&&c)if(x<=.001){var w=ki/c;t.each(o,(function(e,n){if(!isNaN(e)){var o=t.getItemLayout(n);o.angle=w,o.startAngle=d+M*n*w,o.endAngle=d+M*(n+1)*w}}))}else g=x/b,_=d,t.each(o,(function(e,n){if(!isNaN(e)){var o=t.getItemLayout(n),i=o.angle===h?h:e*g;o.startAngle=_,o.endAngle=_+M*i,_+=M*i}}))}))}function Bi(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var o=e.getData();o.filterSelf((function(e){for(var t=o.getName(e),i=0;i<n.length;i++)if(!n[i].isSelected(t))return!1;return!0}))}}}}var Vi=Math.PI/180;function Zi(e,t,n,o,i,a,r,s,l,u){if(!(e.length<2)){for(var d=e.length,h=0;h<d;h++)if("outer"===e[h].position&&"labelLine"===e[h].labelAlignTo){var c=e[h].label.x-u;e[h].linePoints[1][0]+=c,e[h].label.x=u}S(e,l,l+r)&&function(e){for(var a={list:[],maxY:0},r={list:[],maxY:0},s=0;s<e.length;s++)if("none"===e[s].labelAlignTo){var l=e[s],u=l.label.y>n?r:a,d=Math.abs(l.label.y-n);if(d>=u.maxY){var h=l.label.x-t-l.len2*i,c=o+l.len,g=Math.abs(h)<c?Math.sqrt(d*d/(1-h*h/c/c)):c;u.rB=g,u.maxY=d}u.list.push(l)}p(a),p(r)}(e)}function p(e){for(var a=e.rB,r=a*a,s=0;s<e.list.length;s++){var l=e.list[s],u=Math.abs(l.label.y-n),d=o+l.len,h=d*d,c=Math.sqrt((1-Math.abs(u*u/r))*h),p=t+(c+l.len2)*i,g=p-l.label.x;Ni(l,l.targetTextWidth-g*i,!0),l.label.x=p}}}function Ni(e,t,n){if(void 0===n&&(n=!1),null==e.labelStyleWidth){var o=e.label,i=o.style,a=e.rect,r=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,u=i.overflow,d=a.width+(r?0:l);if(t<d||n){var h=a.height;if(u&&u.match("break")){o.setStyle("backgroundColor",null),o.setStyle("width",t-l);var c=o.getBoundingRect();o.setStyle("width",Math.ceil(c.width)),o.setStyle("backgroundColor",r)}else{var p=t-l,g=t<d?p:n?p>e.unconstrainedWidth?null:p:null;o.setStyle("width",g)}var f=o.getBoundingRect();a.width=f.width;var v=(o.style.margin||0)+2.1;a.height=f.height+v,a.y-=(a.height-h)/2}}}function Wi(e){return"center"===e.position}function Hi(e){var t,o,i=e.getData(),a=[],r=!1,s=(e.get("minShowLabelAngle")||0)*Vi,l=i.getLayout("viewRect"),u=i.getLayout("r"),d=l.width,h=l.x,c=l.y,p=l.height;function g(e){e.ignore=!0}i.each((function(e){var l=i.getItemGraphicEl(e),c=l.shape,p=l.getTextContent(),f=l.getTextGuideLine(),v=i.getItemModel(e),m=v.getModel("label"),y=m.get("position")||v.get(["emphasis","label","position"]),x=m.get("distanceToLabelLine"),_=m.get("alignTo"),M=b(m.get("edgeDistance"),d),w=m.get("bleedMargin"),S=v.getModel("labelLine"),A=S.get("length");A=b(A,d);var T=S.get("length2");if(T=b(T,d),Math.abs(c.endAngle-c.startAngle)<s)return C(p.states,g),void(p.ignore=!0);if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(p)){var L,I,D,O,k=(c.startAngle+c.endAngle)/2,R=Math.cos(k),P=Math.sin(k);t=c.cx,o=c.cy;var z="inside"===y||"inner"===y;if("center"===y)L=c.cx,I=c.cy,O="center";else{var E=(z?(c.r+c.r0)/2*R:c.r*R)+t,B=(z?(c.r+c.r0)/2*P:c.r*P)+o;if(L=E+3*R,I=B+3*P,!z){var V=E+R*(A+u-c.r),Z=B+P*(A+u-c.r),N=V+(R<0?-1:1)*T;L="edge"===_?R<0?h+M:h+d-M:N+(R<0?-x:x),I=Z,D=[[E,B],[V,Z],[N,Z]]}O=z?"center":"edge"===_?R>0?"right":"left":R>0?"left":"right"}var W=Math.PI,H=0,G=m.get("rotate");if(Ne(G))H=G*(W/180);else if("center"===y)H=0;else if("radial"===G||!0===G)H=R<0?-k+W:-k;else if("tangential"===G&&"outside"!==y&&"outer"!==y){var Y=Math.atan2(R,P);Y<0&&(Y=2*W+Y),P>0&&(Y=W+Y),H=Y-W}if(r=!!H,p.x=L,p.y=I,p.rotation=H,p.setStyle({verticalAlign:"middle"}),z){p.setStyle({align:O});var X=p.states.select;X&&(X.x+=p.x,X.y+=p.y)}else{var U=p.getBoundingRect().clone();U.applyTransform(p.getComputedTransform());var F=(p.style.margin||0)+2.1;U.y-=F/2,U.height+=F,a.push({label:p,labelLine:f,position:y,len:A,len2:T,minTurnAngle:S.get("minTurnAngle"),maxSurfaceAngle:S.get("maxSurfaceAngle"),surfaceNormal:new n(R,P),linePoints:D,textAlign:O,labelDistance:x,labelAlignTo:_,edgeDistance:M,bleedMargin:w,rect:U,unconstrainedWidth:U.width,labelStyleWidth:p.style.width})}l.setTextConfig({inside:z})}})),!r&&e.get("avoidLabelOverlap")&&function(e,t,n,o,i,a,r,s){for(var l=[],u=[],d=Number.MAX_VALUE,h=-Number.MAX_VALUE,c=0;c<e.length;c++){var p=e[c].label;Wi(e[c])||(p.x<t?(d=Math.min(d,p.x),l.push(e[c])):(h=Math.max(h,p.x),u.push(e[c])))}for(c=0;c<e.length;c++)if(!Wi(v=e[c])&&v.linePoints){if(null!=v.labelStyleWidth)continue;p=v.label;var g=v.linePoints,f=void 0;f="edge"===v.labelAlignTo?p.x<t?g[2][0]-v.labelDistance-r-v.edgeDistance:r+i-v.edgeDistance-g[2][0]-v.labelDistance:"labelLine"===v.labelAlignTo?p.x<t?d-r-v.bleedMargin:r+i-h-v.bleedMargin:p.x<t?p.x-r-v.bleedMargin:r+i-p.x-v.bleedMargin,v.targetTextWidth=f,Ni(v,f)}for(Zi(u,t,n,o,1,0,a,0,s,h),Zi(l,t,n,o,-1,0,a,0,s,d),c=0;c<e.length;c++){var v;if(!Wi(v=e[c])&&v.linePoints){p=v.label,g=v.linePoints;var m="edge"===v.labelAlignTo,y=p.style.padding,x=y?y[1]+y[3]:0,b=p.style.backgroundColor?0:x,_=v.rect.width+b,M=g[1][0]-g[2][0];m?p.x<t?g[2][0]=r+v.edgeDistance+_+v.labelDistance:g[2][0]=r+i-v.edgeDistance-_-v.labelDistance:(p.x<t?g[2][0]=p.x+v.labelDistance:g[2][0]=p.x-v.labelDistance,g[1][0]=g[2][0]+M),g[1][1]=g[2][1]=p.y}}}(a,t,o,u,d,p,h,c);for(var f=0;f<a.length;f++){var v=a[f],m=v.label,y=v.labelLine,x=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),x&&(C(m.states,g),m.ignore=!0);var _=m.states.select;_&&(_.x+=m.x,_.y+=m.y)}if(y){var M=v.linePoints;x||!M?(C(y.states,g),y.ignore=!0):(Mt(M,v.minTurnAngle),wt(M,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:M}),m.__hostTarget.textGuideLineConfig={anchor:new n(M[0][0],M[0][1])})}}}function Gi(e,t,n){var o=e.get("borderRadius");if(null==o)return n?{cornerRadius:0}:null;Se(o)||(o=[o,o,o,o]);var i=Math.abs(t.r||0-t.r0||0);return{cornerRadius:X(o,(function(e){return We(e,i)}))}}var Yi=function(e){function t(t,n,o){var i=e.call(this)||this;i.z2=2;var a=new ge;return i.setTextContent(a),i.updateData(t,n,o,!0),i}return E(t,e),t.prototype.updateData=function(e,t,n,o){var i=this,a=e.hostModel,r=e.getItemModel(t),s=r.getModel("emphasis"),l=e.getItemLayout(t),u=Me(Gi(r.getModel("itemStyle"),l,!0),l);if(isNaN(u.startAngle))i.setShape(u);else{if(o){i.setShape(u);var d=a.getShallow("animationType");a.ecModel.ssr?(I(i,{scaleX:0,scaleY:0},a,{dataIndex:t,isFrom:!0}),i.originX=u.cx,i.originY=u.cy):"scale"===d?(i.shape.r=l.r0,I(i,{shape:{r:l.r}},a,t)):null!=n?(i.setShape({startAngle:n,endAngle:n}),I(i,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},a,t)):(i.shape.endAngle=l.startAngle,O(i,{shape:{endAngle:l.endAngle}},a,t))}else He(i),O(i,{shape:u},a,t);i.useStyle(e.getItemVisual(t,"style")),Ge(i,r);var h=(l.startAngle+l.endAngle)/2,c=a.get("selectedOffset"),p=Math.cos(h)*c,g=Math.sin(h)*c,f=r.getShallow("cursor");f&&i.attr("cursor",f),this._updateLabel(a,e,t),i.ensureState("emphasis").shape=Me({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},Gi(s.getModel("itemStyle"),l)),Me(i.ensureState("select"),{x:p,y:g,shape:Gi(r.getModel(["select","itemStyle"]),l)}),Me(i.ensureState("blur"),{shape:Gi(r.getModel(["blur","itemStyle"]),l)});var v=i.getTextGuideLine(),m=i.getTextContent();v&&Me(v.ensureState("select"),{x:p,y:g}),Me(m.ensureState("select"),{x:p,y:g}),Ye(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))}},t.prototype._updateLabel=function(e,t,n){var o=this,i=t.getItemModel(n),r=i.getModel("labelLine"),s=t.getItemVisual(n,"style"),l=s&&s.fill,u=s&&s.opacity;Xe(o,Ue(i),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:l,defaultOpacity:u,defaultText:e.getFormattedLabel(n,"normal")||t.getName(n)});var d=o.getTextContent();o.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var h=e.get(["label","position"]);if("outside"!==h&&"outer"!==h)o.removeTextGuideLine();else{var c=this.getTextGuideLine();c||(c=new a,this.setTextGuideLine(c)),Ct(this,Tt(i),{stroke:l,opacity:Fe(r.get(["lineStyle","opacity"]),u,1)})}},t}(je),Xi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return E(t,e),t.prototype.init=function(){var e=new G;this._sectorGroup=e},t.prototype.render=function(e,t,n,o){var i,a=e.getData(),r=this._data,s=this.group;if(!r&&a.count()>0){for(var l=a.getItemLayout(0),u=1;isNaN(l&&l.startAngle)&&u<a.count();++u)l=a.getItemLayout(u);l&&(i=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===a.count()&&e.get("showEmptyCircle")){var d=new je({shape:zi(e,n)});d.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,s.add(d)}a.diff(r).add((function(e){var t=new Yi(a,e,i);a.setItemGraphicEl(e,t),s.add(t)})).update((function(e,t){var n=r.getItemGraphicEl(t);n.updateData(a,e,i),n.off("click"),s.add(n),a.setItemGraphicEl(e,n)})).remove((function(t){var n=r.getItemGraphicEl(t);qe(n,e,t)})).execute(),Hi(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=a)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var o=e[0]-n.cx,i=e[1]-n.cy,a=Math.sqrt(o*o+i*i);return a<=n.r&&a>=n.r0}},t.type="pie",t}(Ke),Ui=Xi;function Fi(e,t,n){t=Se(t)&&{coordDimensions:t}||Me({encodeDefine:e.getEncode()},t);var o=e.getSource(),i=$e(o,t).dimensions,a=new Je(i,e);return a.initData(o,n),a}var ji=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),qi=e("L",ji),Ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new qi(B(this.getData,this),B(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return Fi(this,{coordDimensions:["value"],encodeDefaulter:j(Qe,this)})},t.prototype.getDataParams=function(t){var n=this.getData(),o=e.prototype.getDataParams.call(this,t),i=[];return n.each(n.mapDimension("value"),(function(e){i.push(e)})),o.percent=et(i,t,n.hostModel.get("percentPrecision")),o.$vars.push("percent"),o},t.prototype._defaultLabelLine=function(e){tt(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(nt),$i=Ki}}}));
