import{a0 as Tr,a4 as E,al as aa,am as Ue,an as et,J as me,ao as ra,ap as Cr,a9 as Lr,aq as na,a8 as vt,ar as Dr,as as Rr,at as Ne,q as Pe,a3 as Mt,au as ne,av as Ir,O as Le,v as N,aw as Or,U as Fe,ax as Pr,ay as Ga,az as Er,x as M,aA as kr,aB as Br,ag as De,aC as K,aD as $e,aE as Zr,aa as Vr,aF as tt,aG as zr,_ as P,aH as R,F as j,aI as ia,aJ as Re,aK as je,aL as Wa,Q as ce,aM as q,E as W,ae as Ha,a6 as Ya,Y as V,a7 as re,aN as Fa,aO as Et,aP as Nr,af as ee,aQ as Gr,S as qe,C as kt,$ as Bt,aR as B,aS as Wr,aT as Hr,aU as Yr,aV as Ce,M as Fr,aW as Xr,aX as ht,aY as ct,aZ as Ur,Z as fe,a_ as $r,a$ as jr,b0 as qr,s as Kr,b1 as Jr,b2 as Qr,b3 as oa,aj as J,K as sa,w as de,b4 as Xa,b5 as en,b6 as tn,u as wt,N as At,b7 as la,b8 as Zt,b9 as Ua,ba as $a,bb as an,bc as rn,bd as nn,be as ua,bf as on,j as va,bg as ja,bh as sn,bi as ln,bj as un,bk as vn,bl as hn,bm as cn,bn as fn,P as qa,bo as dn,bp as gn,bq as pn,br as mn,bs as yn,bt as xn,bu as bn,bv as _n,bw as Sn}from"./installCanvasRenderer.8d905dcd.js";var Me=Math.PI*2,ae=Tr.CMD,Mn=["top","right","bottom","left"];function wn(r,a,e,t,n){var i=e.width,o=e.height;switch(r){case"top":t.set(e.x+i/2,e.y-a),n.set(0,-1);break;case"bottom":t.set(e.x+i/2,e.y+o+a),n.set(0,1);break;case"left":t.set(e.x-a,e.y+o/2),n.set(-1,0);break;case"right":t.set(e.x+i+a,e.y+o/2),n.set(1,0);break}}function An(r,a,e,t,n,i,o,s,l){o-=r,s-=a;var v=Math.sqrt(o*o+s*s);o/=v,s/=v;var u=o*e+r,c=s*e+a;if(Math.abs(t-n)%Me<1e-4)return l[0]=u,l[1]=c,v-e;if(i){var d=t;t=Ne(n),n=Ne(d)}else t=Ne(t),n=Ne(n);t>n&&(n+=Me);var h=Math.atan2(s,o);if(h<0&&(h+=Me),h>=t&&h<=n||h+Me>=t&&h+Me<=n)return l[0]=u,l[1]=c,v-e;var f=e*Math.cos(t)+r,g=e*Math.sin(t)+a,p=e*Math.cos(n)+r,y=e*Math.sin(n)+a,x=(f-o)*(f-o)+(g-s)*(g-s),m=(p-o)*(p-o)+(y-s)*(y-s);return x<m?(l[0]=f,l[1]=g,Math.sqrt(x)):(l[0]=p,l[1]=y,Math.sqrt(m))}function Ke(r,a,e,t,n,i,o,s){var l=n-r,v=i-a,u=e-r,c=t-a,d=Math.sqrt(u*u+c*c);u/=d,c/=d;var h=l*u+v*c,f=h/d;s&&(f=Math.min(Math.max(f,0),1)),f*=d;var g=o[0]=r+f*u,p=o[1]=a+f*c;return Math.sqrt((g-n)*(g-n)+(p-i)*(p-i))}function Ka(r,a,e,t,n,i,o){e<0&&(r=r+e,e=-e),t<0&&(a=a+t,t=-t);var s=r+e,l=a+t,v=o[0]=Math.min(Math.max(n,r),s),u=o[1]=Math.min(Math.max(i,a),l);return Math.sqrt((v-n)*(v-n)+(u-i)*(u-i))}var H=[];function Tn(r,a,e){var t=Ka(a.x,a.y,a.width,a.height,r.x,r.y,H);return e.set(H[0],H[1]),t}function Cn(r,a,e){for(var t=0,n=0,i=0,o=0,s,l,v=1/0,u=a.data,c=r.x,d=r.y,h=0;h<u.length;){var f=u[h++];h===1&&(t=u[h],n=u[h+1],i=t,o=n);var g=v;switch(f){case ae.M:i=u[h++],o=u[h++],t=i,n=o;break;case ae.L:g=Ke(t,n,u[h],u[h+1],c,d,H,!0),t=u[h++],n=u[h++];break;case ae.C:g=Rr(t,n,u[h++],u[h++],u[h++],u[h++],u[h],u[h+1],c,d,H),t=u[h++],n=u[h++];break;case ae.Q:g=Dr(t,n,u[h++],u[h++],u[h],u[h+1],c,d,H),t=u[h++],n=u[h++];break;case ae.A:var p=u[h++],y=u[h++],x=u[h++],m=u[h++],_=u[h++],b=u[h++];h+=1;var A=!!(1-u[h++]);s=Math.cos(_)*x+p,l=Math.sin(_)*m+y,h<=1&&(i=s,o=l);var T=(c-p)*m/x+p;g=An(p,y,m,_,_+b,A,T,d,H),t=Math.cos(_+b)*x+p,n=Math.sin(_+b)*m+y;break;case ae.R:i=t=u[h++],o=n=u[h++];var S=u[h++],w=u[h++];g=Ka(i,o,S,w,c,d,H);break;case ae.Z:g=Ke(t,n,i,o,c,d,H,!0),t=i,n=o;break}g<v&&(v=g,e.set(H[0],H[1]))}return v}var F=new E,C=new E,O=new E,U=new E,X=new E;function ha(r,a){if(!!r){var e=r.getTextGuideLine(),t=r.getTextContent();if(!!(t&&e)){var n=r.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],o=n.candidates||Mn,s=t.getBoundingRect().clone();s.applyTransform(t.getComputedTransform());var l=1/0,v=n.anchor,u=r.getComputedTransform(),c=u&&Cr([],u),d=a.get("length2")||0;v&&O.copy(v);for(var h=0;h<o.length;h++){var f=o[h];wn(f,0,s,F,U),E.scaleAndAdd(C,F,U,d),C.transform(c);var g=r.getBoundingRect(),p=v?v.distance(C):r instanceof Lr?Cn(C,r.path,O):Tn(C,g,O);p<l&&(l=p,C.transform(u),O.transform(u),O.toArray(i[0]),C.toArray(i[1]),F.toArray(i[2]))}Ja(i,a.get("minTurnAngle")),e.setShape({points:i})}}}var Je=[],Z=new E;function Ja(r,a){if(a<=180&&a>0){a=a/180*Math.PI,F.fromArray(r[0]),C.fromArray(r[1]),O.fromArray(r[2]),E.sub(U,F,C),E.sub(X,O,C);var e=U.len(),t=X.len();if(!(e<.001||t<.001)){U.scale(1/e),X.scale(1/t);var n=U.dot(X),i=Math.cos(a);if(i<n){var o=Ke(C.x,C.y,O.x,O.y,F.x,F.y,Je,!1);Z.fromArray(Je),Z.scaleAndAdd(X,o/Math.tan(Math.PI-a));var s=O.x!==C.x?(Z.x-C.x)/(O.x-C.x):(Z.y-C.y)/(O.y-C.y);if(isNaN(s))return;s<0?E.copy(Z,C):s>1&&E.copy(Z,O),Z.toArray(r[1])}}}}function Ln(r,a,e){if(e<=180&&e>0){e=e/180*Math.PI,F.fromArray(r[0]),C.fromArray(r[1]),O.fromArray(r[2]),E.sub(U,C,F),E.sub(X,O,C);var t=U.len(),n=X.len();if(!(t<.001||n<.001)){U.scale(1/t),X.scale(1/n);var i=U.dot(a),o=Math.cos(e);if(i<o){var s=Ke(C.x,C.y,O.x,O.y,F.x,F.y,Je,!1);Z.fromArray(Je);var l=Math.PI/2,v=Math.acos(X.dot(a)),u=l+v-e;if(u>=l)E.copy(Z,O);else{Z.scaleAndAdd(X,s/Math.tan(Math.PI/2-u));var c=O.x!==C.x?(Z.x-C.x)/(O.x-C.x):(Z.y-C.y)/(O.y-C.y);if(isNaN(c))return;c<0?E.copy(Z,C):c>1&&E.copy(Z,O)}Z.toArray(r[1])}}}}function ca(r,a,e,t){var n=e==="normal",i=n?r:r.ensureState(e);i.ignore=a;var o=t.get("smooth");o&&o===!0&&(o=.3),i.shape=i.shape||{},o>0&&(i.shape.smooth=o);var s=t.getModel("lineStyle").getLineStyle();n?r.useStyle(s):i.style=s}function Dn(r,a){var e=a.smooth,t=a.points;if(!!t)if(r.moveTo(t[0][0],t[0][1]),e>0&&t.length>=3){var n=na(t[0],t[1]),i=na(t[1],t[2]);if(!n||!i){r.lineTo(t[1][0],t[1][1]),r.lineTo(t[2][0],t[2][1]);return}var o=Math.min(n,i)*e,s=vt([],t[1],t[0],o/n),l=vt([],t[1],t[2],o/i),v=vt([],s,l,.5);r.bezierCurveTo(s[0],s[1],s[0],s[1],v[0],v[1]),r.bezierCurveTo(l[0],l[1],l[0],l[1],t[2][0],t[2][1])}else for(var u=1;u<t.length;u++)r.lineTo(t[u][0],t[u][1])}function Qa(r,a,e){var t=r.getTextGuideLine(),n=r.getTextContent();if(!n){t&&r.removeTextGuideLine();return}for(var i=a.normal,o=i.get("show"),s=n.ignore,l=0;l<aa.length;l++){var v=aa[l],u=a[v],c=v==="normal";if(u){var d=u.get("show"),h=c?s:Ue(n.states[v]&&n.states[v].ignore,s);if(h||!Ue(d,o)){var f=c?t:t&&t.states.normal;f&&(f.ignore=!0);continue}t||(t=new et,r.setTextGuideLine(t),!c&&(s||!o)&&ca(t,!0,"normal",a.normal),r.stateProxy&&(t.stateProxy=r.stateProxy)),ca(t,!1,v,u)}}if(t){me(t.style,e),t.style.fill=null;var g=i.get("showAbove"),p=r.textGuideLineConfig=r.textGuideLineConfig||{};p.showAbove=g||!1,t.buildPath=Dn}}function er(r,a){a=a||"labelLine";for(var e={normal:r.getModel(a)},t=0;t<ra.length;t++){var n=ra[t];e[n]=r.getModel([n,a])}return e}function Rn(r){if(r){for(var a=[],e=0;e<r.length;e++)a.push(r[e].slice());return a}}function In(r,a){var e=r.label,t=a&&a.getTextGuideLine();return{dataIndex:r.dataIndex,dataType:r.dataType,seriesIndex:r.seriesModel.seriesIndex,text:r.label.style.text,rect:r.hostRect,labelRect:r.rect,align:e.style.align,verticalAlign:e.style.verticalAlign,labelLinePoints:Rn(t&&t.shape.points)}}var fa=["align","verticalAlign","width","height","fontSize"],z=new Vr,ft=Pe(),On=Pe();function Ge(r,a,e){for(var t=0;t<e.length;t++){var n=e[t];a[n]!=null&&(r[n]=a[n])}}var We=["x","y","rotation"],Pn=function(){function r(){this._labelList=[],this._chartViewList=[]}return r.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},r.prototype._addLabel=function(a,e,t,n,i){var o=n.style,s=n.__hostTarget,l=s.textConfig||{},v=n.getComputedTransform(),u=n.getBoundingRect().plain();Mt.applyTransform(u,u,v),v?z.setLocalTransform(v):(z.x=z.y=z.rotation=z.originX=z.originY=0,z.scaleX=z.scaleY=1);var c=n.__hostTarget,d;if(c){d=c.getBoundingRect().plain();var h=c.getComputedTransform();Mt.applyTransform(d,d,h)}var f=d&&c.getTextGuideLine();this._labelList.push({label:n,labelLine:f,seriesModel:t,dataIndex:a,dataType:e,layoutOption:i,computedLayoutOption:null,rect:u,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:f&&f.ignore,x:z.x,y:z.y,scaleX:z.scaleX,scaleY:z.scaleY,rotation:z.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:n.cursor,attachedPos:l.position,attachedRot:l.rotation}})},r.prototype.addLabelsOfSeries=function(a){var e=this;this._chartViewList.push(a);var t=a.__model,n=t.get("labelLayout");!(ne(n)||Ir(n).length)||a.group.traverse(function(i){if(i.ignore)return!0;var o=i.getTextContent(),s=Le(i);o&&!o.disableLabelLayout&&e._addLabel(s.dataIndex,s.dataType,t,o,n)})},r.prototype.updateLayoutConfig=function(a){var e=a.getWidth(),t=a.getHeight();function n(m,_){return function(){ha(m,_)}}for(var i=0;i<this._labelList.length;i++){var o=this._labelList[i],s=o.label,l=s.__hostTarget,v=o.defaultAttr,u=void 0;ne(o.layoutOption)?u=o.layoutOption(In(o,l)):u=o.layoutOption,u=u||{},o.computedLayoutOption=u;var c=Math.PI/180;l&&l.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:v.attachedPos,rotation:u.rotate!=null?u.rotate*c:v.attachedRot,offset:[u.dx||0,u.dy||0]});var d=!1;if(u.x!=null?(s.x=N(u.x,e),s.setStyle("x",0),d=!0):(s.x=v.x,s.setStyle("x",v.style.x)),u.y!=null?(s.y=N(u.y,t),s.setStyle("y",0),d=!0):(s.y=v.y,s.setStyle("y",v.style.y)),u.labelLinePoints){var h=l.getTextGuideLine();h&&(h.setShape({points:u.labelLinePoints}),d=!1)}var f=ft(s);f.needsUpdateLabelLine=d,s.rotation=u.rotate!=null?u.rotate*c:v.rotation,s.scaleX=v.scaleX,s.scaleY=v.scaleY;for(var g=0;g<fa.length;g++){var p=fa[g];s.setStyle(p,u[p]!=null?u[p]:v.style[p])}if(u.draggable){if(s.draggable=!0,s.cursor="move",l){var y=o.seriesModel;if(o.dataIndex!=null){var x=o.seriesModel.getData(o.dataType);y=x.getItemModel(o.dataIndex)}s.on("drag",n(l,y.getModel("labelLine")))}}else s.off("drag"),s.cursor=v.cursor}},r.prototype.layout=function(a){var e=a.getWidth(),t=a.getHeight(),n=Or(this._labelList),i=Fe(n,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=Fe(n,function(l){return l.layoutOption.moveOverlap==="shiftY"});Pr(i,0,e),Ga(o,0,t);var s=Fe(n,function(l){return l.layoutOption.hideOverlap});Er(s)},r.prototype.processLabelsOverall=function(){var a=this;M(this._chartViewList,function(e){var t=e.__model,n=e.ignoreLabelLineUpdate,i=t.isAnimationEnabled();e.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!n,l=o.getTextContent();!s&&l&&(s=ft(l).needsUpdateLabelLine),s&&a._updateLabelLine(o,t),i&&a._animateLabels(o,t)})})},r.prototype._updateLabelLine=function(a,e){var t=a.getTextContent(),n=Le(a),i=n.dataIndex;if(t&&i!=null){var o=e.getData(n.dataType),s=o.getItemModel(i),l={},v=o.getItemVisual(i,"style"),u=o.getVisual("drawType");l.stroke=v[u];var c=s.getModel("labelLine");Qa(a,er(s),l),ha(a,c)}},r.prototype._animateLabels=function(a,e){var t=a.getTextContent(),n=a.getTextGuideLine();if(t&&(a.forceLabelAnimation||!t.ignore&&!t.invisible&&!a.disableLabelAnimation&&!kr(a))){var i=ft(t),o=i.oldLayout,s=Le(a),l=s.dataIndex,v={x:t.x,y:t.y,rotation:t.rotation},u=e.getData(s.dataType);if(o){t.attr(o);var d=a.prevStates;d&&(K(d,"select")>=0&&t.attr(i.oldLayoutSelect),K(d,"emphasis")>=0&&t.attr(i.oldLayoutEmphasis)),$e(t,v,e,l)}else if(t.attr(v),!Br(t).valueAnimation){var c=Ue(t.style.opacity,1);t.style.opacity=0,De(t,{style:{opacity:c}},e,l)}if(i.oldLayout=v,t.states.select){var h=i.oldLayoutSelect={};Ge(h,v,We),Ge(h,t.states.select,We)}if(t.states.emphasis){var f=i.oldLayoutEmphasis={};Ge(f,v,We),Ge(f,t.states.emphasis,We)}Zr(t,l,u,e,e)}if(n&&!n.ignore&&!n.invisible){var i=On(n),o=i.oldLayout,g={points:n.shape.points};o?(n.attr({shape:o}),$e(n,{shape:g},e)):(n.setShape(g),n.style.strokePercent=0,De(n,{style:{strokePercent:1}},e)),i.oldLayout=g}},r}(),En=Pn,dt=Pe();function Uo(r){r.registerUpdateLifecycle("series:beforeupdate",function(a,e,t){var n=dt(e).labelManager;n||(n=dt(e).labelManager=new En),n.clearLabels()}),r.registerUpdateLifecycle("series:layoutlabels",function(a,e,t){var n=dt(e).labelManager;t.updatedSeries.forEach(function(i){n.addLabelsOfSeries(e.getViewOfSeriesModel(i))}),n.updateLayoutConfig(e),n.layout(e),n.processLabelsOverall()})}var da="\0_ec_interaction_mutex";function kn(r,a,e){var t=Vt(r);t[a]=e}function Bn(r,a,e){var t=Vt(r),n=t[a];n===e&&(t[a]=null)}function ga(r,a){return!!Vt(r)[a]}function Vt(r){return r[da]||(r[da]={})}tt({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},zr);var Zn=function(r){P(a,r);function a(e){var t=r.call(this)||this;t._zr=e;var n=R(t._mousedownHandler,t),i=R(t._mousemoveHandler,t),o=R(t._mouseupHandler,t),s=R(t._mousewheelHandler,t),l=R(t._pinchHandler,t);return t.enable=function(v,u){this.disable(),this._opt=me(j(u)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),v==null&&(v=!0),(v===!0||v==="move"||v==="pan")&&(e.on("mousedown",n),e.on("mousemove",i),e.on("mouseup",o)),(v===!0||v==="scale"||v==="zoom")&&(e.on("mousewheel",s),e.on("pinch",l))},t.disable=function(){e.off("mousedown",n),e.off("mousemove",i),e.off("mouseup",o),e.off("mousewheel",s),e.off("pinch",l)},t}return a.prototype.isDragging=function(){return this._dragging},a.prototype.isPinching=function(){return this._pinching},a.prototype.setPointerChecker=function(e){this.pointerChecker=e},a.prototype.dispose=function(){this.disable()},a.prototype._mousedownHandler=function(e){if(!(ia(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}},a.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!Xe("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||ga(this._zr,"globalPan"))){var t=e.offsetX,n=e.offsetY,i=this._x,o=this._y,s=t-i,l=n-o;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&je(e.event),tr(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:i,oldY:o,newX:t,newY:n,isAvailableBehavior:null})}},a.prototype._mouseupHandler=function(e){ia(e)||(this._dragging=!1)},a.prototype._mousewheelHandler=function(e){var t=Xe("zoomOnMouseWheel",e,this._opt),n=Xe("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,o=Math.abs(i),s=e.offsetX,l=e.offsetY;if(!(i===0||!t&&!n)){if(t){var v=o>3?1.4:o>1?1.2:1.1,u=i>0?v:1/v;gt(this,"zoom","zoomOnMouseWheel",e,{scale:u,originX:s,originY:l,isAvailableBehavior:null})}if(n){var c=Math.abs(i),d=(i>0?1:-1)*(c>3?.4:c>1?.15:.05);gt(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:d,originX:s,originY:l,isAvailableBehavior:null})}}},a.prototype._pinchHandler=function(e){if(!ga(this._zr,"globalPan")){var t=e.pinchScale>1?1.1:1/1.1;gt(this,"zoom",null,e,{scale:t,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},a}(Wa);function gt(r,a,e,t,n){r.pointerChecker&&r.pointerChecker(t,n.originX,n.originY)&&(je(t.event),tr(r,a,e,t,n))}function tr(r,a,e,t,n){n.isAvailableBehavior=R(Xe,null,e,t),r.trigger(a,n)}function Xe(r,a,e){var t=e[r];return!r||t&&(!Re(t)||a.event[t+"Key"])}var Vn=Zn,zn={axisPointer:1,tooltip:1,brush:1};function Nn(r,a,e){var t=a.getComponentByElement(r.topTarget),n=t&&t.coordinateSystem;return t&&t!==e&&!zn.hasOwnProperty(t.mainType)&&n&&n.model!==e}function Ee(r,a,e,t,n,i){r=r||0;var o=e[1]-e[0];if(n!=null&&(n=ve(n,[0,o])),i!=null&&(i=Math.max(i,n!=null?n:0)),t==="all"){var s=Math.abs(a[1]-a[0]);s=ve(s,[0,o]),n=i=ve(s,[n,i]),t=0}a[0]=ve(a[0],e),a[1]=ve(a[1],e);var l=pt(a,t);a[t]+=r;var v=n||0,u=e.slice();l.sign<0?u[0]+=v:u[1]-=v,a[t]=ve(a[t],u);var c;return c=pt(a,t),n!=null&&(c.sign!==l.sign||c.span<n)&&(a[1-t]=a[t]+l.sign*n),c=pt(a,t),i!=null&&c.span>i&&(a[1-t]=a[t]+c.sign*i),a}function pt(r,a){var e=r[a]-r[1-a];return{span:Math.abs(e),sign:e>0?-1:e<0?1:a?-1:1}}function ve(r,a){return Math.min(a[1]!=null?a[1]:1/0,Math.max(a[0]!=null?a[0]:-1/0,r))}var ie=!0,Ie=Math.min,ge=Math.max,Gn=Math.pow,Wn=1e4,Hn=6,Yn=6,pa="globalPan",Fn={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Xn={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},ma={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Un=0,$n=function(r){P(a,r);function a(e){var t=r.call(this)||this;return t._track=[],t._covers=[],t._handlers={},t._zr=e,t.group=new ce,t._uid="brushController_"+Un++,M(ti,function(n,i){this._handlers[i]=R(n,this)},t),t}return a.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},a.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||kn(t,pa,this._uid),M(this._handlers,function(n,i){t.on(i,n)}),this._brushType=e.brushType,this._brushOption=q(j(ma),e,!0)},a.prototype._doDisableBrush=function(){var e=this._zr;Bn(e,pa,this._uid),M(this._handlers,function(t,n){e.off(n,t)}),this._brushType=this._brushOption=null},a.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};M(e,function(n){t[n.panelId]=j(n)})}else this._panels=null;return this},a.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},a.prototype.updateCovers=function(e){e=W(e,function(d){return q(j(ma),d,!0)});var t="\0-brush-index-",n=this._covers,i=this._covers=[],o=this,s=this._creatingCover;return new Ha(n,e,v,l).add(u).update(u).remove(c).execute(),this;function l(d,h){return(d.id!=null?d.id:t+h)+"-"+d.brushType}function v(d,h){return l(d.__brushOption,h)}function u(d,h){var f=e[d];if(h!=null&&n[h]===s)i[d]=n[h];else{var g=i[d]=h!=null?(n[h].__brushOption=f,n[h]):rr(o,ar(o,f));zt(o,g)}}function c(d){n[d]!==s&&o.group.remove(n[d])}},a.prototype.unmount=function(){return this.enableBrush(!1),Tt(this),this._zr.remove(this.group),this},a.prototype.dispose=function(){this.unmount(),this.off()},a}(Wa);function ar(r,a){var e=at[a.brushType].createCover(r,a);return e.__brushOption=a,ir(e,a),r.group.add(e),e}function rr(r,a){var e=Nt(a);return e.endCreating&&(e.endCreating(r,a),ir(a,a.__brushOption)),a}function nr(r,a){var e=a.__brushOption;Nt(a).updateCoverShape(r,a,e.range,e)}function ir(r,a){var e=a.z;e==null&&(e=Wn),r.traverse(function(t){t.z=e,t.z2=e})}function zt(r,a){Nt(a).updateCommon(r,a),nr(r,a)}function Nt(r){return at[r.__brushOption.brushType]}function Gt(r,a,e){var t=r._panels;if(!t)return ie;var n,i=r._transform;return M(t,function(o){o.isTargetByCursor(a,e,i)&&(n=o)}),n}function or(r,a){var e=r._panels;if(!e)return ie;var t=a.__brushOption.panelId;return t!=null?e[t]:ie}function Tt(r){var a=r._covers,e=a.length;return M(a,function(t){r.group.remove(t)},r),a.length=0,!!e}function oe(r,a){var e=W(r._covers,function(t){var n=t.__brushOption,i=j(n.range);return{brushType:n.brushType,panelId:n.panelId,range:i}});r.trigger("brush",{areas:e,isEnd:!!a.isEnd,removeOnClick:!!a.removeOnClick})}function jn(r){var a=r._track;if(!a.length)return!1;var e=a[a.length-1],t=a[0],n=e[0]-t[0],i=e[1]-t[1],o=Gn(n*n+i*i,.5);return o>Hn}function sr(r){var a=r.length-1;return a<0&&(a=0),[r[0],r[a]]}function lr(r,a,e,t){var n=new ce;return n.add(new re({name:"main",style:Wt(e),silent:!0,draggable:!0,cursor:"move",drift:V(ya,r,a,n,["n","s","w","e"]),ondragend:V(oe,a,{isEnd:!0})})),M(t,function(i){n.add(new re({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:V(ya,r,a,n,i),ondragend:V(oe,a,{isEnd:!0})}))}),n}function ur(r,a,e,t){var n=t.brushStyle.lineWidth||0,i=ge(n,Yn),o=e[0][0],s=e[1][0],l=o-n/2,v=s-n/2,u=e[0][1],c=e[1][1],d=u-i+n/2,h=c-i+n/2,f=u-o,g=c-s,p=f+n,y=g+n;$(r,a,"main",o,s,f,g),t.transformable&&($(r,a,"w",l,v,i,y),$(r,a,"e",d,v,i,y),$(r,a,"n",l,v,p,i),$(r,a,"s",l,h,p,i),$(r,a,"nw",l,v,i,i),$(r,a,"ne",d,v,i,i),$(r,a,"sw",l,h,i,i),$(r,a,"se",d,h,i,i))}function Ct(r,a){var e=a.__brushOption,t=e.transformable,n=a.childAt(0);n.useStyle(Wt(e)),n.attr({silent:!t,cursor:t?"move":"default"}),M([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=a.childOfName(i.join("")),s=i.length===1?Lt(r,i[0]):Kn(r,i);o&&o.attr({silent:!t,invisible:!t,cursor:t?Xn[s]+"-resize":null})})}function $(r,a,e,t,n,i,o){var s=a.childOfName(e);s&&s.setShape(Qn(Ht(r,a,[[t,n],[t+i,n+o]])))}function Wt(r){return me({strokeNoScale:!0},r.brushStyle)}function vr(r,a,e,t){var n=[Ie(r,e),Ie(a,t)],i=[ge(r,e),ge(a,t)];return[[n[0],i[0]],[n[1],i[1]]]}function qn(r){return Et(r.group)}function Lt(r,a){var e={w:"left",e:"right",n:"top",s:"bottom"},t={left:"w",right:"e",top:"n",bottom:"s"},n=Fa(e[a],qn(r));return t[n]}function Kn(r,a){var e=[Lt(r,a[0]),Lt(r,a[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function ya(r,a,e,t,n,i){var o=e.__brushOption,s=r.toRectRange(o.range),l=hr(a,n,i);M(t,function(v){var u=Fn[v];s[u[0]][u[1]]+=l[u[0]]}),o.range=r.fromRectRange(vr(s[0][0],s[1][0],s[0][1],s[1][1])),zt(a,e),oe(a,{isEnd:!1})}function Jn(r,a,e,t){var n=a.__brushOption.range,i=hr(r,e,t);M(n,function(o){o[0]+=i[0],o[1]+=i[1]}),zt(r,a),oe(r,{isEnd:!1})}function hr(r,a,e){var t=r.group,n=t.transformCoordToLocal(a,e),i=t.transformCoordToLocal(0,0);return[n[0]-i[0],n[1]-i[1]]}function Ht(r,a,e){var t=or(r,a);return t&&t!==ie?t.clipPath(e,r._transform):j(e)}function Qn(r){var a=Ie(r[0][0],r[1][0]),e=Ie(r[0][1],r[1][1]),t=ge(r[0][0],r[1][0]),n=ge(r[0][1],r[1][1]);return{x:a,y:e,width:t-a,height:n-e}}function ei(r,a,e){if(!(!r._brushType||ai(r,a.offsetX,a.offsetY))){var t=r._zr,n=r._covers,i=Gt(r,a,e);if(!r._dragging)for(var o=0;o<n.length;o++){var s=n[o].__brushOption;if(i&&(i===ie||s.panelId===i.panelId)&&at[s.brushType].contain(n[o],e[0],e[1]))return}i&&t.setCursorStyle("crosshair")}}function Dt(r){var a=r.event;a.preventDefault&&a.preventDefault()}function Rt(r,a,e){return r.childOfName("main").contain(a,e)}function cr(r,a,e,t){var n=r._creatingCover,i=r._creatingPanel,o=r._brushOption,s;if(r._track.push(e.slice()),jn(r)||n){if(i&&!n){o.brushMode==="single"&&Tt(r);var l=j(o);l.brushType=xa(l.brushType,i),l.panelId=i===ie?null:i.panelId,n=r._creatingCover=ar(r,l),r._covers.push(n)}if(n){var v=at[xa(r._brushType,i)],u=n.__brushOption;u.range=v.getCreatingRange(Ht(r,n,r._track)),t&&(rr(r,n),v.updateCommon(r,n)),nr(r,n),s={isEnd:t}}}else t&&o.brushMode==="single"&&o.removeOnClick&&Gt(r,a,e)&&Tt(r)&&(s={isEnd:t,removeOnClick:!0});return s}function xa(r,a){return r==="auto"?a.defaultBrushType:r}var ti={mousedown:function(r){if(this._dragging)ba(this,r);else if(!r.target||!r.target.draggable){Dt(r);var a=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var e=this._creatingPanel=Gt(this,r,a);e&&(this._dragging=!0,this._track=[a.slice()])}},mousemove:function(r){var a=r.offsetX,e=r.offsetY,t=this.group.transformCoordToLocal(a,e);if(ei(this,r,t),this._dragging){Dt(r);var n=cr(this,r,t,!1);n&&oe(this,n)}},mouseup:function(r){ba(this,r)}};function ba(r,a){if(r._dragging){Dt(a);var e=a.offsetX,t=a.offsetY,n=r.group.transformCoordToLocal(e,t),i=cr(r,a,n,!0);r._dragging=!1,r._track=[],r._creatingCover=null,i&&oe(r,i)}}function ai(r,a,e){var t=r._zr;return a<0||a>t.getWidth()||e<0||e>t.getHeight()}var at={lineX:_a(0),lineY:_a(1),rect:{createCover:function(r,a){function e(t){return t}return lr({toRectRange:e,fromRectRange:e},r,a,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var a=sr(r);return vr(a[1][0],a[1][1],a[0][0],a[0][1])},updateCoverShape:function(r,a,e,t){ur(r,a,e,t)},updateCommon:Ct,contain:Rt},polygon:{createCover:function(r,a){var e=new ce;return e.add(new et({name:"main",style:Wt(a),silent:!0})),e},getCreatingRange:function(r){return r},endCreating:function(r,a){a.remove(a.childAt(0)),a.add(new Ya({name:"main",draggable:!0,drift:V(Jn,r,a),ondragend:V(oe,r,{isEnd:!0})}))},updateCoverShape:function(r,a,e,t){a.childAt(0).setShape({points:Ht(r,a,e)})},updateCommon:Ct,contain:Rt}};function _a(r){return{createCover:function(a,e){return lr({toRectRange:function(t){var n=[t,[0,100]];return r&&n.reverse(),n},fromRectRange:function(t){return t[r]}},a,e,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(a){var e=sr(a),t=Ie(e[0][r],e[1][r]),n=ge(e[0][r],e[1][r]);return[t,n]},updateCoverShape:function(a,e,t,n){var i,o=or(a,e);if(o!==ie&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(r);else{var s=a._zr;i=[0,[s.getWidth(),s.getHeight()][1-r]]}var l=[t,i];r&&l.reverse(),ur(a,e,l,n)},updateCommon:Ct,contain:Rt}}var ri=$n;function ni(r){return r=Yt(r),function(a){return Nr(a,r)}}function ii(r,a){return r=Yt(r),function(e){var t=a!=null?a:e,n=t?r.width:r.height,i=t?r.x:r.y;return[i,i+(n||0)]}}function oi(r,a,e){var t=Yt(r);return function(n,i){return t.contain(i[0],i[1])&&!Nn(n,a,e)}}function Yt(r){return Mt.create(r)}var Sa=["x","y","radius","angle","single"],si=["cartesian2d","polar","singleAxis"];function li(r){var a=r.get("coordinateSystem");return K(si,a)>=0}function Q(r){return r+"Axis"}function ui(r,a){var e=ee(),t=[],n=ee();r.eachComponent({mainType:"dataZoom",query:a},function(u){n.get(u.uid)||s(u)});var i;do i=!1,r.eachComponent("dataZoom",o);while(i);function o(u){!n.get(u.uid)&&l(u)&&(s(u),i=!0)}function s(u){n.set(u.uid,!0),t.push(u),v(u)}function l(u){var c=!1;return u.eachTargetAxis(function(d,h){var f=e.get(d);f&&f[h]&&(c=!0)}),c}function v(u){u.eachTargetAxis(function(c,d){(e.get(c)||e.set(c,[]))[d]=!0})}return t}function fr(r){var a=r.ecModel,e={infoList:[],infoMap:ee()};return r.eachTargetAxis(function(t,n){var i=a.getComponent(Q(t),n);if(!!i){var o=i.getCoordSysModel();if(!!o){var s=o.uid,l=e.infoMap.get(s);l||(l={model:o,axisModels:[]},e.infoList.push(l),e.infoMap.set(s,l)),l.axisModels.push(i)}}}),e}var mt=function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(a){this.indexMap[a]||(this.indexList.push(a),this.indexMap[a]=!0)},r}(),vi=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return a.prototype.init=function(e,t,n){var i=Ma(e);this.settledOption=i,this.mergeDefaultAndTheme(e,n),this._doInit(i)},a.prototype.mergeOption=function(e){var t=Ma(e);q(this.option,e,!0),q(this.settledOption,t,!0),this._doInit(t)},a.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;M([["start","startValue"],["end","endValue"]],function(i,o){this._rangePropMode[o]==="value"&&(t[i[0]]=n[i[0]]=null)},this),this._resetTarget()},a.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=ee(),n=this._fillSpecifiedTargetAxis(t);n?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},a.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return M(Sa,function(n){var i=this.getReferringComponents(Q(n),Gr);if(!!i.specified){t=!0;var o=new mt;M(i.models,function(s){o.add(s.componentIndex)}),e.set(n,o)}},this),t},a.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,i=!0;if(i){var o=t==="vertical"?"y":"x",s=n.findComponents({mainType:o+"Axis"});l(s,o)}if(i){var s=n.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===t}});l(s,"single")}function l(v,u){var c=v[0];if(!!c){var d=new mt;if(d.add(c.componentIndex),e.set(u,d),i=!1,u==="x"||u==="y"){var h=c.getReferringComponents("grid",qe).models[0];h&&M(v,function(f){c.componentIndex!==f.componentIndex&&h===f.getReferringComponents("grid",qe).models[0]&&d.add(f.componentIndex)})}}}i&&M(Sa,function(v){if(!!i){var u=n.findComponents({mainType:Q(v),filter:function(d){return d.get("type",!0)==="category"}});if(u[0]){var c=new mt;c.add(u[0].componentIndex),e.set(v,c),i=!1}}},this)},a.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(t){!e&&(e=t)},this),e==="y"?"vertical":"horizontal"},a.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},a.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");M([["start","startValue"],["end","endValue"]],function(i,o){var s=e[i[0]]!=null,l=e[i[1]]!=null;s&&!l?t[o]="percent":!s&&l?t[o]="value":n?t[o]=n[o]:s&&(t[o]="percent")})},a.prototype.noTarget=function(){return this._noTarget},a.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(t,n){e==null&&(e=this.ecModel.getComponent(Q(t),n))},this),e},a.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each(function(n,i){M(n.indexList,function(o){e.call(t,i,o)})})},a.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},a.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(Q(e),t)},a.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;M([["start","startValue"],["end","endValue"]],function(i){(e[i[0]]!=null||e[i[1]]!=null)&&(t[i[0]]=n[i[0]]=e[i[0]],t[i[1]]=n[i[1]]=e[i[1]])},this),this._updateRangeUse(e)},a.prototype.setCalculatedRange=function(e){var t=this.option;M(["start","startValue","end","endValue"],function(n){t[n]=e[n]})},a.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},a.prototype.getValueRange=function(e,t){if(e==null&&t==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(e,t).getDataValueWindow()},a.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var o=n[i],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var v=this.getAxisProxy(o,s.indexList[l]);if(v.hostedBy(this))return v;t||(t=v)}return t},a.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},a.prototype.getOrient=function(){return this._orient},a.type="dataZoom",a.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],a.defaultOption={z:4,filterMode:"filter",start:0,end:100},a}(kt);function Ma(r){var a={};return M(["start","end","startValue","endValue","throttle"],function(e){r.hasOwnProperty(e)&&(a[e]=r[e])}),a}var Oe=vi,hi=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e}return a.type="dataZoom.select",a}(Oe),ci=hi,fi=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.render=function(e,t,n,i){this.dataZoomModel=e,this.ecModel=t,this.api=n},a.type="dataZoom",a}(Bt),Ft=fi,di=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e}return a.type="dataZoom.select",a}(Ft),gi=di,he=M,wa=Ce,pi=function(){function r(a,e,t,n){this._dimName=a,this._axisIndex=e,this.ecModel=n,this._dataZoomModel=t}return r.prototype.hostedBy=function(a){return this._dataZoomModel===a},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var a=[];return this.ecModel.eachSeries(function(e){if(li(e)){var t=Q(this._dimName),n=e.getReferringComponents(t,qe).models[0];n&&this._axisIndex===n.componentIndex&&a.push(e)}},this),a},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return j(this._minMaxSpan)},r.prototype.calculateDataWindow=function(a){var e=this._dataExtent,t=this.getAxisModel(),n=t.axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],v;he(["start","end"],function(d,h){var f=a[d],g=a[d+"Value"];i[h]==="percent"?(f==null&&(f=o[h]),g=n.parse(B(f,o,e))):(v=!0,g=g==null?e[h]:n.parse(g),f=B(g,e,o)),l[h]=g,s[h]=f}),wa(l),wa(s);var u=this._minMaxSpan;v?c(l,s,e,o,!1):c(s,l,o,e,!0);function c(d,h,f,g,p){var y=p?"Span":"ValueSpan";Ee(0,d,f,"all",u["min"+y],u["max"+y]);for(var x=0;x<2;x++)h[x]=B(d[x],f,g,!0),p&&(h[x]=n.parse(h[x]))}return{valueWindow:l,percentWindow:s}},r.prototype.reset=function(a){if(a===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=mi(this,this._dimName,e),this._updateMinMaxSpan();var t=this.calculateDataWindow(a.settledOption);this._valueWindow=t.valueWindow,this._percentWindow=t.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(a,e){if(a!==this._dataZoomModel)return;var t=this._dimName,n=this.getTargetSeriesModels(),i=a.get("filterMode"),o=this._valueWindow;if(i==="none")return;he(n,function(l){var v=l.getData(),u=v.mapDimensionsAll(t);if(!!u.length){if(i==="weakFilter"){var c=v.getStore(),d=W(u,function(h){return v.getDimensionIndex(h)},v);v.filterSelf(function(h){for(var f,g,p,y=0;y<u.length;y++){var x=c.get(d[y],h),m=!isNaN(x),_=x<o[0],b=x>o[1];if(m&&!_&&!b)return!0;m&&(p=!0),_&&(f=!0),b&&(g=!0)}return p&&f&&g})}else he(u,function(h){if(i==="empty")l.setData(v=v.map(h,function(g){return s(g)?g:NaN}));else{var f={};f[h]=o,v.selectRange(f)}});he(u,function(h){v.setApproximateExtent(o,h)})}});function s(l){return l>=o[0]&&l<=o[1]}},r.prototype._updateMinMaxSpan=function(){var a=this._minMaxSpan={},e=this._dataZoomModel,t=this._dataExtent;he(["min","max"],function(n){var i=e.get(n+"Span"),o=e.get(n+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?i=B(t[0]+o,t,[0,100],!0):i!=null&&(o=B(i,[0,100],t,!0)-t[0]),a[n+"Span"]=i,a[n+"ValueSpan"]=o},this)},r.prototype._setAxisModel=function(){var a=this.getAxisModel(),e=this._percentWindow,t=this._valueWindow;if(!!e){var n=Wr(t,[0,500]);n=Math.min(n,20);var i=a.axis.scale.rawExtentInfo;e[0]!==0&&i.setDeterminedMinMax("min",+t[0].toFixed(n)),e[1]!==100&&i.setDeterminedMinMax("max",+t[1].toFixed(n)),i.freeze()}},r}();function mi(r,a,e){var t=[1/0,-1/0];he(e,function(o){Hr(t,o.getData(),a)});var n=r.getAxisModel(),i=Yr(n.axis.scale,n,t).calculate();return[i.min,i.max]}var yi=pi,xi={getTargetSeries:function(r){function a(n){r.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,s){var l=r.getComponent(Q(o),s);n(o,s,l,i)})})}a(function(n,i,o,s){o.__dzAxisProxy=null});var e=[];a(function(n,i,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new yi(n,i,s,r),e.push(o.__dzAxisProxy))});var t=ee();return M(e,function(n){M(n.getTargetSeriesModels(),function(i){t.set(i.uid,i)})}),t},overallReset:function(r,a){r.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(t,n){e.getAxisProxy(t,n).reset(e)}),e.eachTargetAxis(function(t,n){e.getAxisProxy(t,n).filterData(e,a)})}),r.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),i=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}})}},bi=xi;function _i(r){r.registerAction("dataZoom",function(a,e){var t=ui(e,a);M(t,function(n){n.setRawRange({start:a.start,end:a.end,startValue:a.startValue,endValue:a.endValue})})})}var Aa=!1;function Xt(r){Aa||(Aa=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,bi),_i(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Si(r){r.registerComponentModel(ci),r.registerComponentView(gi),Xt(r)}var Y=function(){function r(){}return r}(),dr={};function we(r,a){dr[r]=a}function gr(r){return dr[r]}var Mi=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;M(this.option.feature,function(t,n){var i=gr(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),q(t,i.defaultOption))})},a.type="toolbox",a.layoutMode={type:"box",ignoreSize:!0},a.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},a}(kt),wi=Mi,Ai=function(r){P(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.prototype.render=function(e,t,n,i){var o=this.group;if(o.removeAll(),!e.get("show"))return;var s=+e.get("itemSize"),l=e.get("feature")||{},v=this._features||(this._features={}),u=[];M(l,function(h,f){u.push(f)}),new Ha(this._featureNames||[],u).add(c).update(c).remove(V(c,null)).execute(),this._featureNames=u;function c(h,f){var g=u[h],p=u[f],y=l[g],x=new Fr(y,e,e.ecModel),m;if(i&&i.newTitle!=null&&i.featureName===g&&(y.title=i.newTitle),g&&!p){if(Ti(g))m={onclick:x.option.onclick,featureName:g};else{var _=gr(g);if(!_)return;m=new _}v[g]=m}else if(m=v[p],!m)return;m.uid=Xr("toolbox-feature"),m.model=x,m.ecModel=t,m.api=n;var b=m instanceof Y;if(!g&&p){b&&m.dispose&&m.dispose(t,n);return}if(!x.get("show")||b&&m.unusable){b&&m.remove&&m.remove(t,n);return}d(x,m,g),x.setIconStatus=function(A,T){var S=this.option,w=this.iconPaths;S.iconStatus=S.iconStatus||{},S.iconStatus[A]=T,w[A]&&(T==="emphasis"?ht:ct)(w[A])},m instanceof Y&&m.render&&m.render(x,t,n,i)}function d(h,f,g){var p=h.getModel("iconStyle"),y=h.getModel(["emphasis","iconStyle"]),x=f instanceof Y&&f.getIcons?f.getIcons():h.get("icon"),m=h.get("title")||{},_,b;Re(x)?(_={},_[g]=x):_=x,Re(m)?(b={},b[g]=m):b=m;var A=h.iconPaths={};M(_,function(T,S){var w=Ur(T,{},{x:-s/2,y:-s/2,width:s,height:s});w.setStyle(p.getItemStyle());var L=w.ensureState("emphasis");L.style=y.getItemStyle();var I=new fe({style:{text:b[S],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null},ignore:!0});w.setTextContent(I),$r({el:w,componentModel:e,itemName:S,formatterParamsExtra:{title:b[S]}}),w.__title=b[S],w.on("mouseover",function(){var D=y.getItemStyle(),k=e.get("orient")==="vertical"?e.get("right")==null?"right":"left":e.get("bottom")==null?"bottom":"top";I.setStyle({fill:y.get("textFill")||D.fill||D.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),w.setTextConfig({position:y.get("textPosition")||k}),I.ignore=!e.get("showTitle"),ht(this)}).on("mouseout",function(){h.get(["iconStatus",S])!=="emphasis"&&ct(this),I.hide()}),(h.get(["iconStatus",S])==="emphasis"?ht:ct)(w),o.add(w),w.on("click",R(f.onclick,f,t,n,S)),A[S]=w})}jr(o,e,n),o.add(qr(o.getBoundingRect(),e)),o.eachChild(function(h){var f=h.__title,g=h.ensureState("emphasis"),p=g.textConfig||(g.textConfig={}),y=h.getTextContent(),x=y&&y.states.emphasis;if(x&&!ne(x)&&f){var m=x.style||(x.style={}),_=Kr(f,fe.makeFont(m)),b=h.x+o.x,A=h.y+o.y+s,T=!1;A+_.height>n.getHeight()&&(p.position="top",T=!0);var S=T?-5-_.height:s+8;b+_.width/2>n.getWidth()?(p.position=["100%",S],m.align="right"):b-_.width/2<0&&(p.position=[0,S],m.align="left")}})},a.prototype.updateView=function(e,t,n,i){M(this._features,function(o){o instanceof Y&&o.updateView&&o.updateView(o.model,t,n,i)})},a.prototype.remove=function(e,t){M(this._features,function(n){n instanceof Y&&n.remove&&n.remove(e,t)}),this.group.removeAll()},a.prototype.dispose=function(e,t){M(this._features,function(n){n instanceof Y&&n.dispose&&n.dispose(e,t)})},a.type="toolbox",a}(Bt);function Ti(r){return r.indexOf("my")===0}var Ci=Ai,Li=function(r){P(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.prototype.onclick=function(e,t){var n=this.model,i=n.get("name")||e.get("title.0.text")||"echarts",o=t.getZr().painter.getType()==="svg",s=o?"svg":n.get("type",!0)||"png",l=t.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),v=Jr.browser;if(ne(MouseEvent)&&(v.newEdge||!v.ie&&!v.edge)){var u=document.createElement("a");u.download=i+"."+s,u.target="_blank",u.href=l;var c=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(c)}else if(window.navigator.msSaveOrOpenBlob||o){var d=l.split(","),h=d[0].indexOf("base64")>-1,f=o?decodeURIComponent(d[1]):d[1];h&&(f=window.atob(f));var g=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var p=f.length,y=new Uint8Array(p);p--;)y[p]=f.charCodeAt(p);var x=new Blob([y]);window.navigator.msSaveOrOpenBlob(x,g)}else{var m=document.createElement("iframe");document.body.appendChild(m);var _=m.contentWindow,b=_.document;b.open("image/svg+xml","replace"),b.write(f),b.close(),_.focus(),b.execCommand("SaveAs",!0,g),document.body.removeChild(m)}}else{var A=n.get("lang"),T='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(A&&A[0]||"")+'" /></body>',S=window.open();S.document.write(T),S.document.title=i}},a.getDefaultOption=function(e){var t={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return t},a}(Y),Di=Li,Ta="__ec_magicType_stack__",Ri=[["line","bar"],["stack"]],Ii=function(r){P(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return M(e.get("type"),function(i){t[i]&&(n[i]=t[i])}),n},a.getDefaultOption=function(e){var t={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return t},a.prototype.onclick=function(e,t,n){var i=this.model,o=i.get(["seriesIndex",n]);if(!!Ca[n]){var s={series:[]},l=function(c){var d=c.subType,h=c.id,f=Ca[n](d,h,c,i);f&&(me(f,c.option),s.series.push(f));var g=c.coordinateSystem;if(g&&g.type==="cartesian2d"&&(n==="line"||n==="bar")){var p=g.getAxesByScale("ordinal")[0];if(p){var y=p.dim,x=y+"Axis",m=c.getReferringComponents(x,qe).models[0],_=m.componentIndex;s[x]=s[x]||[];for(var b=0;b<=_;b++)s[x][_]=s[x][_]||{};s[x][_].boundaryGap=n==="bar"}}};M(Ri,function(c){K(c,n)>=0&&M(c,function(d){i.setIconStatus(d,"normal")})}),i.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var v,u=n;n==="stack"&&(v=q({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",n])!=="emphasis"&&(u="tiled")),t.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:v,featureName:"magicType"})}},a}(Y),Ca={line:function(r,a,e,t){if(r==="bar")return q({id:a,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},t.get(["option","line"])||{},!0)},bar:function(r,a,e,t){if(r==="line")return q({id:a,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},t.get(["option","bar"])||{},!0)},stack:function(r,a,e,t){var n=e.get("stack")===Ta;if(r==="line"||r==="bar")return t.setIconStatus("stack",n?"normal":"emphasis"),q({id:a,stack:n?"":Ta},t.get(["option","stack"])||{},!0)}};tt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,a){a.mergeOption(r.newOption)});var Oi=Ii,rt=new Array(60).join("-"),pe="	";function Pi(r){var a={},e=[],t=[];return r.eachRawSeries(function(n){var i=n.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var o=i.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;a[s]||(a[s]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},t.push({axisDim:o.dim,axisIndex:o.index})),a[s].series.push(n)}else e.push(n)}else e.push(n)}),{seriesGroupByCategoryAxis:a,other:e,meta:t}}function Ei(r){var a=[];return M(r,function(e,t){var n=e.categoryAxis,i=e.valueAxis,o=i.dim,s=[" "].concat(W(e.series,function(h){return h.name})),l=[n.model.getCategories()];M(e.series,function(h){var f=h.getRawData();l.push(h.getRawData().mapArray(f.mapDimension(o),function(g){return g}))});for(var v=[s.join(pe)],u=0;u<l[0].length;u++){for(var c=[],d=0;d<l.length;d++)c.push(l[d][u]);v.push(c.join(pe))}a.push(v.join(`
`))}),a.join(`

`+rt+`

`)}function ki(r){return W(r,function(a){var e=a.getRawData(),t=[a.name],n=[];return e.each(e.dimensions,function(){for(var i=arguments.length,o=arguments[i-1],s=e.getName(o),l=0;l<i-1;l++)n[l]=arguments[l];t.push((s?s+pe:"")+n.join(pe))}),t.join(`
`)}).join(`

`+rt+`

`)}function Bi(r){var a=Pi(r);return{value:Fe([Ei(a.seriesGroupByCategoryAxis),ki(a.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+rt+`

`),meta:a.meta}}function Qe(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Zi(r){var a=r.slice(0,r.indexOf(`
`));if(a.indexOf(pe)>=0)return!0}var It=new RegExp("["+pe+"]+","g");function Vi(r){for(var a=r.split(/\n+/g),e=Qe(a.shift()).split(It),t=[],n=W(e,function(l){return{name:l,data:[]}}),i=0;i<a.length;i++){var o=Qe(a[i]).split(It);t.push(o.shift());for(var s=0;s<o.length;s++)n[s]&&(n[s].data[i]=o[s])}return{series:n,categories:t}}function zi(r){for(var a=r.split(/\n+/g),e=Qe(a.shift()),t=[],n=0;n<a.length;n++){var i=Qe(a[n]);if(!!i){var o=i.split(It),s="",l=void 0,v=!1;isNaN(o[0])?(v=!0,s=o[0],o=o.slice(1),t[n]={name:s,value:[]},l=t[n].value):l=t[n]=[];for(var u=0;u<o.length;u++)l.push(+o[u]);l.length===1&&(v?t[n].value=l[0]:t[n]=l[0])}}return{name:e,data:t}}function Ni(r,a){var e=r.split(new RegExp(`
*`+rt+`
*`,"g")),t={series:[]};return M(e,function(n,i){if(Zi(n)){var o=Vi(n),s=a[i],l=s.axisDim+"Axis";s&&(t[l]=t[l]||[],t[l][s.axisIndex]={data:o.categories},t.series=t.series.concat(o.series))}else{var o=zi(n);t.series.push(o)}}),t}var Gi=function(r){P(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.prototype.onclick=function(e,t){var n=t.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin: 10px 20px;",s.style.color=i.get("textColor");var v=document.createElement("div"),u=document.createElement("textarea");v.style.cssText="display:block;width:100%;overflow:auto;";var c=i.get("optionToContent"),d=i.get("contentToOption"),h=Bi(e);if(ne(c)){var f=c(t.getOption());Re(f)?v.innerHTML=f:Qr(f)&&v.appendChild(f)}else v.appendChild(u),u.readOnly=i.get("readOnly"),u.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",u.style.color=i.get("textColor"),u.style.borderColor=i.get("textareaBorderColor"),u.style.backgroundColor=i.get("textareaColor"),u.value=h.value;var g=h.meta,p=document.createElement("div");p.style.cssText="position:absolute;bottom:0;left:0;right:0;";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),m=document.createElement("div");y+=";background-color:"+i.get("buttonColor"),y+=";color:"+i.get("buttonTextColor");var _=this;function b(){n.removeChild(o),_._dom=null}oa(x,"click",b),oa(m,"click",function(){if(d==null&&c!=null||d!=null&&c==null){b();return}var A;try{ne(d)?A=d(v,t.getOption()):A=Ni(u.value,g)}catch(T){throw b(),new Error("Data view format error "+T)}A&&t.dispatchAction({type:"changeDataView",newOption:A}),b()}),x.innerHTML=l[1],m.innerHTML=l[2],m.style.cssText=y,x.style.cssText=y,!i.get("readOnly")&&p.appendChild(m),p.appendChild(x),o.appendChild(s),o.appendChild(v),o.appendChild(p),v.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},a.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},a.prototype.dispose=function(e,t){this.remove(e,t)},a.getDefaultOption=function(e){var t={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return t},a}(Y);function Wi(r,a){return W(r,function(e,t){var n=a&&a[t];if(sa(n)&&!de(n)){var i=sa(e)&&!de(e);i||(e={value:e});var o=n.name!=null&&e.name==null;return e=me(e,n),o&&delete e.name,e}else return e})}tt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,a){var e=[];M(r.newOption.series,function(t){var n=a.getSeriesByName(t.name)[0];if(!n)e.push(J({type:"scatter"},t));else{var i=n.get("data");e.push({name:t.name,data:Wi(t.data,i)})}}),a.mergeOption(me({series:e},r.newOption))});var Hi=Gi,pr=M,mr=Pe();function Yi(r,a){var e=Ut(r);pr(a,function(t,n){for(var i=e.length-1;i>=0;i--){var o=e[i];if(o[n])break}if(i<0){var s=r.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();e[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),e.push(a)}function Fi(r){var a=Ut(r),e=a[a.length-1];a.length>1&&a.pop();var t={};return pr(e,function(n,i){for(var o=a.length-1;o>=0;o--)if(n=a[o][i],n){t[i]=n;break}}),t}function Xi(r){mr(r).snapshots=null}function Ui(r){return Ut(r).length}function Ut(r){var a=mr(r);return a.snapshots||(a.snapshots=[{}]),a.snapshots}var $i=function(r){P(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.prototype.onclick=function(e,t){Xi(e),t.dispatchAction({type:"restore",from:this.uid})},a.getDefaultOption=function(e){var t={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return t},a}(Y);tt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,a){a.resetOption("recreate")});var ji=$i,qi=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Ki=function(){function r(a,e,t){var n=this;this._targetInfoList=[];var i=La(e,a);M(Ji,function(o,s){(!t||!t.include||K(t.include,s)>=0)&&o(i,n._targetInfoList)})}return r.prototype.setOutputRanges=function(a,e){return this.matchOutputRanges(a,e,function(t,n,i){if((t.coordRanges||(t.coordRanges=[])).push(n),!t.coordRange){t.coordRange=n;var o=yt[t.brushType](0,i,n);t.__rangeOffset={offset:Oa[t.brushType](o.values,t.range,[1,1]),xyMinMax:o.xyMinMax}}}),a},r.prototype.matchOutputRanges=function(a,e,t){M(a,function(n){var i=this.findTargetInfo(n,e);i&&i!==!0&&M(i.coordSyses,function(o){var s=yt[n.brushType](1,o,n.range,!0);t(n,s.values,o,e)})},this)},r.prototype.setInputRanges=function(a,e){M(a,function(t){var n=this.findTargetInfo(t,e);if(t.range=t.range||[],n&&n!==!0){t.panelId=n.panelId;var i=yt[t.brushType](0,n.coordSys,t.coordRange),o=t.__rangeOffset;t.range=o?Oa[t.brushType](i.values,o.offset,Qi(i.xyMinMax,o.xyMinMax)):i.values}},this)},r.prototype.makePanelOpts=function(a,e){return W(this._targetInfoList,function(t){var n=t.getPanelRect();return{panelId:t.panelId,defaultBrushType:e?e(t):null,clipPath:ni(n),isTargetByCursor:oi(n,a,t.coordSysModel),getLinearBrushOtherExtent:ii(n)}})},r.prototype.controlSeries=function(a,e,t){var n=this.findTargetInfo(a,t);return n===!0||n&&K(n.coordSyses,e.coordinateSystem)>=0},r.prototype.findTargetInfo=function(a,e){for(var t=this._targetInfoList,n=La(e,a),i=0;i<t.length;i++){var o=t[i],s=a.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<Da.length;l++)if(Da[l](n,o))return o}return!0},r}();function Ot(r){return r[0]>r[1]&&r.reverse(),r}function La(r,a){return Xa(r,a,{includeMainTypes:qi})}var Ji={grid:function(r,a){var e=r.xAxisModels,t=r.yAxisModels,n=r.gridModels,i=ee(),o={},s={};!e&&!t&&!n||(M(e,function(l){var v=l.axis.grid.model;i.set(v.id,v),o[v.id]=!0}),M(t,function(l){var v=l.axis.grid.model;i.set(v.id,v),s[v.id]=!0}),M(n,function(l){i.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),i.each(function(l){var v=l.coordinateSystem,u=[];M(v.getCartesians(),function(c,d){(K(e,c.getAxis("x").model)>=0||K(t,c.getAxis("y").model)>=0)&&u.push(c)}),a.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:Ra.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(r,a){M(r.geoModels,function(e){var t=e.coordinateSystem;a.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:t,coordSyses:[t],getPanelRect:Ra.geo})})}},Da=[function(r,a){var e=r.xAxisModel,t=r.yAxisModel,n=r.gridModel;return!n&&e&&(n=e.axis.grid.model),!n&&t&&(n=t.axis.grid.model),n&&n===a.gridModel},function(r,a){var e=r.geoModel;return e&&e===a.geoModel}],Ra={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,a=r.getBoundingRect().clone();return a.applyTransform(Et(r)),a}},yt={lineX:V(Ia,0),lineY:V(Ia,1),rect:function(r,a,e,t){var n=r?a.pointToData([e[0][0],e[1][0]],t):a.dataToPoint([e[0][0],e[1][0]],t),i=r?a.pointToData([e[0][1],e[1][1]],t):a.dataToPoint([e[0][1],e[1][1]],t),o=[Ot([n[0],i[0]]),Ot([n[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(r,a,e,t){var n=[[1/0,-1/0],[1/0,-1/0]],i=W(e,function(o){var s=r?a.pointToData(o,t):a.dataToPoint(o,t);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:i,xyMinMax:n}}};function Ia(r,a,e,t){var n=e.getAxis(["x","y"][r]),i=Ot(W([0,1],function(s){return a?n.coordToData(n.toLocalCoord(t[s]),!0):n.toGlobalCoord(n.dataToCoord(t[s]))})),o=[];return o[r]=i,o[1-r]=[NaN,NaN],{values:i,xyMinMax:o}}var Oa={lineX:V(Pa,0),lineY:V(Pa,1),rect:function(r,a,e){return[[r[0][0]-e[0]*a[0][0],r[0][1]-e[0]*a[0][1]],[r[1][0]-e[1]*a[1][0],r[1][1]-e[1]*a[1][1]]]},polygon:function(r,a,e){return W(r,function(t,n){return[t[0]-e[0]*a[n][0],t[1]-e[1]*a[n][1]]})}};function Pa(r,a,e,t){return[a[0]-t[r]*e[0],a[1]-t[r]*e[1]]}function Qi(r,a){var e=Ea(r),t=Ea(a),n=[e[0]/t[0],e[1]/t[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function Ea(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}var yr=Ki,Pt=M,eo=tn("toolbox-dataZoom_"),to=function(r){P(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.prototype.render=function(e,t,n,i){this._brushController||(this._brushController=new ri(n.getZr()),this._brushController.on("brush",R(this._onBrush,this)).mount()),no(e,t,this,i,n),ro(e,t)},a.prototype.onclick=function(e,t,n){ao[n].call(this)},a.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},a.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},a.prototype._onBrush=function(e){var t=e.areas;if(!e.isEnd||!t.length)return;var n={},i=this.ecModel;this._brushController.updateCovers([]);var o=new yr($t(this.model),i,{include:["grid"]});o.matchOutputRanges(t,i,function(v,u,c){if(c.type==="cartesian2d"){var d=v.brushType;d==="rect"?(s("x",c,u[0]),s("y",c,u[1])):s({lineX:"x",lineY:"y"}[d],c,u)}}),Yi(i,n),this._dispatchZoomAction(n);function s(v,u,c){var d=u.getAxis(v),h=d.model,f=l(v,h,i),g=f.findRepresentativeAxisProxy(h).getMinMaxSpan();(g.minValueSpan!=null||g.maxValueSpan!=null)&&(c=Ee(0,c.slice(),d.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)),f&&(n[f.id]={dataZoomId:f.id,startValue:c[0],endValue:c[1]})}function l(v,u,c){var d;return c.eachComponent({mainType:"dataZoom",subType:"select"},function(h){var f=h.getAxisModel(v,u.componentIndex);f&&(d=h)}),d}},a.prototype._dispatchZoomAction=function(e){var t=[];Pt(e,function(n,i){t.push(j(n))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},a.getDefaultOption=function(e){var t={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return t},a}(Y),ao={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(Fi(this.ecModel))}};function $t(r){var a={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return a.xAxisIndex==null&&a.xAxisId==null&&(a.xAxisIndex="all"),a.yAxisIndex==null&&a.yAxisId==null&&(a.yAxisIndex="all"),a}function ro(r,a){r.setIconStatus("back",Ui(a)>1?"emphasis":"normal")}function no(r,a,e,t,n){var i=e._isZoomActive;t&&t.type==="takeGlobalCursor"&&(i=t.key==="dataZoomSelect"?t.dataZoomSelectActive:!1),e._isZoomActive=i,r.setIconStatus("zoom",i?"emphasis":"normal");var o=new yr($t(r),a,{include:["grid"]}),s=o.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}en("dataZoom",function(r){var a=r.getComponent("toolbox",0),e=["feature","dataZoom"];if(!a||a.get(e)==null)return;var t=a.getModel(e),n=[],i=$t(t),o=Xa(r,i);Pt(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),Pt(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,v,u){var c=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:t.get("filterMode",!0)||"filter",id:eo+v+c};d[u]=c,n.push(d)}return n});var io=to;function $o(r){r.registerComponentModel(wi),r.registerComponentView(Ci),we("saveAsImage",Di),we("magicType",Oi),we("dataView",Hi),we("dataZoom",io),we("restore",ji),wt(Si)}var oo=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e.layoutMode={type:"box",ignoreSize:!0},e}return a.type="title",a.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},a}(kt),so=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.render=function(e,t,n){if(this.group.removeAll(),!!e.get("show")){var i=this.group,o=e.getModel("textStyle"),s=e.getModel("subtextStyle"),l=e.get("textAlign"),v=Ue(e.get("textBaseline"),e.get("textVerticalAlign")),u=new fe({style:At(o,{text:e.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),c=u.getBoundingRect(),d=e.get("subtext"),h=new fe({style:At(s,{text:d,fill:s.getTextColor(),y:c.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),f=e.get("link"),g=e.get("sublink"),p=e.get("triggerEvent",!0);u.silent=!f&&!p,h.silent=!g&&!p,f&&u.on("click",function(){la(f,"_"+e.get("target"))}),g&&h.on("click",function(){la(g,"_"+e.get("subtarget"))}),Le(u).eventData=Le(h).eventData=p?{componentType:"title",componentIndex:e.componentIndex}:null,i.add(u),d&&i.add(h);var y=i.getBoundingRect(),x=e.getBoxLayoutParams();x.width=y.width,x.height=y.height;var m=Zt(x,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));l||(l=e.get("left")||e.get("right"),l==="middle"&&(l="center"),l==="right"?m.x+=m.width:l==="center"&&(m.x+=m.width/2)),v||(v=e.get("top")||e.get("bottom"),v==="center"&&(v="middle"),v==="bottom"?m.y+=m.height:v==="middle"&&(m.y+=m.height/2),v=v||"top"),i.x=m.x,i.y=m.y,i.markRedraw();var _={align:l,verticalAlign:v};u.setStyle(_),h.setStyle(_),y=i.getBoundingRect();var b=m.margin,A=e.getItemStyle(["color","opacity"]);A.fill=e.get("backgroundColor");var T=new re({shape:{x:y.x-b[3],y:y.y-b[0],width:y.width+b[1]+b[3],height:y.height+b[0]+b[2],r:e.get("borderRadius")},style:A,subPixelOptimize:!0,silent:!0});i.add(T)}},a.type="title",a}(Bt);function jo(r){r.registerComponentModel(oo),r.registerComponentView(so)}var lo=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e}return a.type="dataZoom.inside",a.defaultOption=Ua(Oe.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),a}(Oe),uo=lo,jt=Pe();function vo(r,a,e){jt(r).coordSysRecordMap.each(function(t){var n=t.dataZoomInfoMap.get(a.uid);n&&(n.getRange=e)})}function ho(r,a){for(var e=jt(r).coordSysRecordMap,t=e.keys(),n=0;n<t.length;n++){var i=t[n],o=e.get(i),s=o.dataZoomInfoMap;if(s){var l=a.uid,v=s.get(l);v&&(s.removeKey(l),s.keys().length||xr(e,o))}}}function xr(r,a){if(a){r.removeKey(a.model.uid);var e=a.controller;e&&e.dispose()}}function co(r,a){var e={model:a,containsPoint:V(go,a),dispatchAction:V(fo,r),dataZoomInfoMap:null,controller:null},t=e.controller=new Vn(r.getZr());return M(["pan","zoom","scrollMove"],function(n){t.on(n,function(i){var o=[];e.dataZoomInfoMap.each(function(s){if(!!i.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[n],v=l&&l(s.dzReferCoordSysInfo,e.model.mainType,e.controller,i);!s.model.get("disabled",!0)&&v&&o.push({dataZoomId:s.model.id,start:v[0],end:v[1]})}}),o.length&&e.dispatchAction(o)})}),e}function fo(r,a){r.isDisposed()||r.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:a})}function go(r,a,e,t){return r.coordinateSystem.containPoint([e,t])}function po(r){var a,e="type_",t={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return r.each(function(i){var o=i.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;t[e+s]>t[e+a]&&(a=s),n=n&&o.get("preventDefaultMouseMove",!0)}),{controlType:a,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}function mo(r){r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,function(a,e){var t=jt(e),n=t.coordSysRecordMap||(t.coordSysRecordMap=ee());n.each(function(i){i.dataZoomInfoMap=null}),a.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var o=fr(i);M(o.infoList,function(s){var l=s.model.uid,v=n.get(l)||n.set(l,co(e,s.model)),u=v.dataZoomInfoMap||(v.dataZoomInfoMap=ee());u.set(i.uid,{dzReferCoordSysInfo:s,model:i,getRange:null})})}),n.each(function(i){var o=i.controller,s,l=i.dataZoomInfoMap;if(l){var v=l.keys()[0];v!=null&&(s=l.get(v))}if(!s){xr(n,i);return}var u=po(l);o.enable(u.controlType,u.opt),o.setPointerChecker(i.containsPoint),$a(i,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var yo=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return a.prototype.render=function(e,t,n){if(r.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),vo(n,e,{pan:R(xt.pan,this),zoom:R(xt.zoom,this),scrollMove:R(xt.scrollMove,this)})},a.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){ho(this.api,this.dataZoomModel),this.range=null},a.type="dataZoom.inside",a}(Ft),xt={zoom:function(r,a,e,t){var n=this.range,i=n.slice(),o=r.axisModels[0];if(!!o){var s=bt[a](null,[t.originX,t.originY],o,e,r),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(i[1]-i[0])+i[0],v=Math.max(1/t.scale,0);i[0]=(i[0]-l)*v+l,i[1]=(i[1]-l)*v+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Ee(0,i,[0,100],0,u.minSpan,u.maxSpan),this.range=i,n[0]!==i[0]||n[1]!==i[1])return i}},pan:ka(function(r,a,e,t,n,i){var o=bt[t]([i.oldX,i.oldY],[i.newX,i.newY],a,n,e);return o.signal*(r[1]-r[0])*o.pixel/o.pixelLength}),scrollMove:ka(function(r,a,e,t,n,i){var o=bt[t]([0,0],[i.scrollDelta,i.scrollDelta],a,n,e);return o.signal*(r[1]-r[0])*i.scrollDelta})};function ka(r){return function(a,e,t,n){var i=this.range,o=i.slice(),s=a.axisModels[0];if(!!s){var l=r(o,s,a,e,t,n);if(Ee(l,o,[0,100],"all"),this.range=o,i[0]!==o[0]||i[1]!==o[1])return o}}}var bt={grid:function(r,a,e,t,n){var i=e.axis,o={},s=n.model.coordinateSystem.getRect();return r=r||[0,0],i.dim==="x"?(o.pixel=a[0]-r[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=i.inverse?1:-1):(o.pixel=a[1]-r[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=i.inverse?-1:1),o},polar:function(r,a,e,t,n){var i=e.axis,o={},s=n.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),v=s.getAngleAxis().getExtent();return r=r?s.pointToCoord(r):[0,0],a=s.pointToCoord(a),e.mainType==="radiusAxis"?(o.pixel=a[0]-r[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=i.inverse?1:-1):(o.pixel=a[1]-r[1],o.pixelLength=v[1]-v[0],o.pixelStart=v[0],o.signal=i.inverse?-1:1),o},singleAxis:function(r,a,e,t,n){var i=e.axis,o=n.model.coordinateSystem.getRect(),s={};return r=r||[0,0],i.orient==="horizontal"?(s.pixel=a[0]-r[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=i.inverse?1:-1):(s.pixel=a[1]-r[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=i.inverse?-1:1),s}},xo=yo;function bo(r){Xt(r),r.registerComponentModel(uo),r.registerComponentView(xo),mo(r)}var _o=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e}return a.type="dataZoom.slider",a.layoutMode="box",a.defaultOption=Ua(Oe.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),a}(Oe),So=_o,Ae=re,Ba=7,Mo=1,_t=30,wo=7,Te="horizontal",Za="vertical",Ao=5,To=["line","bar","candlestick","scatter"],Co={easing:"cubicOut",duration:100,delay:0},Lo=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=a.type,e._displayables={},e}return a.prototype.init=function(e,t){this.api=t,this._onBrush=R(this._onBrush,this),this._onBrushEnd=R(this._onBrushEnd,this)},a.prototype.render=function(e,t,n,i){if(r.prototype.render.apply(this,arguments),$a(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},a.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){an(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},a.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new ce;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},a.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,n=e.get("brushSelect"),i=n?wo:0,o=this._findCoordRect(),s={width:t.getWidth(),height:t.getHeight()},l=this._orient===Te?{right:s.width-o.x-o.width,top:s.height-_t-Ba-i,width:o.width,height:_t}:{right:Ba,top:o.y,width:_t,height:o.height},v=rn(e.option);M(["right","top","width","height"],function(c){v[c]==="ph"&&(v[c]=l[c])});var u=Zt(v,s);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===Za&&this._size.reverse()},a.prototype._positionGroup=function(){var e=this.group,t=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(n===Te&&!o?{scaleY:l?1:-1,scaleX:1}:n===Te&&o?{scaleY:l?1:-1,scaleX:-1}:n===Za&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var v=e.getBoundingRect([s]);e.x=t.x-v.x,e.y=t.y-v.y,e.markRedraw()},a.prototype._getViewExtent=function(){return[0,this._size[0]]},a.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,n=this._displayables.sliderGroup,i=e.get("brushSelect");n.add(new Ae({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new Ae({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:R(this._onClickPanel,this)}),s=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),n.add(o)},a.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var t=this._size,n=this._shadowSize||[],i=e.series,o=i.getRawData(),s=i.getShadowDim?i.getShadowDim():e.otherDim;if(s==null)return;var l=this._shadowPolygonPts,v=this._shadowPolylinePts;if(o!==this._shadowData||s!==this._shadowDim||t[0]!==n[0]||t[1]!==n[1]){var u=o.getDataExtent(s),c=(u[1]-u[0])*.3;u=[u[0]-c,u[1]+c];var d=[0,t[1]],h=[0,t[0]],f=[[t[0],0],[0,0]],g=[],p=h[1]/(o.count()-1),y=0,x=Math.round(o.count()/t[0]),m;o.each([s],function(S,w){if(x>0&&w%x){y+=p;return}var L=S==null||isNaN(S)||S==="",I=L?0:B(S,u,d,!0);L&&!m&&w?(f.push([f[f.length-1][0],0]),g.push([g[g.length-1][0],0])):!L&&m&&(f.push([y,0]),g.push([y,0])),f.push([y,I]),g.push([y,I]),y+=p,m=L}),l=this._shadowPolygonPts=f,v=this._shadowPolylinePts=g}this._shadowData=o,this._shadowDim=s,this._shadowSize=[t[0],t[1]];var _=this.dataZoomModel;function b(S){var w=_.getModel(S?"selectedDataBackground":"dataBackground"),L=new ce,I=new Ya({shape:{points:l},segmentIgnoreThreshold:1,style:w.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),D=new et({shape:{points:v},segmentIgnoreThreshold:1,style:w.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return L.add(I),L.add(D),L}for(var A=0;A<3;A++){var T=b(A===1);this._displayables.sliderGroup.add(T),this._displayables.dataShadowSegs.push(T)}},a.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(t!==!1){var n,i=this.ecModel;return e.eachTargetAxis(function(o,s){var l=e.getAxisProxy(o,s).getTargetSeriesModels();M(l,function(v){if(!n&&!(t!==!0&&K(To,v.get("type"))<0)){var u=i.getComponent(Q(o),s).axis,c=Do(o),d,h=v.coordinateSystem;c!=null&&h.getOtherAxis&&(d=h.getOtherAxis(u).inverse),c=v.getData().mapDimension(c),n={thisAxis:u,series:v,thisDim:o,otherDim:c,otherAxisInverse:d}}},this)},this),n}},a.prototype._renderHandle=function(){var e=this.group,t=this._displayables,n=t.handles=[null,null],i=t.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,v=this.api,u=l.get("borderRadius")||0,c=l.get("brushSelect"),d=t.filler=new Ae({silent:c,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new Ae({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Mo,fill:"rgba(0,0,0,0)"}})),M([0,1],function(m){var _=l.get("handleIcon");!nn[_]&&_.indexOf("path://")<0&&_.indexOf("image://")<0&&(_="path://"+_);var b=ua(_,-1,0,2,2,null,!0);b.attr({cursor:Va(this._orient),draggable:!0,drift:R(this._onDragMove,this,m),ondragend:R(this._onDragEnd,this),onmouseover:R(this._showDataInfo,this,!0),onmouseout:R(this._showDataInfo,this,!1),z2:5});var A=b.getBoundingRect(),T=l.get("handleSize");this._handleHeight=N(T,this._size[1]),this._handleWidth=A.width/A.height*this._handleHeight,b.setStyle(l.getModel("handleStyle").getItemStyle()),b.style.strokeNoScale=!0,b.rectHover=!0,b.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),on(b);var S=l.get("handleColor");S!=null&&(b.style.fill=S),o.add(n[m]=b);var w=l.getModel("textStyle");e.add(i[m]=new fe({silent:!0,invisible:!0,style:At(w,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:w.getTextColor(),font:w.getFont()}),z2:10}))},this);var h=d;if(c){var f=N(l.get("moveHandleSize"),s[1]),g=t.moveHandle=new re({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:f}}),p=f*.8,y=t.moveHandleIcon=ua(l.get("moveHandleIcon"),-p/2,-p/2,p,p,"#fff",!0);y.silent=!0,y.y=s[1]+f/2-.5,g.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var x=Math.min(s[1]/2,Math.max(f,10));h=t.moveZone=new re({invisible:!0,shape:{y:s[1]-x,height:f+x}}),h.on("mouseover",function(){v.enterEmphasis(g)}).on("mouseout",function(){v.leaveEmphasis(g)}),o.add(g),o.add(y),o.add(h)}h.attr({draggable:!0,cursor:Va(this._orient),drift:R(this._onDragMove,this,"all"),ondragstart:R(this._showDataInfo,this,!0),ondragend:R(this._onDragEnd,this),onmouseover:R(this._showDataInfo,this,!0),onmouseout:R(this._showDataInfo,this,!1)})},a.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[B(e[0],[0,100],t,!0),B(e[1],[0,100],t,!0)]},a.prototype._updateInterval=function(e,t){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),s=n.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Ee(t,i,o,n.get("zoomLock")?"all":e,s.minSpan!=null?B(s.minSpan,l,o,!0):null,s.maxSpan!=null?B(s.maxSpan,l,o,!0):null);var v=this._range,u=this._range=Ce([B(i[0],o,l,!0),B(i[1],o,l,!0)]);return!v||v[0]!==u[0]||v[1]!==u[1]},a.prototype._updateView=function(e){var t=this._displayables,n=this._handleEnds,i=Ce(n.slice()),o=this._size;M([0,1],function(h){var f=t.handles[h],g=this._handleHeight;f.attr({scaleX:g/2,scaleY:g/2,x:n[h]+(h?-1:1),y:o[1]/2-g/2})},this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]});var s={x:i[0],width:i[1]-i[0]};t.moveHandle&&(t.moveHandle.setShape(s),t.moveZone.setShape(s),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=t.dataShadowSegs,v=[0,i[0],i[1],o[0]],u=0;u<l.length;u++){var c=l[u],d=c.getClipPath();d||(d=new re,c.setClipPath(d)),d.setShape({x:v[u],y:0,width:v[u+1]-v[u],height:o[1]})}this._updateDataInfo(e)},a.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,s=["",""];if(t.get("showDetail")){var l=t.findRepresentativeAxisProxy();if(l){var v=l.getAxisModel().axis,u=this._range,c=e?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(c[0],v),this._formatLabel(c[1],v)]}}var d=Ce(this._handleEnds.slice());h.call(this,0),h.call(this,1);function h(f){var g=Et(n.handles[f].parent,this.group),p=Fa(f===0?"right":"left",g),y=this._handleWidth/2+Ao,x=va([d[f]+(f===0?-y:y),this._size[1]/2],g);i[f].setStyle({x:x[0],y:x[1],verticalAlign:o===Te?"middle":p,align:o===Te?p:"center",text:s[f]})}},a.prototype._formatLabel=function(e,t){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");(o==null||o==="auto")&&(o=t.getPixelPrecision());var s=e==null||isNaN(e)?"":t.type==="category"||t.type==="time"?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return ne(i)?i(e,s):Re(i)?i.replace("{value}",s):s},a.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,n=t.handleLabels;n[0].attr("invisible",!e),n[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},a.prototype._onDragMove=function(e,t,n,i){this._dragging=!0,je(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=va([t,n],o,!0),l=this._updateInterval(e,s[0]),v=this.dataZoomModel.get("realtime");this._updateView(!v),l&&v&&this._dispatchZoomAction(!0)},a.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},a.prototype._onClickPanel=function(e){var t=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,s=this._updateInterval("all",n[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},a.prototype._onBrushStart=function(e){var t=e.offsetX,n=e.offsetY;this._brushStart=new E(t,n),this._brushing=!0,this._brushStartTime=+new Date},a.prototype._onBrushEnd=function(e){if(!!this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,!!t){t.attr("ignore",!0);var n=t.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Ce([B(n.x,o,s,!0),B(n.x+n.width,o,s,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},a.prototype._onBrush=function(e){this._brushing&&(je(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},a.prototype._updateBrushRect=function(e,t){var n=this._displayables,i=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new Ae({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,v=l.transformCoordToLocal(e,t),u=l.transformCoordToLocal(s.x,s.y),c=this._size;v[0]=Math.max(Math.min(c[0],v[0]),0),o.setShape({x:u[0],y:0,width:v[0]-u[0],height:c[1]})},a.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?Co:null,start:t[0],end:t[1]})},a.prototype._findCoordRect=function(){var e,t=fr(this.dataZoomModel).infoList;if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var i=this.api.getWidth(),o=this.api.getHeight();e={x:i*.2,y:o*.2,width:i*.6,height:o*.6}}return e},a.type="dataZoom.slider",a}(Ft);function Do(r){var a={x:"y",y:"x",radius:"angle",angle:"radius"};return a[r]}function Va(r){return r==="vertical"?"ns-resize":"ew-resize"}var Ro=Lo;function Io(r){r.registerComponentModel(So),r.registerComponentView(Ro),Xt(r)}function qo(r){wt(bo),wt(Io)}var He=Math.PI*2,za=Math.PI/180;function br(r,a){return Zt(r.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function _r(r,a){var e=br(r,a),t=r.get("center"),n=r.get("radius");de(n)||(n=[0,n]),de(t)||(t=[t,t]);var i=N(e.width,a.getWidth()),o=N(e.height,a.getHeight()),s=Math.min(i,o),l=N(t[0],i)+e.x,v=N(t[1],o)+e.y,u=N(n[0],s/2),c=N(n[1],s/2);return{cx:l,cy:v,r0:u,r:c}}function Oo(r,a,e){a.eachSeriesByType(r,function(t){var n=t.getData(),i=n.mapDimension("value"),o=br(t,e),s=_r(t,e),l=s.cx,v=s.cy,u=s.r,c=s.r0,d=-t.get("startAngle")*za,h=t.get("minAngle")*za,f=0;n.each(i,function(L){!isNaN(L)&&f++});var g=n.getSum(i),p=Math.PI/(g||f)*2,y=t.get("clockwise"),x=t.get("roseType"),m=t.get("stillShowZeroSum"),_=n.getDataExtent(i);_[0]=0;var b=He,A=0,T=d,S=y?1:-1;if(n.setLayout({viewRect:o,r:u}),n.each(i,function(L,I){var D;if(isNaN(L)){n.setItemLayout(I,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:y,cx:l,cy:v,r0:c,r:x?NaN:u});return}x!=="area"?D=g===0&&m?p:L*p:D=He/f,D<h?(D=h,b-=h):A+=L;var k=T+S*D;n.setItemLayout(I,{angle:D,startAngle:T,endAngle:k,clockwise:y,cx:l,cy:v,r0:c,r:x?B(L,_,[c,u]):u}),T=k}),b<He&&f)if(b<=.001){var w=He/f;n.each(i,function(L,I){if(!isNaN(L)){var D=n.getItemLayout(I);D.angle=w,D.startAngle=d+S*I*w,D.endAngle=d+S*(I+1)*w}})}else p=b/A,T=d,n.each(i,function(L,I){if(!isNaN(L)){var D=n.getItemLayout(I),k=D.angle===h?h:L*p;D.startAngle=T,D.endAngle=T+S*k,T+=S*k}})})}function Po(r){return{seriesType:r,reset:function(a,e){var t=e.findComponents({mainType:"legend"});if(!(!t||!t.length)){var n=a.getData();n.filterSelf(function(i){for(var o=n.getName(i),s=0;s<t.length;s++)if(!t[s].isSelected(o))return!1;return!0})}}}}var Eo=Math.PI/180;function Na(r,a,e,t,n,i,o,s,l,v){if(r.length<2)return;function u(g){for(var p=g.rB,y=p*p,x=0;x<g.list.length;x++){var m=g.list[x],_=Math.abs(m.label.y-e),b=t+m.len,A=b*b,T=Math.sqrt((1-Math.abs(_*_/y))*A),S=a+(T+m.len2)*n,w=S-m.label.x,L=m.targetTextWidth-w*n;Sr(m,L,!0),m.label.x=S}}function c(g){for(var p={list:[],maxY:0},y={list:[],maxY:0},x=0;x<g.length;x++)if(g[x].labelAlignTo==="none"){var m=g[x],_=m.label.y>e?y:p,b=Math.abs(m.label.y-e);if(b>=_.maxY){var A=m.label.x-a-m.len2*n,T=t+m.len,S=Math.abs(A)<T?Math.sqrt(b*b/(1-A*A/T/T)):T;_.rB=S,_.maxY=b}_.list.push(m)}u(p),u(y)}for(var d=r.length,h=0;h<d;h++)if(r[h].position==="outer"&&r[h].labelAlignTo==="labelLine"){var f=r[h].label.x-v;r[h].linePoints[1][0]+=f,r[h].label.x=v}Ga(r,l,l+o)&&c(r)}function ko(r,a,e,t,n,i,o,s){for(var l=[],v=[],u=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=0;d<r.length;d++){var h=r[d].label;St(r[d])||(h.x<a?(u=Math.min(u,h.x),l.push(r[d])):(c=Math.max(c,h.x),v.push(r[d])))}for(var d=0;d<r.length;d++){var f=r[d];if(!St(f)&&f.linePoints){if(f.labelStyleWidth!=null)continue;var h=f.label,g=f.linePoints,p=void 0;f.labelAlignTo==="edge"?h.x<a?p=g[2][0]-f.labelDistance-o-f.edgeDistance:p=o+n-f.edgeDistance-g[2][0]-f.labelDistance:f.labelAlignTo==="labelLine"?h.x<a?p=u-o-f.bleedMargin:p=o+n-c-f.bleedMargin:h.x<a?p=h.x-o-f.bleedMargin:p=o+n-h.x-f.bleedMargin,f.targetTextWidth=p,Sr(f,p)}}Na(v,a,e,t,1,n,i,o,s,c),Na(l,a,e,t,-1,n,i,o,s,u);for(var d=0;d<r.length;d++){var f=r[d];if(!St(f)&&f.linePoints){var h=f.label,g=f.linePoints,y=f.labelAlignTo==="edge",x=h.style.padding,m=x?x[1]+x[3]:0,_=h.style.backgroundColor?0:m,b=f.rect.width+_,A=g[1][0]-g[2][0];y?h.x<a?g[2][0]=o+f.edgeDistance+b+f.labelDistance:g[2][0]=o+n-f.edgeDistance-b-f.labelDistance:(h.x<a?g[2][0]=h.x+f.labelDistance:g[2][0]=h.x-f.labelDistance,g[1][0]=g[2][0]+A),g[1][1]=g[2][1]=h.y}}}function Sr(r,a,e){if(e===void 0&&(e=!1),r.labelStyleWidth==null){var t=r.label,n=t.style,i=r.rect,o=n.backgroundColor,s=n.padding,l=s?s[1]+s[3]:0,v=n.overflow,u=i.width+(o?0:l);if(a<u||e){var c=i.height;if(v&&v.match("break")){t.setStyle("backgroundColor",null),t.setStyle("width",a-l);var d=t.getBoundingRect();t.setStyle("width",Math.ceil(d.width)),t.setStyle("backgroundColor",o)}else{var h=a-l,f=a<u?h:e?h>r.unconstrainedWidth?null:h:null;t.setStyle("width",f)}var g=t.getBoundingRect();i.width=g.width;var p=(t.style.margin||0)+2.1;i.height=g.height+p,i.y-=(i.height-c)/2}}}function St(r){return r.position==="center"}function Bo(r){var a=r.getData(),e=[],t,n,i=!1,o=(r.get("minShowLabelAngle")||0)*Eo,s=a.getLayout("viewRect"),l=a.getLayout("r"),v=s.width,u=s.x,c=s.y,d=s.height;function h(A){A.ignore=!0}function f(A){if(!A.ignore)return!0;for(var T in A.states)if(A.states[T].ignore===!1)return!0;return!1}a.each(function(A){var T=a.getItemGraphicEl(A),S=T.shape,w=T.getTextContent(),L=T.getTextGuideLine(),I=a.getItemModel(A),D=I.getModel("label"),k=D.get("position")||I.get(["emphasis","label","position"]),nt=D.get("distanceToLabelLine"),it=D.get("alignTo"),ot=N(D.get("edgeDistance"),v),Mr=D.get("bleedMargin"),ke=I.getModel("labelLine"),ye=ke.get("length");ye=N(ye,v);var Be=ke.get("length2");if(Be=N(Be,v),Math.abs(S.endAngle-S.startAngle)<o){M(w.states,h),w.ignore=!0;return}if(!!f(w)){var Ze=(S.startAngle+S.endAngle)/2,G=Math.cos(Ze),te=Math.sin(Ze),xe,Ve,qt,ze;t=S.cx,n=S.cy;var se=k==="inside"||k==="inner";if(k==="center")xe=S.cx,Ve=S.cy,ze="center";else{var st=(se?(S.r+S.r0)/2*G:S.r*G)+t,lt=(se?(S.r+S.r0)/2*te:S.r*te)+n;if(xe=st+G*3,Ve=lt+te*3,!se){var Kt=st+G*(ye+l-S.r),Jt=lt+te*(ye+l-S.r),Qt=Kt+(G<0?-1:1)*Be,ea=Jt;it==="edge"?xe=G<0?u+ot:u+v-ot:xe=Qt+(G<0?-nt:nt),Ve=ea,qt=[[st,lt],[Kt,Jt],[Qt,ea]]}ze=se?"center":it==="edge"?G>0?"right":"left":G>0?"left":"right"}var be=Math.PI,le=0,_e=D.get("rotate");if(ja(_e))le=_e*(be/180);else if(k==="center")le=0;else if(_e==="radial"||_e===!0){var wr=G<0?-Ze+be:-Ze;le=wr}else if(_e==="tangential"&&k!=="outside"&&k!=="outer"){var ue=Math.atan2(G,te);ue<0&&(ue=be*2+ue);var Ar=te>0;Ar&&(ue=be+ue),le=ue-be}if(i=!!le,w.x=xe,w.y=Ve,w.rotation=le,w.setStyle({verticalAlign:"middle"}),se){w.setStyle({align:ze});var ut=w.states.select;ut&&(ut.x+=w.x,ut.y+=w.y)}else{var Se=w.getBoundingRect().clone();Se.applyTransform(w.getComputedTransform());var ta=(w.style.margin||0)+2.1;Se.y-=ta/2,Se.height+=ta,e.push({label:w,labelLine:L,position:k,len:ye,len2:Be,minTurnAngle:ke.get("minTurnAngle"),maxSurfaceAngle:ke.get("maxSurfaceAngle"),surfaceNormal:new E(G,te),linePoints:qt,textAlign:ze,labelDistance:nt,labelAlignTo:it,edgeDistance:ot,bleedMargin:Mr,rect:Se,unconstrainedWidth:Se.width,labelStyleWidth:w.style.width})}T.setTextConfig({inside:se})}}),!i&&r.get("avoidLabelOverlap")&&ko(e,t,n,l,v,d,u,c);for(var g=0;g<e.length;g++){var p=e[g],y=p.label,x=p.labelLine,m=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:p.textAlign}),m&&(M(y.states,h),y.ignore=!0);var _=y.states.select;_&&(_.x+=y.x,_.y+=y.y)}if(x){var b=p.linePoints;m||!b?(M(x.states,h),x.ignore=!0):(Ja(b,p.minTurnAngle),Ln(b,p.surfaceNormal,p.maxSurfaceAngle),x.setShape({points:b}),y.__hostTarget.textGuideLineConfig={anchor:new E(b[0][0],b[0][1])})}}}function Ye(r,a,e){var t=r.get("borderRadius");if(t==null)return e?{cornerRadius:0}:null;de(t)||(t=[t,t,t,t]);var n=Math.abs(a.r||0-a.r0||0);return{cornerRadius:W(t,function(i){return sn(i,n)})}}var Zo=function(r){P(a,r);function a(e,t,n){var i=r.call(this)||this;i.z2=2;var o=new fe;return i.setTextContent(o),i.updateData(e,t,n,!0),i}return a.prototype.updateData=function(e,t,n,i){var o=this,s=e.hostModel,l=e.getItemModel(t),v=l.getModel("emphasis"),u=e.getItemLayout(t),c=J(Ye(l.getModel("itemStyle"),u,!0),u);if(isNaN(c.startAngle)){o.setShape(c);return}if(i){o.setShape(c);var d=s.getShallow("animationType");s.ecModel.ssr?(De(o,{scaleX:0,scaleY:0},s,{dataIndex:t,isFrom:!0}),o.originX=c.cx,o.originY=c.cy):d==="scale"?(o.shape.r=u.r0,De(o,{shape:{r:u.r}},s,t)):n!=null?(o.setShape({startAngle:n,endAngle:n}),De(o,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,t)):(o.shape.endAngle=u.startAngle,$e(o,{shape:{endAngle:u.endAngle}},s,t))}else ln(o),$e(o,{shape:c},s,t);o.useStyle(e.getItemVisual(t,"style")),un(o,l);var h=(u.startAngle+u.endAngle)/2,f=s.get("selectedOffset"),g=Math.cos(h)*f,p=Math.sin(h)*f,y=l.getShallow("cursor");y&&o.attr("cursor",y),this._updateLabel(s,e,t),o.ensureState("emphasis").shape=J({r:u.r+(v.get("scale")&&v.get("scaleSize")||0)},Ye(v.getModel("itemStyle"),u)),J(o.ensureState("select"),{x:g,y:p,shape:Ye(l.getModel(["select","itemStyle"]),u)}),J(o.ensureState("blur"),{shape:Ye(l.getModel(["blur","itemStyle"]),u)});var x=o.getTextGuideLine(),m=o.getTextContent();x&&J(x.ensureState("select"),{x:g,y:p}),J(m.ensureState("select"),{x:g,y:p}),vn(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},a.prototype._updateLabel=function(e,t,n){var i=this,o=t.getItemModel(n),s=o.getModel("labelLine"),l=t.getItemVisual(n,"style"),v=l&&l.fill,u=l&&l.opacity;hn(i,cn(o),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:v,defaultOpacity:u,defaultText:e.getFormattedLabel(n,"normal")||t.getName(n)});var c=i.getTextContent();i.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var d=e.get(["label","position"]);if(d!=="outside"&&d!=="outer")i.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new et,this.setTextGuideLine(h)),Qa(this,er(o),{stroke:v,opacity:fn(s.get(["lineStyle","opacity"]),u,1)})}},a}(qa),Vo=function(r){P(a,r);function a(){var e=r!==null&&r.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return a.prototype.init=function(){var e=new ce;this._sectorGroup=e},a.prototype.render=function(e,t,n,i){var o=e.getData(),s=this._data,l=this.group,v;if(!s&&o.count()>0){for(var u=o.getItemLayout(0),c=1;isNaN(u&&u.startAngle)&&c<o.count();++c)u=o.getItemLayout(c);u&&(v=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&e.get("showEmptyCircle")){var d=new qa({shape:_r(e,n)});d.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,l.add(d)}o.diff(s).add(function(h){var f=new Zo(o,h,v);o.setItemGraphicEl(h,f),l.add(f)}).update(function(h,f){var g=s.getItemGraphicEl(f);g.updateData(o,h,v),g.off("click"),l.add(g),o.setItemGraphicEl(h,g)}).remove(function(h){var f=s.getItemGraphicEl(h);dn(f,e,h)}).execute(),Bo(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},a.prototype.dispose=function(){},a.prototype.containPoint=function(e,t){var n=t.getData(),i=n.getItemLayout(0);if(i){var o=e[0]-i.cx,s=e[1]-i.cy,l=Math.sqrt(o*o+s*s);return l<=i.r&&l>=i.r0}},a.type="pie",a}(gn),zo=Vo;function No(r,a,e){a=de(a)&&{coordDimensions:a}||J({encodeDefine:r.getEncode()},a);var t=r.getSource(),n=pn(t,a).dimensions,i=new mn(n,r);return i.initData(t,e),i}var Go=function(){function r(a,e){this._getDataWithEncodedVisual=a,this._getRawData=e}return r.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},r.prototype.containName=function(a){var e=this._getRawData();return e.indexOfName(a)>=0},r.prototype.indexOfName=function(a){var e=this._getDataWithEncodedVisual();return e.indexOfName(a)},r.prototype.getItemVisual=function(a,e){var t=this._getDataWithEncodedVisual();return t.getItemVisual(a,e)},r}(),Wo=Go,Ho=function(r){P(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Wo(R(this.getData,this),R(this.getRawData,this)),this._defaultLabelLine(e)},a.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return No(this,{coordDimensions:["value"],encodeDefaulter:V(yn,this)})},a.prototype.getDataParams=function(e){var t=this.getData(),n=r.prototype.getDataParams.call(this,e),i=[];return t.each(t.mapDimension("value"),function(o){i.push(o)}),n.percent=xn(i,e,t.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},a.prototype._defaultLabelLine=function(e){bn(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(_n),Yo=Ho;function Fo(r){return{seriesType:r,reset:function(a,e){var t=a.getData();t.filterSelf(function(n){var i=t.mapDimension("value"),o=t.get(i,n);return!(ja(o)&&!isNaN(o)&&o<0)})}}}function Ko(r){r.registerChartView(zo),r.registerSeriesModel(Yo),Sn("pie",r.registerAction),r.registerLayout(V(Oo,"pie")),r.registerProcessor(Po("pie")),r.registerProcessor(Fo("pie"))}export{ri as B,Wo as L,Vn as R,Y as T,qo as a,$o as b,Ko as c,Uo as d,oi as e,ii as f,yr as g,No as h,jo as i,Po as j,Qa as k,er as l,ni as m,Ye as n,Nn as o,bo as p,Io as q,we as r,Ee as s};
