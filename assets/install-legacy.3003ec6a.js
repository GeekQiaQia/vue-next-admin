System.register(["./installCanvasRenderer-legacy.4e1c6c4b.js"],(function(e){"use strict";var t,n,i,o,a,r,s,l,u,d,h,c,p,g,f,v,m,y,x,b,_,M,w,S,A,C,T,L,I,D,O,k,R,P,z,E,B,V,Z,N,W,H,Y,G,X,U,F,j,q,K,$,J,Q,ee,te,ne,ie,oe,ae,re,se,le,ue,de,he,ce,pe,ge,fe,ve,me,ye,xe,be,_e,Me,we,Se,Ae,Ce,Te,Le,Ie,De,Oe,ke,Re,Pe,ze,Ee,Be,Ve,Ze,Ne,We,He,Ye,Ge,Xe,Ue,Fe,je,qe,Ke,$e,Je,Qe,et,tt,nt,it;return{setters:[function(e){t=e.a0,n=e.a4,i=e.al,o=e.am,a=e.an,r=e.J,s=e.ao,l=e.ap,u=e.a9,d=e.aq,h=e.a8,c=e.ar,p=e.as,g=e.at,f=e.q,v=e.a3,m=e.au,y=e.av,x=e.O,b=e.v,_=e.aw,M=e.U,w=e.ax,S=e.ay,A=e.az,C=e.x,T=e.aA,L=e.aB,I=e.ag,D=e.aC,O=e.aD,k=e.aE,R=e.aa,P=e.aF,z=e.aG,E=e._,B=e.aH,V=e.F,Z=e.aI,N=e.aJ,W=e.aK,H=e.aL,Y=e.Q,G=e.aM,X=e.E,U=e.ae,F=e.a6,j=e.Y,q=e.a7,K=e.aN,$=e.aO,J=e.aP,Q=e.af,ee=e.aQ,te=e.S,ne=e.C,ie=e.$,oe=e.aR,ae=e.aS,re=e.aT,se=e.aU,le=e.aV,ue=e.M,de=e.aW,he=e.aX,ce=e.aY,pe=e.aZ,ge=e.Z,fe=e.a_,ve=e.a$,me=e.b0,ye=e.s,xe=e.b1,be=e.b2,_e=e.b3,Me=e.aj,we=e.K,Se=e.w,Ae=e.b4,Ce=e.b5,Te=e.b6,Le=e.u,Ie=e.N,De=e.b7,Oe=e.b8,ke=e.b9,Re=e.ba,Pe=e.bb,ze=e.bc,Ee=e.bd,Be=e.be,Ve=e.bf,Ze=e.j,Ne=e.bg,We=e.bh,He=e.bi,Ye=e.bj,Ge=e.bk,Xe=e.bl,Ue=e.bm,Fe=e.bn,je=e.P,qe=e.bo,Ke=e.bp,$e=e.bq,Je=e.br,Qe=e.bs,et=e.bt,tt=e.bu,nt=e.bv,it=e.bw}],execute:function(){e({a:function(e){Le(bo),Le(Oo)},b:function(e){e.registerComponentModel(vi),e.registerComponentView(yi),pi("saveAsImage",bi),pi("magicType",Ai),pi("dataView",Ri),pi("dataZoom",io),pi("restore",Vi),Le(di)},c:function(e){e.registerChartView(Uo),e.registerSeriesModel($o),it("pie",e.registerAction),e.registerLayout(j(Eo,"pie")),e.registerProcessor(Bo("pie")),e.registerProcessor({seriesType:"pie",reset:function(e,t){var n=e.getData();n.filterSelf((function(e){var t=n.mapDimension("value"),i=n.get(t,e);return!(Ne(i)&&!isNaN(i)&&i<0)}))}})},d:function(e){e.registerUpdateLifecycle("series:beforeupdate",(function(e,t,n){var i=Bt(t).labelManager;i||(i=Bt(t).labelManager=new Et),i.clearLabels()})),e.registerUpdateLifecycle("series:layoutlabels",(function(e,t,n){var i=Bt(t).labelManager;n.updatedSeries.forEach((function(e){i.addLabelsOfSeries(t.getViewOfSeriesModel(e))})),i.updateLayoutConfig(t),i.layout(t),i.processLabelsOverall()}))},e:Wn,f:Nn,h:Fo,i:function(e){e.registerComponentModel(oo),e.registerComponentView(ao)},j:Bo,k:Ct,l:Tt,m:Zn,n:Yo,o:Ft,p:bo,q:Oo,r:pi,s:jt});var ot=2*Math.PI,at=t.CMD,rt=["top","right","bottom","left"];function st(e,t,n,i,o){var a=n.width,r=n.height;switch(e){case"top":i.set(n.x+a/2,n.y-t),o.set(0,-1);break;case"bottom":i.set(n.x+a/2,n.y+r+t),o.set(0,1);break;case"left":i.set(n.x-t,n.y+r/2),o.set(-1,0);break;case"right":i.set(n.x+a+t,n.y+r/2),o.set(1,0)}}function lt(e,t,n,i,o,a,r,s,l){r-=e,s-=t;var u=Math.sqrt(r*r+s*s),d=(r/=u)*n+e,h=(s/=u)*n+t;if(Math.abs(i-o)%ot<1e-4)return l[0]=d,l[1]=h,u-n;if(a){var c=i;i=g(o),o=g(c)}else i=g(i),o=g(o);i>o&&(o+=ot);var p=Math.atan2(s,r);if(p<0&&(p+=ot),p>=i&&p<=o||p+ot>=i&&p+ot<=o)return l[0]=d,l[1]=h,u-n;var f=n*Math.cos(i)+e,v=n*Math.sin(i)+t,m=n*Math.cos(o)+e,y=n*Math.sin(o)+t,x=(f-r)*(f-r)+(v-s)*(v-s),b=(m-r)*(m-r)+(y-s)*(y-s);return x<b?(l[0]=f,l[1]=v,Math.sqrt(x)):(l[0]=m,l[1]=y,Math.sqrt(b))}function ut(e,t,n,i,o,a,r,s){var l=o-e,u=a-t,d=n-e,h=i-t,c=Math.sqrt(d*d+h*h),p=(l*(d/=c)+u*(h/=c))/c;s&&(p=Math.min(Math.max(p,0),1)),p*=c;var g=r[0]=e+p*d,f=r[1]=t+p*h;return Math.sqrt((g-o)*(g-o)+(f-a)*(f-a))}function dt(e,t,n,i,o,a,r){n<0&&(e+=n,n=-n),i<0&&(t+=i,i=-i);var s=e+n,l=t+i,u=r[0]=Math.min(Math.max(o,e),s),d=r[1]=Math.min(Math.max(a,t),l);return Math.sqrt((u-o)*(u-o)+(d-a)*(d-a))}var ht=[];function ct(e,t,n){var i=dt(t.x,t.y,t.width,t.height,e.x,e.y,ht);return n.set(ht[0],ht[1]),i}function pt(e,t,n){for(var i,o,a=0,r=0,s=0,l=0,u=1/0,d=t.data,h=e.x,g=e.y,f=0;f<d.length;){var v=d[f++];1===f&&(s=a=d[f],l=r=d[f+1]);var m=u;switch(v){case at.M:a=s=d[f++],r=l=d[f++];break;case at.L:m=ut(a,r,d[f],d[f+1],h,g,ht,!0),a=d[f++],r=d[f++];break;case at.C:m=p(a,r,d[f++],d[f++],d[f++],d[f++],d[f],d[f+1],h,g,ht),a=d[f++],r=d[f++];break;case at.Q:m=c(a,r,d[f++],d[f++],d[f],d[f+1],h,g,ht),a=d[f++],r=d[f++];break;case at.A:var y=d[f++],x=d[f++],b=d[f++],_=d[f++],M=d[f++],w=d[f++];f+=1;var S=!!(1-d[f++]);i=Math.cos(M)*b+y,o=Math.sin(M)*_+x,f<=1&&(s=i,l=o),m=lt(y,x,_,M,M+w,S,(h-y)*_/b+y,g,ht),a=Math.cos(M+w)*b+y,r=Math.sin(M+w)*_+x;break;case at.R:m=dt(s=a=d[f++],l=r=d[f++],d[f++],d[f++],h,g,ht);break;case at.Z:m=ut(a,r,s,l,h,g,ht,!0),a=s,r=l}m<u&&(u=m,n.set(ht[0],ht[1]))}return u}var gt=new n,ft=new n,vt=new n,mt=new n,yt=new n;function xt(e,t){if(e){var i=e.getTextGuideLine(),o=e.getTextContent();if(o&&i){var a=e.textGuideLineConfig||{},r=[[0,0],[0,0],[0,0]],s=a.candidates||rt,d=o.getBoundingRect().clone();d.applyTransform(o.getComputedTransform());var h=1/0,c=a.anchor,p=e.getComputedTransform(),g=p&&l([],p),f=t.get("length2")||0;c&&vt.copy(c);for(var v=0;v<s.length;v++){st(s[v],0,d,gt,mt),n.scaleAndAdd(ft,gt,mt,f),ft.transform(g);var m=e.getBoundingRect(),y=c?c.distance(ft):e instanceof u?pt(ft,e.path,vt):ct(ft,m,vt);y<h&&(h=y,ft.transform(p),vt.transform(p),vt.toArray(r[0]),ft.toArray(r[1]),gt.toArray(r[2]))}Mt(r,t.get("minTurnAngle")),i.setShape({points:r})}}}var bt=[],_t=new n;function Mt(e,t){if(t<=180&&t>0){t=t/180*Math.PI,gt.fromArray(e[0]),ft.fromArray(e[1]),vt.fromArray(e[2]),n.sub(mt,gt,ft),n.sub(yt,vt,ft);var i=mt.len(),o=yt.len();if(!(i<.001||o<.001)){mt.scale(1/i),yt.scale(1/o);var a=mt.dot(yt);if(Math.cos(t)<a){var r=ut(ft.x,ft.y,vt.x,vt.y,gt.x,gt.y,bt,!1);_t.fromArray(bt),_t.scaleAndAdd(yt,r/Math.tan(Math.PI-t));var s=vt.x!==ft.x?(_t.x-ft.x)/(vt.x-ft.x):(_t.y-ft.y)/(vt.y-ft.y);if(isNaN(s))return;s<0?n.copy(_t,ft):s>1&&n.copy(_t,vt),_t.toArray(e[1])}}}}function wt(e,t,i){if(i<=180&&i>0){i=i/180*Math.PI,gt.fromArray(e[0]),ft.fromArray(e[1]),vt.fromArray(e[2]),n.sub(mt,ft,gt),n.sub(yt,vt,ft);var o=mt.len(),a=yt.len();if(!(o<.001||a<.001)&&(mt.scale(1/o),yt.scale(1/a),mt.dot(t)<Math.cos(i))){var r=ut(ft.x,ft.y,vt.x,vt.y,gt.x,gt.y,bt,!1);_t.fromArray(bt);var s=Math.PI/2,l=s+Math.acos(yt.dot(t))-i;if(l>=s)n.copy(_t,vt);else{_t.scaleAndAdd(yt,r/Math.tan(Math.PI/2-l));var u=vt.x!==ft.x?(_t.x-ft.x)/(vt.x-ft.x):(_t.y-ft.y)/(vt.y-ft.y);if(isNaN(u))return;u<0?n.copy(_t,ft):u>1&&n.copy(_t,vt)}_t.toArray(e[1])}}}function St(e,t,n,i){var o="normal"===n,a=o?e:e.ensureState(n);a.ignore=t;var r=i.get("smooth");r&&!0===r&&(r=.3),a.shape=a.shape||{},r>0&&(a.shape.smooth=r);var s=i.getModel("lineStyle").getLineStyle();o?e.useStyle(s):a.style=s}function At(e,t){var n=t.smooth,i=t.points;if(i)if(e.moveTo(i[0][0],i[0][1]),n>0&&i.length>=3){var o=d(i[0],i[1]),a=d(i[1],i[2]);if(!o||!a)return e.lineTo(i[1][0],i[1][1]),void e.lineTo(i[2][0],i[2][1]);var r=Math.min(o,a)*n,s=h([],i[1],i[0],r/o),l=h([],i[1],i[2],r/a),u=h([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var c=1;c<i.length;c++)e.lineTo(i[c][0],i[c][1])}function Ct(e,t,n){var s=e.getTextGuideLine(),l=e.getTextContent();if(l){for(var u=t.normal,d=u.get("show"),h=l.ignore,c=0;c<i.length;c++){var p=i[c],g=t[p],f="normal"===p;if(g){var v=g.get("show");if((f?h:o(l.states[p]&&l.states[p].ignore,h))||!o(v,d)){var m=f?s:s&&s.states[p];m&&(m.ignore=!0);continue}s||(s=new a,e.setTextGuideLine(s),f||!h&&d||St(s,!0,"normal",t.normal),e.stateProxy&&(s.stateProxy=e.stateProxy)),St(s,!1,p,g)}}if(s){r(s.style,n),s.style.fill=null;var y=u.get("showAbove");(e.textGuideLineConfig=e.textGuideLineConfig||{}).showAbove=y||!1,s.buildPath=At}}else s&&e.removeTextGuideLine()}function Tt(e,t){t=t||"labelLine";for(var n={normal:e.getModel(t)},i=0;i<s.length;i++){var o=s[i];n[o]=e.getModel([o,t])}return n}function Lt(e){if(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice());return t}}function It(e,t){var n=e.label,i=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:Lt(i&&i.shape.points)}}var Dt=["align","verticalAlign","width","height","fontSize"],Ot=new R,kt=f(),Rt=f();function Pt(e,t,n){for(var i=0;i<n.length;i++){var o=n[i];null!=t[o]&&(e[o]=t[o])}}var zt=["x","y","rotation"],Et=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(e,t,n,i,o){var a=i.style,r=i.__hostTarget.textConfig||{},s=i.getComputedTransform(),l=i.getBoundingRect().plain();v.applyTransform(l,l,s),s?Ot.setLocalTransform(s):(Ot.x=Ot.y=Ot.rotation=Ot.originX=Ot.originY=0,Ot.scaleX=Ot.scaleY=1);var u,d=i.__hostTarget;if(d){u=d.getBoundingRect().plain();var h=d.getComputedTransform();v.applyTransform(u,u,h)}var c=u&&d.getTextGuideLine();this._labelList.push({label:i,labelLine:c,seriesModel:n,dataIndex:e,dataType:t,layoutOption:o,computedLayoutOption:null,rect:l,hostRect:u,priority:u?u.width*u.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:c&&c.ignore,x:Ot.x,y:Ot.y,scaleX:Ot.scaleX,scaleY:Ot.scaleY,rotation:Ot.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:i.cursor,attachedPos:r.position,attachedRot:r.rotation}})},e.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var n=e.__model,i=n.get("labelLayout");(m(i)||y(i).length)&&e.group.traverse((function(e){if(e.ignore)return!0;var o=e.getTextContent(),a=x(e);o&&!o.disableLabelLayout&&t._addLabel(a.dataIndex,a.dataType,n,o,i)}))},e.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),n=e.getHeight();function i(e,t){return function(){xt(e,t)}}for(var o=0;o<this._labelList.length;o++){var a=this._labelList[o],r=a.label,s=r.__hostTarget,l=a.defaultAttr,u=void 0;u=(u=m(a.layoutOption)?a.layoutOption(It(a,s)):a.layoutOption)||{},a.computedLayoutOption=u;var d=Math.PI/180;s&&s.setTextConfig({local:!1,position:null!=u.x||null!=u.y?null:l.attachedPos,rotation:null!=u.rotate?u.rotate*d:l.attachedRot,offset:[u.dx||0,u.dy||0]});var h=!1;if(null!=u.x?(r.x=b(u.x,t),r.setStyle("x",0),h=!0):(r.x=l.x,r.setStyle("x",l.style.x)),null!=u.y?(r.y=b(u.y,n),r.setStyle("y",0),h=!0):(r.y=l.y,r.setStyle("y",l.style.y)),u.labelLinePoints){var c=s.getTextGuideLine();c&&(c.setShape({points:u.labelLinePoints}),h=!1)}kt(r).needsUpdateLabelLine=h,r.rotation=null!=u.rotate?u.rotate*d:l.rotation,r.scaleX=l.scaleX,r.scaleY=l.scaleY;for(var p=0;p<Dt.length;p++){var g=Dt[p];r.setStyle(g,null!=u[g]?u[g]:l.style[g])}if(u.draggable){if(r.draggable=!0,r.cursor="move",s){var f=a.seriesModel;null!=a.dataIndex&&(f=a.seriesModel.getData(a.dataType).getItemModel(a.dataIndex)),r.on("drag",i(s,f.getModel("labelLine")))}}else r.off("drag"),r.cursor=l.cursor}},e.prototype.layout=function(e){var t=e.getWidth(),n=e.getHeight(),i=_(this._labelList),o=M(i,(function(e){return"shiftX"===e.layoutOption.moveOverlap})),a=M(i,(function(e){return"shiftY"===e.layoutOption.moveOverlap}));w(o,0,t),S(a,0,n);var r=M(i,(function(e){return e.layoutOption.hideOverlap}));A(r)},e.prototype.processLabelsOverall=function(){var e=this;C(this._chartViewList,(function(t){var n=t.__model,i=t.ignoreLabelLineUpdate,o=n.isAnimationEnabled();t.group.traverse((function(t){if(t.ignore&&!t.forceLabelAnimation)return!0;var a=!i,r=t.getTextContent();!a&&r&&(a=kt(r).needsUpdateLabelLine),a&&e._updateLabelLine(t,n),o&&e._animateLabels(t,n)}))}))},e.prototype._updateLabelLine=function(e,t){var n=e.getTextContent(),i=x(e),o=i.dataIndex;if(n&&null!=o){var a=t.getData(i.dataType),r=a.getItemModel(o),s={},l=a.getItemVisual(o,"style"),u=a.getVisual("drawType");s.stroke=l[u];var d=r.getModel("labelLine");Ct(e,Tt(r),s),xt(e,d)}},e.prototype._animateLabels=function(e,t){var n=e.getTextContent(),i=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!T(e))){var a=(g=kt(n)).oldLayout,r=x(e),s=r.dataIndex,l={x:n.x,y:n.y,rotation:n.rotation},u=t.getData(r.dataType);if(a){n.attr(a);var d=e.prevStates;d&&(D(d,"select")>=0&&n.attr(g.oldLayoutSelect),D(d,"emphasis")>=0&&n.attr(g.oldLayoutEmphasis)),O(n,l,t,s)}else if(n.attr(l),!L(n).valueAnimation){var h=o(n.style.opacity,1);n.style.opacity=0,I(n,{style:{opacity:h}},t,s)}if(g.oldLayout=l,n.states.select){var c=g.oldLayoutSelect={};Pt(c,l,zt),Pt(c,n.states.select,zt)}if(n.states.emphasis){var p=g.oldLayoutEmphasis={};Pt(p,l,zt),Pt(p,n.states.emphasis,zt)}k(n,s,u,t,t)}if(i&&!i.ignore&&!i.invisible){a=(g=Rt(i)).oldLayout;var g,f={points:i.shape.points};a?(i.attr({shape:a}),O(i,{shape:f},t)):(i.setShape(f),i.style.strokePercent=0,I(i,{style:{strokePercent:1}},t)),g.oldLayout=f}},e}(),Bt=f(),Vt="\0_ec_interaction_mutex";function Zt(e,t){return!!Nt(e)[t]}function Nt(e){return e[Vt]||(e[Vt]={})}P({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},z);var Wt=function(e){function t(t){var n=e.call(this)||this;n._zr=t;var i=B(n._mousedownHandler,n),o=B(n._mousemoveHandler,n),a=B(n._mouseupHandler,n),s=B(n._mousewheelHandler,n),l=B(n._pinchHandler,n);return n.enable=function(e,n){this.disable(),this._opt=r(V(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",i),t.on("mousemove",o),t.on("mouseup",a)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",s),t.on("pinch",l))},n.disable=function(){t.off("mousedown",i),t.off("mousemove",o),t.off("mouseup",a),t.off("mousewheel",s),t.off("pinch",l)},n}return E(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!(Z(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&Gt("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!Zt(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,i=this._x,o=this._y,a=t-i,r=n-o;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&W(e.event),Yt(this,"pan","moveOnMouseMove",e,{dx:a,dy:r,oldX:i,oldY:o,newX:t,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){Z(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=Gt("zoomOnMouseWheel",e,this._opt),n=Gt("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,o=Math.abs(i),a=e.offsetX,r=e.offsetY;if(0!==i&&(t||n)){if(t){var s=o>3?1.4:o>1?1.2:1.1;Ht(this,"zoom","zoomOnMouseWheel",e,{scale:i>0?s:1/s,originX:a,originY:r,isAvailableBehavior:null})}if(n){var l=Math.abs(i);Ht(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(i>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:r,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){Zt(this._zr,"globalPan")||Ht(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(H);function Ht(e,t,n,i,o){e.pointerChecker&&e.pointerChecker(i,o.originX,o.originY)&&(W(i.event),Yt(e,t,n,i,o))}function Yt(e,t,n,i,o){o.isAvailableBehavior=B(Gt,null,n,i),e.trigger(t,o)}function Gt(e,t,n){var i=n[e];return!e||i&&(!N(i)||t.event[i+"Key"])}var Xt=e("R",Wt),Ut={axisPointer:1,tooltip:1,brush:1};function Ft(e,t,n){var i=t.getComponentByElement(e.topTarget),o=i&&i.coordinateSystem;return i&&i!==n&&!Ut.hasOwnProperty(i.mainType)&&o&&o.model!==n}function jt(e,t,n,i,o,a){e=e||0;var r=n[1]-n[0];if(null!=o&&(o=Kt(o,[0,r])),null!=a&&(a=Math.max(a,null!=o?o:0)),"all"===i){var s=Math.abs(t[1]-t[0]);s=Kt(s,[0,r]),o=a=Kt(s,[o,a]),i=0}t[0]=Kt(t[0],n),t[1]=Kt(t[1],n);var l=qt(t,i);t[i]+=e;var u,d=o||0,h=n.slice();return l.sign<0?h[0]+=d:h[1]-=d,t[i]=Kt(t[i],h),u=qt(t,i),null!=o&&(u.sign!==l.sign||u.span<o)&&(t[1-i]=t[i]+l.sign*o),u=qt(t,i),null!=a&&u.span>a&&(t[1-i]=t[i]+u.sign*a),t}function qt(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function Kt(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var $t=!0,Jt=Math.min,Qt=Math.max,en=Math.pow,tn="globalPan",nn={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},on={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},an={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},rn=0,sn=function(e){function t(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new Y,n._uid="brushController_"+rn++,C(Pn,(function(e,t){this._handlers[t]=B(e,this)}),n),n}return E(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,n){Nt(e)[t]=n}(t,tn,this._uid),C(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=G(V(an),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,n){var i=Nt(e);i[t]===n&&(i[t]=null)}(e,tn,this._uid),C(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};C(e,(function(e){t[e.panelId]=V(e)}))}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=X(e,(function(e){return G(V(an),e,!0)}));var t=this._covers,n=this._covers=[],i=this,o=this._creatingCover;return new U(t,e,(function(e,t){return a(e.__brushOption,t)}),a).add(r).update(r).remove((function(e){t[e]!==o&&i.group.remove(t[e])})).execute(),this;function a(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function r(a,r){var s=e[a];if(null!=r&&t[r]===o)n[a]=t[r];else{var l=n[a]=null!=r?(t[r].__brushOption=s,t[r]):un(i,ln(i,s));cn(i,l)}}},t.prototype.unmount=function(){return this.enableBrush(!1),vn(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(H);function ln(e,t){var n=En[t.brushType].createCover(e,t);return n.__brushOption=t,hn(n,t),e.group.add(n),n}function un(e,t){var n=pn(t);return n.endCreating&&(n.endCreating(e,t),hn(t,t.__brushOption)),t}function dn(e,t){var n=t.__brushOption;pn(t).updateCoverShape(e,t,n.range,n)}function hn(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function cn(e,t){pn(t).updateCommon(e,t),dn(e,t)}function pn(e){return En[e.__brushOption.brushType]}function gn(e,t,n){var i,o=e._panels;if(!o)return $t;var a=e._transform;return C(o,(function(e){e.isTargetByCursor(t,n,a)&&(i=e)})),i}function fn(e,t){var n=e._panels;if(!n)return $t;var i=t.__brushOption.panelId;return null!=i?n[i]:$t}function vn(e){var t=e._covers,n=t.length;return C(t,(function(t){e.group.remove(t)}),e),t.length=0,!!n}function mn(e,t){var n=X(e._covers,(function(e){var t=e.__brushOption,n=V(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function yn(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function xn(e,t,n,i){var o=new Y;return o.add(new q({name:"main",style:wn(n),silent:!0,draggable:!0,cursor:"move",drift:j(Cn,e,t,o,["n","s","w","e"]),ondragend:j(mn,t,{isEnd:!0})})),C(i,(function(n){o.add(new q({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:j(Cn,e,t,o,n),ondragend:j(mn,t,{isEnd:!0})}))})),o}function bn(e,t,n,i){var o=i.brushStyle.lineWidth||0,a=Qt(o,6),r=n[0][0],s=n[1][0],l=r-o/2,u=s-o/2,d=n[0][1],h=n[1][1],c=d-a+o/2,p=h-a+o/2,g=d-r,f=h-s,v=g+o,m=f+o;Mn(e,t,"main",r,s,g,f),i.transformable&&(Mn(e,t,"w",l,u,a,m),Mn(e,t,"e",c,u,a,m),Mn(e,t,"n",l,u,v,a),Mn(e,t,"s",l,p,v,a),Mn(e,t,"nw",l,u,a,a),Mn(e,t,"ne",c,u,a,a),Mn(e,t,"sw",l,p,a,a),Mn(e,t,"se",c,p,a,a))}function _n(e,t){var n=t.__brushOption,i=n.transformable,o=t.childAt(0);o.useStyle(wn(n)),o.attr({silent:!i,cursor:i?"move":"default"}),C([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var o=t.childOfName(n.join("")),a=1===n.length?An(e,n[0]):function(e,t){var n=[An(e,t[0]),An(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);o&&o.attr({silent:!i,invisible:!i,cursor:i?on[a]+"-resize":null})}))}function Mn(e,t,n,i,o,a,r){var s,l,u,d,h,c=t.childOfName(n);c&&c.setShape((s=In(e,t,[[i,o],[i+a,o+r]]),l=Jt(s[0][0],s[1][0]),u=Jt(s[0][1],s[1][1]),d=Qt(s[0][0],s[1][0]),h=Qt(s[0][1],s[1][1]),{x:l,y:u,width:d-l,height:h-u}))}function wn(e){return r({strokeNoScale:!0},e.brushStyle)}function Sn(e,t,n,i){var o=[Jt(e,n),Jt(t,i)],a=[Qt(e,n),Qt(t,i)];return[[o[0],a[0]],[o[1],a[1]]]}function An(e,t){var n=K({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return $(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function Cn(e,t,n,i,o,a){var r=n.__brushOption,s=e.toRectRange(r.range),l=Ln(t,o,a);C(i,(function(e){var t=nn[e];s[t[0]][t[1]]+=l[t[0]]})),r.range=e.fromRectRange(Sn(s[0][0],s[1][0],s[0][1],s[1][1])),cn(t,n),mn(t,{isEnd:!1})}function Tn(e,t,n,i){var o=t.__brushOption.range,a=Ln(e,n,i);C(o,(function(e){e[0]+=a[0],e[1]+=a[1]})),cn(e,t),mn(e,{isEnd:!1})}function Ln(e,t,n){var i=e.group,o=i.transformCoordToLocal(t,n),a=i.transformCoordToLocal(0,0);return[o[0]-a[0],o[1]-a[1]]}function In(e,t,n){var i=fn(e,t);return i&&i!==$t?i.clipPath(n,e._transform):V(n)}function Dn(e){var t=e.event;t.preventDefault&&t.preventDefault()}function On(e,t,n){return e.childOfName("main").contain(t,n)}function kn(e,t,n,i){var o,a=e._creatingCover,r=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],i=t[0],o=n[0]-i[0],a=n[1]-i[1];return en(o*o+a*a,.5)>6}(e)||a){if(r&&!a){"single"===s.brushMode&&vn(e);var l=V(s);l.brushType=Rn(l.brushType,r),l.panelId=r===$t?null:r.panelId,a=e._creatingCover=ln(e,l),e._covers.push(a)}if(a){var u=En[Rn(e._brushType,r)];a.__brushOption.range=u.getCreatingRange(In(e,a,e._track)),i&&(un(e,a),u.updateCommon(e,a)),dn(e,a),o={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&gn(e,t,n)&&vn(e)&&(o={isEnd:i,removeOnClick:!0});return o}function Rn(e,t){return"auto"===e?t.defaultBrushType:e}var Pn={mousedown:function(e){if(this._dragging)zn(this,e);else if(!e.target||!e.target.draggable){Dn(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=gn(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,i=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var i=e._zr;return t<0||t>i.getWidth()||n<0||n>i.getHeight()}(e,t.offsetX,t.offsetY)){var i=e._zr,o=e._covers,a=gn(e,t,n);if(!e._dragging)for(var r=0;r<o.length;r++){var s=o[r].__brushOption;if(a&&(a===$t||s.panelId===a.panelId)&&En[s.brushType].contain(o[r],n[0],n[1]))return}a&&i.setCursorStyle("crosshair")}}(this,e,i),this._dragging){Dn(e);var o=kn(this,e,i,!1);o&&mn(this,o)}},mouseup:function(e){zn(this,e)}};function zn(e,t){if(e._dragging){Dn(t);var n=t.offsetX,i=t.offsetY,o=e.group.transformCoordToLocal(n,i),a=kn(e,t,o,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&mn(e,a)}}var En={lineX:Bn(0),lineY:Bn(1),rect:{createCover:function(e,t){function n(e){return e}return xn({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=yn(e);return Sn(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,i){bn(e,t,n,i)},updateCommon:_n,contain:On},polygon:{createCover:function(e,t){var n=new Y;return n.add(new a({name:"main",style:wn(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new F({name:"main",draggable:!0,drift:j(Tn,e,t),ondragend:j(mn,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,i){t.childAt(0).setShape({points:In(e,t,n)})},updateCommon:_n,contain:On}};function Bn(e){return{createCover:function(t,n){return xn({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=yn(t);return[Jt(n[0][e],n[1][e]),Qt(n[0][e],n[1][e])]},updateCoverShape:function(t,n,i,o){var a,r=fn(t,n);if(r!==$t&&r.getLinearBrushOtherExtent)a=r.getLinearBrushOtherExtent(e);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[i,a];e&&l.reverse(),bn(t,n,l,o)},updateCommon:_n,contain:On}}var Vn=e("B",sn);function Zn(e){return e=Hn(e),function(t){return J(t,e)}}function Nn(e,t){return e=Hn(e),function(n){var i=null!=t?t:n,o=i?e.width:e.height,a=i?e.x:e.y;return[a,a+(o||0)]}}function Wn(e,t,n){var i=Hn(e);return function(e,o){return i.contain(o[0],o[1])&&!Ft(e,t,n)}}function Hn(e){return v.create(e)}var Yn=["x","y","radius","angle","single"],Gn=["cartesian2d","polar","singleAxis"];function Xn(e){return e+"Axis"}function Un(e,t){var n,i=Q(),o=[],a=Q();e.eachComponent({mainType:"dataZoom",query:t},(function(e){a.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",r)}while(n);function r(e){!a.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var o=i.get(e);o&&o[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){a.set(e.uid,!0),o.push(e),e.eachTargetAxis((function(e,t){(i.get(e)||i.set(e,[]))[t]=!0}))}return o}function Fn(e){var t=e.ecModel,n={infoList:[],infoMap:Q()};return e.eachTargetAxis((function(e,i){var o=t.getComponent(Xn(e),i);if(o){var a=o.getCoordSysModel();if(a){var r=a.uid,s=n.infoMap.get(r);s||(s={model:a,axisModels:[]},n.infoList.push(s),n.infoMap.set(r,s)),s.axisModels.push(o)}}})),n}var jn=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),qn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return E(t,e),t.prototype.init=function(e,t,n){var i=Kn(e);this.settledOption=i,this.mergeDefaultAndTheme(e,n),this._doInit(i)},t.prototype.mergeOption=function(e){var t=Kn(e);G(this.option,e,!0),G(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;C([["start","startValue"],["end","endValue"]],(function(e,i){"value"===this._rangePropMode[i]&&(t[e[0]]=n[e[0]]=null)}),this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=Q();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return C(Yn,(function(n){var i=this.getReferringComponents(Xn(n),ee);if(i.specified){t=!0;var o=new jn;C(i.models,(function(e){o.add(e.componentIndex)})),e.set(n,o)}}),this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,i=!0;if(i){var o="vertical"===t?"y":"x";a(n.findComponents({mainType:o+"Axis"}),o)}function a(t,n){var o=t[0];if(o){var a=new jn;if(a.add(o.componentIndex),e.set(n,a),i=!1,"x"===n||"y"===n){var r=o.getReferringComponents("grid",te).models[0];r&&C(t,(function(e){o.componentIndex!==e.componentIndex&&r===e.getReferringComponents("grid",te).models[0]&&a.add(e.componentIndex)}))}}}i&&a(n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single"),i&&C(Yn,(function(t){if(i){var o=n.findComponents({mainType:Xn(t),filter:function(e){return"category"===e.get("type",!0)}});if(o[0]){var a=new jn;a.add(o[0].componentIndex),e.set(t,a),i=!1}}}),this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");C([["start","startValue"],["end","endValue"]],(function(i,o){var a=null!=e[i[0]],r=null!=e[i[1]];a&&!r?t[o]="percent":!a&&r?t[o]="value":n?t[o]=n[o]:a&&(t[o]="percent")}))},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(Xn(t),n))}),this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(n,i){C(n.indexList,(function(n){e.call(t,i,n)}))}))},t.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(Xn(e),t)},t.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;C([["start","startValue"],["end","endValue"]],(function(i){null==e[i[0]]&&null==e[i[1]]||(t[i[0]]=n[i[0]]=e[i[0]],t[i[1]]=n[i[1]]=e[i[1]])}),this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;C(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var o=n[i],a=this._targetAxisInfoMap.get(o),r=0;r<a.indexList.length;r++){var s=this.getAxisProxy(o,a.indexList[r]);if(s.hostedBy(this))return s;t||(t=s)}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(ne);function Kn(e){var t={};return C(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}var $n=qn,Jn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.type="dataZoom.select",t}($n),Qn=Jn,ei=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.prototype.render=function(e,t,n,i){this.dataZoomModel=e,this.ecModel=t,this.api=n},t.type="dataZoom",t}(ie),ti=ei,ni=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.type="dataZoom.select",t}(ti),ii=ni,oi=C,ai=le,ri=function(){function e(e,t,n,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return D(Gn,t)>=0}(t)){var n=Xn(this._dimName),i=t.getReferringComponents(n,te).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return V(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,i=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),a=[0,100],r=[],s=[];oi(["start","end"],(function(l,u){var d=e[l],h=e[l+"Value"];"percent"===o[u]?(null==d&&(d=a[u]),h=i.parse(oe(d,a,n))):(t=!0,h=null==h?n[u]:i.parse(h),d=oe(h,n,a)),s[u]=h,r[u]=d})),ai(s),ai(r);var l=this._minMaxSpan;function u(e,t,n,o,a){var r=a?"Span":"ValueSpan";jt(0,e,n,"all",l["min"+r],l["max"+r]);for(var s=0;s<2;s++)t[s]=oe(e[s],n,o,!0),a&&(t[s]=i.parse(t[s]))}return t?u(s,r,n,a,!1):u(r,s,a,n,!0),{valueWindow:s,percentWindow:r}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var i=[1/0,-1/0];oi(n,(function(e){re(i,e.getData(),t)}));var o=e.getAxisModel(),a=se(o.axis.scale,o,i).calculate();return[a.min,a.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),o=e.get("filterMode"),a=this._valueWindow;"none"!==o&&oi(i,(function(e){var t=e.getData(),i=t.mapDimensionsAll(n);if(i.length){if("weakFilter"===o){var r=t.getStore(),s=X(i,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,o,l=0;l<i.length;l++){var u=r.get(s[l],e),d=!isNaN(u),h=u<a[0],c=u>a[1];if(d&&!h&&!c)return!0;d&&(o=!0),h&&(t=!0),c&&(n=!0)}return o&&t&&n}))}else oi(i,(function(n){if("empty"===o)e.setData(t=t.map(n,(function(e){return function(e){return e>=a[0]&&e<=a[1]}(e)?e:NaN})));else{var i={};i[n]=a,t.selectRange(i)}}));oi(i,(function(e){t.setApproximateExtent(a,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;oi(["min","max"],(function(i){var o=t.get(i+"Span"),a=t.get(i+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?o=oe(n[0]+a,n,[0,100],!0):null!=o&&(a=oe(o,[0,100],n,!0)-n[0]),e[i+"Span"]=o,e[i+"ValueSpan"]=a}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var i=ae(n,[0,500]);i=Math.min(i,20);var o=e.axis.scale.rawExtentInfo;0!==t[0]&&o.setDeterminedMinMax("min",+n[0].toFixed(i)),100!==t[1]&&o.setDeterminedMinMax("max",+n[1].toFixed(i)),o.freeze()}},e}(),si={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(i,o){var a=e.getComponent(Xn(i),o);t(i,o,a,n)}))}))}t((function(e,t,n,i){n.__dzAxisProxy=null}));var n=[];t((function(t,i,o,a){o.__dzAxisProxy||(o.__dzAxisProxy=new ri(t,i,a,e),n.push(o.__dzAxisProxy))}));var i=Q();return C(n,(function(e){C(e.getTargetSeriesModels(),(function(e){i.set(e.uid,e)}))})),i},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){e.getAxisProxy(t,n).reset(e)})),e.eachTargetAxis((function(n,i){e.getAxisProxy(n,i).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),i=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}}))}},li=!1;function ui(e){li||(li=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,si),function(e){e.registerAction("dataZoom",(function(e,t){var n=Un(t,e);C(n,(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function di(e){e.registerComponentModel(Qn),e.registerComponentView(ii),ui(e)}var hi=e("T",(function(){})),ci={};function pi(e,t){ci[e]=t}function gi(e){return ci[e]}var fi=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;C(this.option.feature,(function(e,n){var i=gi(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),G(e,i.defaultOption))}))},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(ne),vi=fi,mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.render=function(e,t,n,i){var o=this.group;if(o.removeAll(),e.get("show")){var a=+e.get("itemSize"),r="vertical"===e.get("orient"),s=e.get("feature")||{},l=this._features||(this._features={}),u=[];C(s,(function(e,t){u.push(t)})),new U(this._featureNames||[],u).add(d).update(d).remove(j(d,null)).execute(),this._featureNames=u,ve(o,e,n),o.add(me(o.getBoundingRect(),e)),r||o.eachChild((function(e){var t=e.__title,i=e.ensureState("emphasis"),r=i.textConfig||(i.textConfig={}),s=e.getTextContent(),l=s&&s.ensureState("emphasis");if(l&&!m(l)&&t){var u=l.style||(l.style={}),d=ye(t,ge.makeFont(u)),h=e.x+o.x,c=!1;e.y+o.y+a+d.height>n.getHeight()&&(r.position="top",c=!0);var p=c?-5-d.height:a+10;h+d.width/2>n.getWidth()?(r.position=["100%",p],u.align="right"):h-d.width/2<0&&(r.position=[0,p],u.align="left")}}))}function d(d,h){var c,p=u[d],g=u[h],f=s[p],v=new ue(f,e,e.ecModel);if(i&&null!=i.newTitle&&i.featureName===p&&(f.title=i.newTitle),p&&!g){if(function(e){return 0===e.indexOf("my")}(p))c={onclick:v.option.onclick,featureName:p};else{var m=gi(p);if(!m)return;c=new m}l[p]=c}else if(!(c=l[g]))return;c.uid=de("toolbox-feature"),c.model=v,c.ecModel=t,c.api=n;var y=c instanceof hi;p||!g?!v.get("show")||y&&c.unusable?y&&c.remove&&c.remove(t,n):(function(i,s,l){var u,d,h=i.getModel("iconStyle"),c=i.getModel(["emphasis","iconStyle"]),p=s instanceof hi&&s.getIcons?s.getIcons():i.get("icon"),g=i.get("title")||{};N(p)?(u={})[l]=p:u=p,N(g)?(d={})[l]=g:d=g;var f=i.iconPaths={};C(u,(function(l,u){var p=pe(l,{},{x:-a/2,y:-a/2,width:a,height:a});p.setStyle(h.getItemStyle()),p.ensureState("emphasis").style=c.getItemStyle();var g=new ge({style:{text:d[u],align:c.get("textAlign"),borderRadius:c.get("textBorderRadius"),padding:c.get("textPadding"),fill:null},ignore:!0});p.setTextContent(g),fe({el:p,componentModel:e,itemName:u,formatterParamsExtra:{title:d[u]}}),p.__title=d[u],p.on("mouseover",(function(){var t=c.getItemStyle(),i=r?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";g.setStyle({fill:c.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:c.get("textBackgroundColor")}),p.setTextConfig({position:c.get("textPosition")||i}),g.ignore=!e.get("showTitle"),n.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==i.get(["iconStatus",u])&&n.leaveEmphasis(this),g.hide()})),("emphasis"===i.get(["iconStatus",u])?he:ce)(p),o.add(p),p.on("click",B(s.onclick,s,t,n,u)),f[u]=p}))}(v,c,p),v.setIconStatus=function(e,t){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,i[e]&&("emphasis"===t?he:ce)(i[e])},c instanceof hi&&c.render&&c.render(v,t,n,i)):y&&c.dispose&&c.dispose(t,n)}},t.prototype.updateView=function(e,t,n,i){C(this._features,(function(e){e instanceof hi&&e.updateView&&e.updateView(e.model,t,n,i)}))},t.prototype.remove=function(e,t){C(this._features,(function(n){n instanceof hi&&n.remove&&n.remove(e,t)})),this.group.removeAll()},t.prototype.dispose=function(e,t){C(this._features,(function(n){n instanceof hi&&n.dispose&&n.dispose(e,t)}))},t.type="toolbox",t}(ie),yi=mi,xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.onclick=function(e,t){var n=this.model,i=n.get("name")||e.get("title.0.text")||"echarts",o="svg"===t.getZr().painter.getType(),a=o?"svg":n.get("type",!0)||"png",r=t.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=xe.browser;if(m(MouseEvent)&&(s.newEdge||!s.ie&&!s.edge)){var l=document.createElement("a");l.download=i+"."+a,l.target="_blank",l.href=r;var u=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});l.dispatchEvent(u)}else if(window.navigator.msSaveOrOpenBlob||o){var d=r.split(","),h=d[0].indexOf("base64")>-1,c=o?decodeURIComponent(d[1]):d[1];h&&(c=window.atob(c));var p=i+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var g=c.length,f=new Uint8Array(g);g--;)f[g]=c.charCodeAt(g);var v=new Blob([f]);window.navigator.msSaveOrOpenBlob(v,p)}else{var y=document.createElement("iframe");document.body.appendChild(y);var x=y.contentWindow,b=x.document;b.open("image/svg+xml","replace"),b.write(c),b.close(),x.focus(),b.execCommand("SaveAs",!0,p),document.body.removeChild(y)}}else{var _=n.get("lang"),M='<body style="margin:0;"><img src="'+r+'" style="max-width:100%;" title="'+(_&&_[0]||"")+'" /></body>',w=window.open();w.document.write(M),w.document.title=i}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},t}(hi),bi=xi,_i="__ec_magicType_stack__",Mi=[["line","bar"],["stack"]],wi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return C(e.get("type"),(function(e){t[e]&&(n[e]=t[e])})),n},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,t,n){var i=this.model,o=i.get(["seriesIndex",n]);if(Si[n]){var a,s={series:[]};C(Mi,(function(e){D(e,n)>=0&&C(e,(function(e){i.setIconStatus(e,"normal")}))})),i.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},(function(e){var t=e.subType,o=e.id,a=Si[n](t,o,e,i);a&&(r(a,e.option),s.series.push(a));var l=e.coordinateSystem;if(l&&"cartesian2d"===l.type&&("line"===n||"bar"===n)){var u=l.getAxesByScale("ordinal")[0];if(u){var d=u.dim+"Axis",h=e.getReferringComponents(d,te).models[0].componentIndex;s[d]=s[d]||[];for(var c=0;c<=h;c++)s[d][h]=s[d][h]||{};s[d][h].boundaryGap="bar"===n}}}));var l=n;"stack"===n&&(a=G({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",n])&&(l="tiled")),t.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:a,featureName:"magicType"})}},t}(hi),Si={line:function(e,t,n,i){if("bar"===e)return G({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(e,t,n,i){if("line"===e)return G({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(e,t,n,i){var o=n.get("stack")===_i;if("line"===e||"bar"===e)return i.setIconStatus("stack",o?"normal":"emphasis"),G({id:t,stack:o?"":_i},i.get(["option","stack"])||{},!0)}};P({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var Ai=wi,Ci=new Array(60).join("-"),Ti="\t";function Li(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Ii=new RegExp("[\t]+","g");function Di(e,t){var n=e.split(new RegExp("\n*"+Ci+"\n*","g")),i={series:[]};return C(n,(function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(Ti)>=0)return!0}(e)){var o=function(e){for(var t=e.split(/\n+/g),n=Li(t.shift()).split(Ii),i=[],o=X(n,(function(e){return{name:e,data:[]}})),a=0;a<t.length;a++){var r=Li(t[a]).split(Ii);i.push(r.shift());for(var s=0;s<r.length;s++)o[s]&&(o[s].data[a]=r[s])}return{series:o,categories:i}}(e),a=t[n],r=a.axisDim+"Axis";a&&(i[r]=i[r]||[],i[r][a.axisIndex]={data:o.categories},i.series=i.series.concat(o.series))}else o=function(e){for(var t=e.split(/\n+/g),n=Li(t.shift()),i=[],o=0;o<t.length;o++){var a=Li(t[o]);if(a){var r=a.split(Ii),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),i[o]={name:s,value:[]},l=i[o].value):l=i[o]=[];for(var d=0;d<r.length;d++)l.push(+r[d]);1===l.length&&(u?i[o].value=l[0]:i[o]=l[0])}}return{name:n,data:i}}(e),i.series.push(o)})),i}var Oi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.onclick=function(e,t){setTimeout((function(){t.dispatchAction({type:"hideTip"})}));var n=t.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var a=document.createElement("h4"),r=i.get("lang")||[];a.innerHTML=r[0]||i.get("title"),a.style.cssText="margin:10px 20px",a.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="overflow:auto";var u=i.get("optionToContent"),d=i.get("contentToOption"),h=function(e){var t,n,i,o=function(e){var t={},n=[],i=[];return e.eachRawSeries((function(e){var o=e.coordinateSystem;if(!o||"cartesian2d"!==o.type&&"polar"!==o.type)n.push(e);else{var a=o.getBaseAxis();if("category"===a.type){var r=a.dim+"_"+a.index;t[r]||(t[r]={categoryAxis:a,valueAxis:o.getOtherAxis(a),series:[]},i.push({axisDim:a.dim,axisIndex:a.index})),t[r].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:i}}(e);return{value:M([(n=o.seriesGroupByCategoryAxis,i=[],C(n,(function(e,t){var n=e.categoryAxis,o=e.valueAxis.dim,a=[" "].concat(X(e.series,(function(e){return e.name}))),r=[n.model.getCategories()];C(e.series,(function(e){var t=e.getRawData();r.push(e.getRawData().mapArray(t.mapDimension(o),(function(e){return e})))}));for(var s=[a.join(Ti)],l=0;l<r[0].length;l++){for(var u=[],d=0;d<r.length;d++)u.push(r[d][l]);s.push(u.join(Ti))}i.push(s.join("\n"))})),i.join("\n\n"+Ci+"\n\n")),(t=o.other,X(t,(function(e){var t=e.getRawData(),n=[e.name],i=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,o=arguments[e-1],a=t.getName(o),r=0;r<e-1;r++)i[r]=arguments[r];n.push((a?a+Ti:"")+i.join(Ti))})),n.join("\n")})).join("\n\n"+Ci+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+Ci+"\n\n"),meta:o.meta}}(e);if(m(u)){var c=u(t.getOption());N(c)?s.innerHTML=c:be(c)&&s.appendChild(c)}else{l.readOnly=i.get("readOnly");var p=l.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=i.get("textColor"),p.borderColor=i.get("textareaBorderColor"),p.backgroundColor=i.get("textareaColor"),l.value=h.value,s.appendChild(l)}var g=h.meta,f=document.createElement("div");f.style.cssText="position:absolute;bottom:5px;left:0;right:0";var v="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",y=document.createElement("div"),x=document.createElement("div");v+=";background-color:"+i.get("buttonColor"),v+=";color:"+i.get("buttonTextColor");var b=this;function _(){n.removeChild(o),b._dom=null}_e(y,"click",_),_e(x,"click",(function(){if(null==d&&null!=u||null!=d&&null==u)_();else{var e;try{e=m(d)?d(s,t.getOption()):Di(l.value,g)}catch(n){throw _(),new Error("Data view format error "+n)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),_()}})),y.innerHTML=r[1],x.innerHTML=r[2],x.style.cssText=y.style.cssText=v,!i.get("readOnly")&&f.appendChild(x),f.appendChild(y),o.appendChild(a),o.appendChild(s),o.appendChild(f),s.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(hi);function ki(e,t){return X(e,(function(e,n){var i=t&&t[n];if(we(i)&&!Se(i)){we(e)&&!Se(e)||(e={value:e});var o=null!=i.name&&null==e.name;return e=r(e,i),o&&delete e.name,e}return e}))}P({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var n=[];C(e.newOption.series,(function(e){var i=t.getSeriesByName(e.name)[0];if(i){var o=i.get("data");n.push({name:e.name,data:ki(e.data,o)})}else n.push(Me({type:"scatter"},e))})),t.mergeOption(r({series:n},e.newOption))}));var Ri=Oi,Pi=C,zi=f();function Ei(e){var t=zi(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var Bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.onclick=function(e,t){!function(e){zi(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},t}(hi);P({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var Vi=Bi,Zi=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Ni=function(){function e(e,t,n){var i=this;this._targetInfoList=[];var o=Hi(t,e);C(Yi,(function(e,t){(!n||!n.include||D(n.include,t)>=0)&&e(o,i._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var i=Ui[e.brushType](0,n,t);e.__rangeOffset={offset:ji[e.brushType](i.values,e.range,[1,1]),xyMinMax:i.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,n){C(e,(function(e){var i=this.findTargetInfo(e,t);i&&!0!==i&&C(i.coordSyses,(function(i){var o=Ui[e.brushType](1,i,e.range,!0);n(e,o.values,i,t)}))}),this)},e.prototype.setInputRanges=function(e,t){C(e,(function(e){var n,i,o,a,r,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var l=Ui[e.brushType](0,s.coordSys,e.coordRange),u=e.__rangeOffset;e.range=u?ji[e.brushType](l.values,u.offset,(n=l.xyMinMax,i=u.xyMinMax,o=Ki(n),a=Ki(i),r=[o[0]/a[0],o[1]/a[1]],isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r)):l.values}}),this)},e.prototype.makePanelOpts=function(e,t){return X(this._targetInfoList,(function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:Zn(i),isTargetByCursor:Wn(i,e,n.coordSysModel),getLinearBrushOtherExtent:Nn(i)}}))},e.prototype.controlSeries=function(e,t,n){var i=this.findTargetInfo(e,n);return!0===i||i&&D(i.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,i=Hi(t,e),o=0;o<n.length;o++){var a=n[o],r=e.panelId;if(r){if(a.panelId===r)return a}else for(var s=0;s<Gi.length;s++)if(Gi[s](i,a))return a}return!0},e}();function Wi(e){return e[0]>e[1]&&e.reverse(),e}function Hi(e,t){return Ae(e,t,{includeMainTypes:Zi})}var Yi={grid:function(e,t){var n=e.xAxisModels,i=e.yAxisModels,o=e.gridModels,a=Q(),r={},s={};(n||i||o)&&(C(n,(function(e){var t=e.axis.grid.model;a.set(t.id,t),r[t.id]=!0})),C(i,(function(e){var t=e.axis.grid.model;a.set(t.id,t),s[t.id]=!0})),C(o,(function(e){a.set(e.id,e),r[e.id]=!0,s[e.id]=!0})),a.each((function(e){var o=e.coordinateSystem,a=[];C(o.getCartesians(),(function(e,t){(D(n,e.getAxis("x").model)>=0||D(i,e.getAxis("y").model)>=0)&&a.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:Xi.grid,xAxisDeclared:r[e.id],yAxisDeclared:s[e.id]})})))},geo:function(e,t){C(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:Xi.geo})}))}},Gi=[function(e,t){var n=e.xAxisModel,i=e.yAxisModel,o=e.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&i&&(o=i.axis.grid.model),o&&o===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],Xi={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform($(e)),t}},Ui={lineX:j(Fi,0),lineY:j(Fi,1),rect:function(e,t,n,i){var o=e?t.pointToData([n[0][0],n[1][0]],i):t.dataToPoint([n[0][0],n[1][0]],i),a=e?t.pointToData([n[0][1],n[1][1]],i):t.dataToPoint([n[0][1],n[1][1]],i),r=[Wi([o[0],a[0]]),Wi([o[1],a[1]])];return{values:r,xyMinMax:r}},polygon:function(e,t,n,i){var o=[[1/0,-1/0],[1/0,-1/0]];return{values:X(n,(function(n){var a=e?t.pointToData(n,i):t.dataToPoint(n,i);return o[0][0]=Math.min(o[0][0],a[0]),o[1][0]=Math.min(o[1][0],a[1]),o[0][1]=Math.max(o[0][1],a[0]),o[1][1]=Math.max(o[1][1],a[1]),a})),xyMinMax:o}}};function Fi(e,t,n,i){var o=n.getAxis(["x","y"][e]),a=Wi(X([0,1],(function(e){return t?o.coordToData(o.toLocalCoord(i[e]),!0):o.toGlobalCoord(o.dataToCoord(i[e]))}))),r=[];return r[e]=a,r[1-e]=[NaN,NaN],{values:a,xyMinMax:r}}var ji={lineX:j(qi,0),lineY:j(qi,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return X(e,(function(e,i){return[e[0]-n[0]*t[i][0],e[1]-n[1]*t[i][1]]}))}};function qi(e,t,n,i){return[t[0]-i[e]*n[0],t[1]-i[e]*n[1]]}function Ki(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var $i=e("g",Ni),Ji=C,Qi=Te("toolbox-dataZoom_"),eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.render=function(e,t,n,i){this._brushController||(this._brushController=new Vn(n.getZr()),this._brushController.on("brush",B(this._onBrush,this)).mount()),function(e,t,n,i,o){var a=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(a="dataZoomSelect"===i.key&&i.dataZoomSelectActive),n._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var r=new $i(no(e),t,{include:["grid"]}).makePanelOpts(o,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(r).enableBrush(!(!a||!r.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,i,n),function(e,t){e.setIconStatus("back",function(e){return Ei(e).length}(t)>1?"emphasis":"normal")}(e,t)},t.prototype.onclick=function(e,t,n){to[n].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new $i(no(this.model),i,{include:["grid"]}).matchOutputRanges(t,i,(function(e,t,n){if("cartesian2d"===n.type){var i=e.brushType;"rect"===i?(o("x",n,t[0]),o("y",n,t[1])):o({lineX:"x",lineY:"y"}[i],n,t)}})),function(e,t){var n=Ei(e);Pi(t,(function(t,i){for(var o=n.length-1;o>=0&&!n[o][i];o--);if(o<0){var a=e.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(a){var r=a.getPercentRange();n[0][i]={dataZoomId:i,start:r[0],end:r[1]}}}})),n.push(t)}(i,n),this._dispatchZoomAction(n)}function o(e,t,o){var a=t.getAxis(e),r=a.model,s=function(e,t,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(i=n)})),i}(e,r,i),l=s.findRepresentativeAxisProxy(r).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(o=jt(0,o.slice(),a.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:o[0],endValue:o[1]})}},t.prototype._dispatchZoomAction=function(e){var t=[];Ji(e,(function(e,n){t.push(V(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(hi),to={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=Ei(e),n=t[t.length-1];t.length>1&&t.pop();var i={};return Pi(n,(function(e,n){for(var o=t.length-1;o>=0;o--)if(e=t[o][n]){i[n]=e;break}})),i}(this.ecModel))}};function no(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}Ce("dataZoom",(function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var i=t.getModel(n),o=[],a=no(i),r=Ae(e,a);return Ji(r.xAxisModels,(function(e){return s(e,"xAxis","xAxisIndex")})),Ji(r.yAxisModels,(function(e){return s(e,"yAxis","yAxisIndex")})),o}function s(e,t,n){var a=e.componentIndex,r={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:Qi+t+a};r[n]=a,o.push(r)}}));var io=eo,oo=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return E(t,e),t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(ne),ao=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.prototype.render=function(e,t,n){if(this.group.removeAll(),e.get("show")){var i=this.group,a=e.getModel("textStyle"),r=e.getModel("subtextStyle"),s=e.get("textAlign"),l=o(e.get("textBaseline"),e.get("textVerticalAlign")),u=new ge({style:Ie(a,{text:e.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),h=e.get("subtext"),c=new ge({style:Ie(r,{text:h,fill:r.getTextColor(),y:d.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=e.get("link"),g=e.get("sublink"),f=e.get("triggerEvent",!0);u.silent=!p&&!f,c.silent=!g&&!f,p&&u.on("click",(function(){De(p,"_"+e.get("target"))})),g&&c.on("click",(function(){De(g,"_"+e.get("subtarget"))})),x(u).eventData=x(c).eventData=f?{componentType:"title",componentIndex:e.componentIndex}:null,i.add(u),h&&i.add(c);var v=i.getBoundingRect(),m=e.getBoxLayoutParams();m.width=v.width,m.height=v.height;var y=Oe(m,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));s||("middle"===(s=e.get("left")||e.get("right"))&&(s="center"),"right"===s?y.x+=y.width:"center"===s&&(y.x+=y.width/2)),l||("center"===(l=e.get("top")||e.get("bottom"))&&(l="middle"),"bottom"===l?y.y+=y.height:"middle"===l&&(y.y+=y.height/2),l=l||"top"),i.x=y.x,i.y=y.y,i.markRedraw();var b={align:s,verticalAlign:l};u.setStyle(b),c.setStyle(b),v=i.getBoundingRect();var _=y.margin,M=e.getItemStyle(["color","opacity"]);M.fill=e.get("backgroundColor");var w=new q({shape:{x:v.x-_[3],y:v.y-_[0],width:v.width+_[1]+_[3],height:v.height+_[0]+_[2],r:e.get("borderRadius")},style:M,subPixelOptimize:!0,silent:!0});i.add(w)}},t.type="title",t}(ie),ro=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.type="dataZoom.inside",t.defaultOption=ke($n.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}($n),so=ro,lo=f();function uo(e,t,n){lo(e).coordSysRecordMap.each((function(e){var i=e.dataZoomInfoMap.get(t.uid);i&&(i.getRange=n)}))}function ho(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function co(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function po(e,t,n,i){return e.coordinateSystem.containPoint([n,i])}function go(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,(function(e,t){var n=lo(t),i=n.coordSysRecordMap||(n.coordSysRecordMap=Q());i.each((function(e){e.dataZoomInfoMap=null})),e.eachComponent({mainType:"dataZoom",subType:"inside"},(function(e){var n=Fn(e);C(n.infoList,(function(n){var o=n.model.uid,a=i.get(o)||i.set(o,function(e,t){var n={model:t,containsPoint:j(po,t),dispatchAction:j(co,e),dataZoomInfoMap:null,controller:null},i=n.controller=new Xt(e.getZr());return C(["pan","zoom","scrollMove"],(function(e){i.on(e,(function(t){var i=[];n.dataZoomInfoMap.each((function(o){if(t.isAvailableBehavior(o.model.option)){var a=(o.getRange||{})[e],r=a&&a(o.dzReferCoordSysInfo,n.model.mainType,n.controller,t);!o.model.get("disabled",!0)&&r&&i.push({dataZoomId:o.model.id,start:r[0],end:r[1]})}})),i.length&&n.dispatchAction(i)}))})),n}(t,n.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=Q())).set(e.uid,{dzReferCoordSysInfo:n,model:e,getRange:null})}))})),i.each((function(e){var t,n=e.controller,o=e.dataZoomInfoMap;if(o){var a=o.keys()[0];null!=a&&(t=o.get(a))}if(t){var r=function(e){var t,n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return e.each((function(e){var a=e.model,r=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");i[n+r]>i[n+t]&&(t=r),o=o&&a.get("preventDefaultMouseMove",!0)})),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}(o);n.enable(r.controlType,r.opt),n.setPointerChecker(e.containsPoint),Re(e,"dispatchAction",t.model.get("throttle",!0),"fixRate")}else ho(i,e)}))}))}var fo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return E(t,e),t.prototype.render=function(t,n,i){e.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),uo(i,t,{pan:B(vo.pan,this),zoom:B(vo.zoom,this),scrollMove:B(vo.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){for(var n=lo(e).coordSysRecordMap,i=n.keys(),o=0;o<i.length;o++){var a=i[o],r=n.get(a),s=r.dataZoomInfoMap;if(s){var l=t.uid;s.get(l)&&(s.removeKey(l),s.keys().length||ho(n,r))}}}(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(ti),vo={zoom:function(e,t,n,i){var o=this.range,a=o.slice(),r=e.axisModels[0];if(r){var s=yo[t](null,[i.originX,i.originY],r,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/i.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return jt(0,a,[0,100],0,d.minSpan,d.maxSpan),this.range=a,o[0]!==a[0]||o[1]!==a[1]?a:void 0}},pan:mo((function(e,t,n,i,o,a){var r=yo[i]([a.oldX,a.oldY],[a.newX,a.newY],t,o,n);return r.signal*(e[1]-e[0])*r.pixel/r.pixelLength})),scrollMove:mo((function(e,t,n,i,o,a){return yo[i]([0,0],[a.scrollDelta,a.scrollDelta],t,o,n).signal*(e[1]-e[0])*a.scrollDelta}))};function mo(e){return function(t,n,i,o){var a=this.range,r=a.slice(),s=t.axisModels[0];if(s)return jt(e(r,s,t,n,i,o),r,[0,100],"all"),this.range=r,a[0]!==r[0]||a[1]!==r[1]?r:void 0}}var yo={grid:function(e,t,n,i,o){var a=n.axis,r={},s=o.model.coordinateSystem.getRect();return e=e||[0,0],"x"===a.dim?(r.pixel=t[0]-e[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r},polar:function(e,t,n,i,o){var a=n.axis,r={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(r.pixel=t[0]-e[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=u[1]-u[0],r.pixelStart=u[0],r.signal=a.inverse?-1:1),r},singleAxis:function(e,t,n,i,o){var a=n.axis,r=o.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===a.orient?(s.pixel=t[0]-e[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s}},xo=fo;function bo(e){ui(e),e.registerComponentModel(so),e.registerComponentView(xo),go(e)}var _o=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return E(t,e),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=ke($n.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}($n),Mo=_o,wo=q,So="horizontal",Ao="vertical",Co=["line","bar","candlestick","scatter"],To={easing:"cubicOut",duration:100,delay:0},Lo=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return E(t,e),t.prototype.init=function(e,t){this.api=t,this._onBrush=B(this._onBrush,this),this._onBrushEnd=B(this._onBrushEnd,this)},t.prototype.render=function(t,n,i,o){if(e.prototype.render.apply(this,arguments),Re(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show")){if(t.noTarget())return this._clear(),void this.group.removeAll();o&&"dataZoom"===o.type&&o.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Pe(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new Y;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,n=e.get("brushSelect")?7:0,i=this._findCoordRect(),o={width:t.getWidth(),height:t.getHeight()},a=this._orient===So?{right:o.width-i.x-i.width,top:o.height-30-7-n,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},r=ze(e.option);C(["right","top","width","height"],(function(e){"ph"===r[e]&&(r[e]=a[e])}));var s=Oe(r,o);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===Ao&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,t=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),a=this._displayables.sliderGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==So||o?n===So&&o?{scaleY:r?1:-1,scaleX:-1}:n!==Ao||o?{scaleY:r?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:r?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:r?1:-1,scaleX:1});var s=e.getBoundingRect([a]);e.x=t.x-s.x,e.y=t.y-s.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,n=this._displayables.sliderGroup,i=e.get("brushSelect");n.add(new wo({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new wo({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:B(this._onClickPanel,this)}),a=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),n.add(o)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var t=this._size,n=this._shadowSize||[],i=e.series,o=i.getRawData(),r=i.getShadowDim?i.getShadowDim():e.otherDim;if(null!=r){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(o!==this._shadowData||r!==this._shadowDim||t[0]!==n[0]||t[1]!==n[1]){var u=o.getDataExtent(r),d=.3*(u[1]-u[0]);u=[u[0]-d,u[1]+d];var h,c=[0,t[1]],p=[0,t[0]],g=[[t[0],0],[0,0]],f=[],v=p[1]/(o.count()-1),m=0,y=Math.round(o.count()/t[0]);o.each([r],(function(e,t){if(y>0&&t%y)m+=v;else{var n=null==e||isNaN(e)||""===e,i=n?0:oe(e,u,c,!0);n&&!h&&t?(g.push([g[g.length-1][0],0]),f.push([f[f.length-1][0],0])):!n&&h&&(g.push([m,0]),f.push([m,0])),g.push([m,i]),f.push([m,i]),m+=v,h=n}})),s=this._shadowPolygonPts=g,l=this._shadowPolylinePts=f}this._shadowData=o,this._shadowDim=r,this._shadowSize=[t[0],t[1]];for(var x=this.dataZoomModel,b=0;b<3;b++){var _=M(1===b);this._displayables.sliderGroup.add(_),this._displayables.dataShadowSegs.push(_)}}}function M(e){var t=x.getModel(e?"selectedDataBackground":"dataBackground"),n=new Y,i=new F({shape:{points:s},segmentIgnoreThreshold:1,style:t.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),o=new a({shape:{points:l},segmentIgnoreThreshold:1,style:t.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(i),n.add(o),n}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,i=this.ecModel;return e.eachTargetAxis((function(o,a){var r=e.getAxisProxy(o,a).getTargetSeriesModels();C(r,(function(e){if(!(n||!0!==t&&D(Co,e.get("type"))<0)){var r,s=i.getComponent(Xn(o),a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[o],u=e.coordinateSystem;null!=l&&u.getOtherAxis&&(r=u.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),n={thisAxis:s,series:e,thisDim:o,otherDim:l,otherAxisInverse:r}}}),this)}),this),n}},t.prototype._renderHandle=function(){var e=this.group,t=this._displayables,n=t.handles=[null,null],i=t.handleLabels=[null,null],o=this._displayables.sliderGroup,a=this._size,r=this.dataZoomModel,s=this.api,l=r.get("borderRadius")||0,u=r.get("brushSelect"),d=t.filler=new wo({silent:u,style:{fill:r.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new wo({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:l},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),C([0,1],(function(t){var a=r.get("handleIcon");!Ee[a]&&a.indexOf("path://")<0&&a.indexOf("image://")<0&&(a="path://"+a);var s=Be(a,-1,0,2,2,null,!0);s.attr({cursor:Io(this._orient),draggable:!0,drift:B(this._onDragMove,this,t),ondragend:B(this._onDragEnd,this),onmouseover:B(this._showDataInfo,this,!0),onmouseout:B(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),u=r.get("handleSize");this._handleHeight=b(u,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(r.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),Ve(s);var d=r.get("handleColor");null!=d&&(s.style.fill=d),o.add(n[t]=s);var h=r.getModel("textStyle");e.add(i[t]=new ge({silent:!0,invisible:!0,style:Ie(h,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:h.getTextColor(),font:h.getFont()}),z2:10}))}),this);var h=d;if(u){var c=b(r.get("moveHandleSize"),a[1]),p=t.moveHandle=new q({style:r.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:c}}),g=.8*c,f=t.moveHandleIcon=Be(r.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);f.silent=!0,f.y=a[1]+c/2-.5,p.ensureState("emphasis").style=r.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var v=Math.min(a[1]/2,Math.max(c,10));(h=t.moveZone=new q({invisible:!0,shape:{y:a[1]-v,height:c+v}})).on("mouseover",(function(){s.enterEmphasis(p)})).on("mouseout",(function(){s.leaveEmphasis(p)})),o.add(p),o.add(f),o.add(h)}h.attr({draggable:!0,cursor:Io(this._orient),drift:B(this._onDragMove,this,"all"),ondragstart:B(this._showDataInfo,this,!0),ondragend:B(this._onDragEnd,this),onmouseover:B(this._showDataInfo,this,!0),onmouseout:B(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[oe(e[0],[0,100],t,!0),oe(e[1],[0,100],t,!0)]},t.prototype._updateInterval=function(e,t){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];jt(t,i,o,n.get("zoomLock")?"all":e,null!=a.minSpan?oe(a.minSpan,r,o,!0):null,null!=a.maxSpan?oe(a.maxSpan,r,o,!0):null);var s=this._range,l=this._range=le([oe(i[0],o,r,!0),oe(i[1],o,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},t.prototype._updateView=function(e){var t=this._displayables,n=this._handleEnds,i=le(n.slice()),o=this._size;C([0,1],(function(e){var i=t.handles[e],a=this._handleHeight;i.attr({scaleX:a/2,scaleY:a/2,x:n[e]+(e?-1:1),y:o[1]/2-a/2})}),this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]});var a={x:i[0],width:i[1]-i[0]};t.moveHandle&&(t.moveHandle.setShape(a),t.moveZone.setShape(a),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",a.x+a.width/2));for(var r=t.dataShadowSegs,s=[0,i[0],i[1],o[0]],l=0;l<r.length;l++){var u=r[l],d=u.getClipPath();d||(d=new q,u.setClipPath(d)),d.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:o[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,a=["",""];if(t.get("showDetail")){var r=t.findRepresentativeAxisProxy();if(r){var s=r.getAxisModel().axis,l=this._range,u=e?r.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:r.getDataValueWindow();a=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var d=le(this._handleEnds.slice());function h(e){var t=$(n.handles[e].parent,this.group),r=K(0===e?"right":"left",t),s=this._handleWidth/2+5,l=Ze([d[e]+(0===e?-s:s),this._size[1]/2],t);i[e].setStyle({x:l[0],y:l[1],verticalAlign:o===So?"middle":r,align:o===So?r:"center",text:a[e]})}h.call(this,0),h.call(this,1)},t.prototype._formatLabel=function(e,t){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=t.getPixelPrecision());var a=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return m(i)?i(e,a):N(i)?i.replace("{value}",a):a},t.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,n=t.handleLabels;n[0].attr("invisible",!e),n[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},t.prototype._onDragMove=function(e,t,n,i){this._dragging=!0,W(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),a=Ze([t,n],o,!0),r=this._updateInterval(e,a[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),r&&s&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var t=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,a=this._updateInterval("all",n[0]-o);this._updateView(),a&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var t=e.offsetX,i=e.offsetY;this._brushStart=new n(t,i),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,t){t.attr("ignore",!0);var n=t.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var i=this._getViewExtent(),o=[0,100];this._range=le([oe(n.x,i,o,!0),oe(n.x+n.width,i,o,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(W(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,t){var n=this._displayables,i=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new wo({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var a=this._brushStart,r=this._displayables.sliderGroup,s=r.transformCoordToLocal(e,t),l=r.transformCoordToLocal(a.x,a.y),u=this._size;s[0]=Math.max(Math.min(u[0],s[0]),0),o.setShape({x:l[0],y:0,width:s[0]-l[0],height:u[1]})},t.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?To:null,start:t[0],end:t[1]})},t.prototype._findCoordRect=function(){var e,t=Fn(this.dataZoomModel).infoList;if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var i=this.api.getWidth(),o=this.api.getHeight();e={x:.2*i,y:.2*o,width:.6*i,height:.6*o}}return e},t.type="dataZoom.slider",t}(ti);function Io(e){return"vertical"===e?"ns-resize":"ew-resize"}var Do=Lo;function Oo(e){e.registerComponentModel(Mo),e.registerComponentView(Do),ui(e)}var ko=2*Math.PI,Ro=Math.PI/180;function Po(e,t){return Oe(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function zo(e,t){var n=Po(e,t),i=e.get("center"),o=e.get("radius");Se(o)||(o=[0,o]),Se(i)||(i=[i,i]);var a=b(n.width,t.getWidth()),r=b(n.height,t.getHeight()),s=Math.min(a,r);return{cx:b(i[0],a)+n.x,cy:b(i[1],r)+n.y,r0:b(o[0],s/2),r:b(o[1],s/2)}}function Eo(e,t,n){t.eachSeriesByType(e,(function(e){var t=e.getData(),i=t.mapDimension("value"),o=Po(e,n),a=zo(e,n),r=a.cx,s=a.cy,l=a.r,u=a.r0,d=-e.get("startAngle")*Ro,h=e.get("minAngle")*Ro,c=0;t.each(i,(function(e){!isNaN(e)&&c++}));var p=t.getSum(i),g=Math.PI/(p||c)*2,f=e.get("clockwise"),v=e.get("roseType"),m=e.get("stillShowZeroSum"),y=t.getDataExtent(i);y[0]=0;var x=ko,b=0,_=d,M=f?1:-1;if(t.setLayout({viewRect:o,r:l}),t.each(i,(function(e,n){var i;if(isNaN(e))t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:f,cx:r,cy:s,r0:u,r:v?NaN:l});else{(i="area"!==v?0===p&&m?g:e*g:ko/c)<h?(i=h,x-=h):b+=e;var o=_+M*i;t.setItemLayout(n,{angle:i,startAngle:_,endAngle:o,clockwise:f,cx:r,cy:s,r0:u,r:v?oe(e,y,[u,l]):l}),_=o}})),x<ko&&c)if(x<=.001){var w=ko/c;t.each(i,(function(e,n){if(!isNaN(e)){var i=t.getItemLayout(n);i.angle=w,i.startAngle=d+M*n*w,i.endAngle=d+M*(n+1)*w}}))}else g=x/b,_=d,t.each(i,(function(e,n){if(!isNaN(e)){var i=t.getItemLayout(n),o=i.angle===h?h:e*g;i.startAngle=_,i.endAngle=_+M*o,_+=M*o}}))}))}function Bo(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var i=e.getData();i.filterSelf((function(e){for(var t=i.getName(e),o=0;o<n.length;o++)if(!n[o].isSelected(t))return!1;return!0}))}}}}var Vo=Math.PI/180;function Zo(e,t,n,i,o,a,r,s,l,u){if(!(e.length<2)){for(var d=e.length,h=0;h<d;h++)if("outer"===e[h].position&&"labelLine"===e[h].labelAlignTo){var c=e[h].label.x-u;e[h].linePoints[1][0]+=c,e[h].label.x=u}S(e,l,l+r)&&function(e){for(var a={list:[],maxY:0},r={list:[],maxY:0},s=0;s<e.length;s++)if("none"===e[s].labelAlignTo){var l=e[s],u=l.label.y>n?r:a,d=Math.abs(l.label.y-n);if(d>=u.maxY){var h=l.label.x-t-l.len2*o,c=i+l.len,g=Math.abs(h)<c?Math.sqrt(d*d/(1-h*h/c/c)):c;u.rB=g,u.maxY=d}u.list.push(l)}p(a),p(r)}(e)}function p(e){for(var a=e.rB,r=a*a,s=0;s<e.list.length;s++){var l=e.list[s],u=Math.abs(l.label.y-n),d=i+l.len,h=d*d,c=Math.sqrt((1-Math.abs(u*u/r))*h),p=t+(c+l.len2)*o,g=p-l.label.x;No(l,l.targetTextWidth-g*o,!0),l.label.x=p}}}function No(e,t,n){if(void 0===n&&(n=!1),null==e.labelStyleWidth){var i=e.label,o=i.style,a=e.rect,r=o.backgroundColor,s=o.padding,l=s?s[1]+s[3]:0,u=o.overflow,d=a.width+(r?0:l);if(t<d||n){var h=a.height;if(u&&u.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",t-l);var c=i.getBoundingRect();i.setStyle("width",Math.ceil(c.width)),i.setStyle("backgroundColor",r)}else{var p=t-l,g=t<d?p:n?p>e.unconstrainedWidth?null:p:null;i.setStyle("width",g)}var f=i.getBoundingRect();a.width=f.width;var v=(i.style.margin||0)+2.1;a.height=f.height+v,a.y-=(a.height-h)/2}}}function Wo(e){return"center"===e.position}function Ho(e){var t,i,o=e.getData(),a=[],r=!1,s=(e.get("minShowLabelAngle")||0)*Vo,l=o.getLayout("viewRect"),u=o.getLayout("r"),d=l.width,h=l.x,c=l.y,p=l.height;function g(e){e.ignore=!0}o.each((function(e){var l=o.getItemGraphicEl(e),c=l.shape,p=l.getTextContent(),f=l.getTextGuideLine(),v=o.getItemModel(e),m=v.getModel("label"),y=m.get("position")||v.get(["emphasis","label","position"]),x=m.get("distanceToLabelLine"),_=m.get("alignTo"),M=b(m.get("edgeDistance"),d),w=m.get("bleedMargin"),S=v.getModel("labelLine"),A=S.get("length");A=b(A,d);var T=S.get("length2");if(T=b(T,d),Math.abs(c.endAngle-c.startAngle)<s)return C(p.states,g),void(p.ignore=!0);if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(p)){var L,I,D,O,k=(c.startAngle+c.endAngle)/2,R=Math.cos(k),P=Math.sin(k);t=c.cx,i=c.cy;var z="inside"===y||"inner"===y;if("center"===y)L=c.cx,I=c.cy,O="center";else{var E=(z?(c.r+c.r0)/2*R:c.r*R)+t,B=(z?(c.r+c.r0)/2*P:c.r*P)+i;if(L=E+3*R,I=B+3*P,!z){var V=E+R*(A+u-c.r),Z=B+P*(A+u-c.r),N=V+(R<0?-1:1)*T;L="edge"===_?R<0?h+M:h+d-M:N+(R<0?-x:x),I=Z,D=[[E,B],[V,Z],[N,Z]]}O=z?"center":"edge"===_?R>0?"right":"left":R>0?"left":"right"}var W=Math.PI,H=0,Y=m.get("rotate");if(Ne(Y))H=Y*(W/180);else if("center"===y)H=0;else if("radial"===Y||!0===Y)H=R<0?-k+W:-k;else if("tangential"===Y&&"outside"!==y&&"outer"!==y){var G=Math.atan2(R,P);G<0&&(G=2*W+G),P>0&&(G=W+G),H=G-W}if(r=!!H,p.x=L,p.y=I,p.rotation=H,p.setStyle({verticalAlign:"middle"}),z){p.setStyle({align:O});var X=p.states.select;X&&(X.x+=p.x,X.y+=p.y)}else{var U=p.getBoundingRect().clone();U.applyTransform(p.getComputedTransform());var F=(p.style.margin||0)+2.1;U.y-=F/2,U.height+=F,a.push({label:p,labelLine:f,position:y,len:A,len2:T,minTurnAngle:S.get("minTurnAngle"),maxSurfaceAngle:S.get("maxSurfaceAngle"),surfaceNormal:new n(R,P),linePoints:D,textAlign:O,labelDistance:x,labelAlignTo:_,edgeDistance:M,bleedMargin:w,rect:U,unconstrainedWidth:U.width,labelStyleWidth:p.style.width})}l.setTextConfig({inside:z})}})),!r&&e.get("avoidLabelOverlap")&&function(e,t,n,i,o,a,r,s){for(var l=[],u=[],d=Number.MAX_VALUE,h=-Number.MAX_VALUE,c=0;c<e.length;c++){var p=e[c].label;Wo(e[c])||(p.x<t?(d=Math.min(d,p.x),l.push(e[c])):(h=Math.max(h,p.x),u.push(e[c])))}for(c=0;c<e.length;c++)if(!Wo(v=e[c])&&v.linePoints){if(null!=v.labelStyleWidth)continue;p=v.label;var g=v.linePoints,f=void 0;f="edge"===v.labelAlignTo?p.x<t?g[2][0]-v.labelDistance-r-v.edgeDistance:r+o-v.edgeDistance-g[2][0]-v.labelDistance:"labelLine"===v.labelAlignTo?p.x<t?d-r-v.bleedMargin:r+o-h-v.bleedMargin:p.x<t?p.x-r-v.bleedMargin:r+o-p.x-v.bleedMargin,v.targetTextWidth=f,No(v,f)}for(Zo(u,t,n,i,1,0,a,0,s,h),Zo(l,t,n,i,-1,0,a,0,s,d),c=0;c<e.length;c++){var v;if(!Wo(v=e[c])&&v.linePoints){p=v.label,g=v.linePoints;var m="edge"===v.labelAlignTo,y=p.style.padding,x=y?y[1]+y[3]:0,b=p.style.backgroundColor?0:x,_=v.rect.width+b,M=g[1][0]-g[2][0];m?p.x<t?g[2][0]=r+v.edgeDistance+_+v.labelDistance:g[2][0]=r+o-v.edgeDistance-_-v.labelDistance:(p.x<t?g[2][0]=p.x+v.labelDistance:g[2][0]=p.x-v.labelDistance,g[1][0]=g[2][0]+M),g[1][1]=g[2][1]=p.y}}}(a,t,i,u,d,p,h,c);for(var f=0;f<a.length;f++){var v=a[f],m=v.label,y=v.labelLine,x=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),x&&(C(m.states,g),m.ignore=!0);var _=m.states.select;_&&(_.x+=m.x,_.y+=m.y)}if(y){var M=v.linePoints;x||!M?(C(y.states,g),y.ignore=!0):(Mt(M,v.minTurnAngle),wt(M,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:M}),m.__hostTarget.textGuideLineConfig={anchor:new n(M[0][0],M[0][1])})}}}function Yo(e,t,n){var i=e.get("borderRadius");if(null==i)return n?{cornerRadius:0}:null;Se(i)||(i=[i,i,i,i]);var o=Math.abs(t.r||0-t.r0||0);return{cornerRadius:X(i,(function(e){return We(e,o)}))}}var Go=function(e){function t(t,n,i){var o=e.call(this)||this;o.z2=2;var a=new ge;return o.setTextContent(a),o.updateData(t,n,i,!0),o}return E(t,e),t.prototype.updateData=function(e,t,n,i){var o=this,a=e.hostModel,r=e.getItemModel(t),s=r.getModel("emphasis"),l=e.getItemLayout(t),u=Me(Yo(r.getModel("itemStyle"),l,!0),l);if(isNaN(u.startAngle))o.setShape(u);else{if(i){o.setShape(u);var d=a.getShallow("animationType");a.ecModel.ssr?(I(o,{scaleX:0,scaleY:0},a,{dataIndex:t,isFrom:!0}),o.originX=u.cx,o.originY=u.cy):"scale"===d?(o.shape.r=l.r0,I(o,{shape:{r:l.r}},a,t)):null!=n?(o.setShape({startAngle:n,endAngle:n}),I(o,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},a,t)):(o.shape.endAngle=l.startAngle,O(o,{shape:{endAngle:l.endAngle}},a,t))}else He(o),O(o,{shape:u},a,t);o.useStyle(e.getItemVisual(t,"style")),Ye(o,r);var h=(l.startAngle+l.endAngle)/2,c=a.get("selectedOffset"),p=Math.cos(h)*c,g=Math.sin(h)*c,f=r.getShallow("cursor");f&&o.attr("cursor",f),this._updateLabel(a,e,t),o.ensureState("emphasis").shape=Me({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},Yo(s.getModel("itemStyle"),l)),Me(o.ensureState("select"),{x:p,y:g,shape:Yo(r.getModel(["select","itemStyle"]),l)}),Me(o.ensureState("blur"),{shape:Yo(r.getModel(["blur","itemStyle"]),l)});var v=o.getTextGuideLine(),m=o.getTextContent();v&&Me(v.ensureState("select"),{x:p,y:g}),Me(m.ensureState("select"),{x:p,y:g}),Ge(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))}},t.prototype._updateLabel=function(e,t,n){var i=this,o=t.getItemModel(n),r=o.getModel("labelLine"),s=t.getItemVisual(n,"style"),l=s&&s.fill,u=s&&s.opacity;Xe(i,Ue(o),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:l,defaultOpacity:u,defaultText:e.getFormattedLabel(n,"normal")||t.getName(n)});var d=i.getTextContent();i.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var h=e.get(["label","position"]);if("outside"!==h&&"outer"!==h)i.removeTextGuideLine();else{var c=this.getTextGuideLine();c||(c=new a,this.setTextGuideLine(c)),Ct(this,Tt(o),{stroke:l,opacity:Fe(r.get(["lineStyle","opacity"]),u,1)})}},t}(je),Xo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return E(t,e),t.prototype.render=function(e,t,n,i){var o,a=e.getData(),r=this._data,s=this.group;if(!r&&a.count()>0){for(var l=a.getItemLayout(0),u=1;isNaN(l&&l.startAngle)&&u<a.count();++u)l=a.getItemLayout(u);l&&(o=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===a.count()&&e.get("showEmptyCircle")){var d=new je({shape:zo(e,n)});d.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,s.add(d)}a.diff(r).add((function(e){var t=new Go(a,e,o);a.setItemGraphicEl(e,t),s.add(t)})).update((function(e,t){var n=r.getItemGraphicEl(t);n.updateData(a,e,o),n.off("click"),s.add(n),a.setItemGraphicEl(e,n)})).remove((function(t){var n=r.getItemGraphicEl(t);qe(n,e,t)})).execute(),Ho(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=a)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var i=e[0]-n.cx,o=e[1]-n.cy,a=Math.sqrt(i*i+o*o);return a<=n.r&&a>=n.r0}},t.type="pie",t}(Ke),Uo=Xo;function Fo(e,t,n){t=Se(t)&&{coordDimensions:t}||Me({encodeDefine:e.getEncode()},t);var i=e.getSource(),o=$e(i,t).dimensions,a=new Je(o,e);return a.initData(i,n),a}var jo=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),qo=e("L",jo),Ko=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new qo(B(this.getData,this),B(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return Fo(this,{coordDimensions:["value"],encodeDefaulter:j(Qe,this)})},t.prototype.getDataParams=function(t){var n=this.getData(),i=e.prototype.getDataParams.call(this,t),o=[];return n.each(n.mapDimension("value"),(function(e){o.push(e)})),i.percent=et(o,t,n.hostModel.get("percentPrecision")),i.$vars.push("percent"),i},t.prototype._defaultLabelLine=function(e){tt(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(nt),$o=Ko}}}));
