System.register(["./installCanvasRenderer-legacy.5164a670.js"],(function(e){"use strict";var t,n,o,i,a,r,s,l,u,d,c,h,p,g,f,v,m,y,x,b,_,M,w,S,A,C,T,L,I,D,O,R,k,P,z,E,B,V,Z,N,H,W,G,Y,X,U,F,j,q,K,$,J,Q,ee,te,ne,oe,ie,ae,re,se,le,ue,de,ce,he,pe,ge,fe,ve,me,ye,xe,be,_e,Me,we,Se,Ae,Ce,Te,Le,Ie,De,Oe,Re,ke,Pe,ze,Ee,Be,Ve,Ze,Ne,He,We,Ge,Ye,Xe,Ue,Fe,je,qe,Ke,$e,Je,Qe,et,tt;return{setters:[function(e){t=e.a0,n=e.a4,o=e.ak,i=e.al,a=e.am,r=e.J,s=e.an,l=e.ao,u=e.aa,d=e.ap,c=e.a9,h=e.aq,p=e.ar,g=e.as,f=e.a8,v=e.q,m=e.a3,y=e.at,x=e.au,b=e.O,_=e.v,M=e.av,w=e.U,S=e.aw,A=e.ax,C=e.ay,T=e.x,L=e.az,I=e.aA,D=e.ag,O=e.aB,R=e.aC,k=e.aD,P=e.aE,z=e._,E=e.aF,B=e.F,V=e.aG,Z=e.aH,N=e.aI,H=e.aJ,W=e.Q,G=e.aK,Y=e.E,X=e.ae,U=e.a6,F=e.Y,j=e.a7,q=e.aL,K=e.aM,$=e.aN,J=e.af,Q=e.aO,ee=e.S,te=e.C,ne=e.$,oe=e.aP,ie=e.aQ,ae=e.aR,re=e.aS,se=e.aT,le=e.M,ue=e.aU,de=e.aV,ce=e.aW,he=e.aX,pe=e.Z,ge=e.aY,fe=e.aZ,ve=e.a_,me=e.s,ye=e.a$,xe=e.b0,be=e.b1,_e=e.b2,Me=e.K,we=e.w,Se=e.b3,Ae=e.b4,Ce=e.b5,Te=e.u,Le=e.N,Ie=e.b6,De=e.b7,Oe=e.b8,Re=e.b9,ke=e.ba,Pe=e.bb,ze=e.bc,Ee=e.bd,Be=e.be,Ve=e.j,Ze=e.bf,Ne=e.bg,He=e.bh,We=e.bi,Ge=e.bj,Ye=e.bk,Xe=e.bl,Ue=e.P,Fe=e.bm,je=e.bn,qe=e.bo,Ke=e.bp,$e=e.bq,Je=e.br,Qe=e.bs,et=e.bt,tt=e.bu}],execute:function(){e({a:function(e){Te(yi),Te(Ii)},b:function(e){e.registerComponentModel(fo),e.registerComponentView(mo),ho("saveAsImage",xo),ho("magicType",So),ho("dataView",Ro),ho("dataZoom",ni),ho("restore",Bo),Te(lo)},c:function(e){e.registerChartView(Gi),e.registerSeriesModel(ji),tt("pie",e.registerAction),e.registerLayout(F(Pi,"pie")),e.registerProcessor(zi("pie")),e.registerProcessor({seriesType:"pie",reset:function(e,t){var n=e.getData();n.filterSelf((function(e){var t=n.mapDimension("value"),o=n.get(t,e);return!("number"==typeof o&&!isNaN(o)&&o<0)}))}})},d:function(e){e.registerUpdateLifecycle("series:beforeupdate",(function(e,t,n){var o=zt(t).labelManager;o||(o=zt(t).labelManager=new Pt),o.clearLabels()})),e.registerUpdateLifecycle("series:layoutlabels",(function(e,t,n){var o=zt(t).labelManager;n.updatedSeries.forEach((function(e){o.addLabelsOfSeries(t.getViewOfSeriesModel(e))})),o.updateLayoutConfig(t),o.layout(t),o.processLabelsOverall()}))},e:Zn,f:Vn,h:Yi,i:function(e){e.registerComponentModel(oi),e.registerComponentView(ii)},j:zi,k:St,l:At,m:Bn,n:Ni,o:Xt,p:yi,q:Ii,r:ho,s:Ut});var nt=2*Math.PI,ot=t.CMD,it=["top","right","bottom","left"];function at(e,t,n,o,i){var a=n.width,r=n.height;switch(e){case"top":o.set(n.x+a/2,n.y-t),i.set(0,-1);break;case"bottom":o.set(n.x+a/2,n.y+r+t),i.set(0,1);break;case"left":o.set(n.x-t,n.y+r/2),i.set(-1,0);break;case"right":o.set(n.x+a+t,n.y+r/2),i.set(1,0)}}function rt(e,t,n,o,i,a,r,s,l){r-=e,s-=t;var u=Math.sqrt(r*r+s*s),d=(r/=u)*n+e,c=(s/=u)*n+t;if(Math.abs(o-i)%nt<1e-4)return l[0]=d,l[1]=c,u-n;if(a){var h=o;o=g(i),i=g(h)}else o=g(o),i=g(i);o>i&&(i+=nt);var p=Math.atan2(s,r);if(p<0&&(p+=nt),p>=o&&p<=i||p+nt>=o&&p+nt<=i)return l[0]=d,l[1]=c,u-n;var f=n*Math.cos(o)+e,v=n*Math.sin(o)+t,m=n*Math.cos(i)+e,y=n*Math.sin(i)+t,x=(f-r)*(f-r)+(v-s)*(v-s),b=(m-r)*(m-r)+(y-s)*(y-s);return x<b?(l[0]=f,l[1]=v,Math.sqrt(x)):(l[0]=m,l[1]=y,Math.sqrt(b))}function st(e,t,n,o,i,a,r,s){var l=i-e,u=a-t,d=n-e,c=o-t,h=Math.sqrt(d*d+c*c),p=(l*(d/=h)+u*(c/=h))/h;s&&(p=Math.min(Math.max(p,0),1)),p*=h;var g=r[0]=e+p*d,f=r[1]=t+p*c;return Math.sqrt((g-i)*(g-i)+(f-a)*(f-a))}function lt(e,t,n,o,i,a,r){n<0&&(e+=n,n=-n),o<0&&(t+=o,o=-o);var s=e+n,l=t+o,u=r[0]=Math.min(Math.max(i,e),s),d=r[1]=Math.min(Math.max(a,t),l);return Math.sqrt((u-i)*(u-i)+(d-a)*(d-a))}var ut=[];function dt(e,t,n){var o=lt(t.x,t.y,t.width,t.height,e.x,e.y,ut);return n.set(ut[0],ut[1]),o}function ct(e,t,n){for(var o,i,a=0,r=0,s=0,l=0,u=1/0,d=t.data,c=e.x,g=e.y,f=0;f<d.length;){var v=d[f++];1===f&&(s=a=d[f],l=r=d[f+1]);var m=u;switch(v){case ot.M:a=s=d[f++],r=l=d[f++];break;case ot.L:m=st(a,r,d[f],d[f+1],c,g,ut,!0),a=d[f++],r=d[f++];break;case ot.C:m=p(a,r,d[f++],d[f++],d[f++],d[f++],d[f],d[f+1],c,g,ut),a=d[f++],r=d[f++];break;case ot.Q:m=h(a,r,d[f++],d[f++],d[f],d[f+1],c,g,ut),a=d[f++],r=d[f++];break;case ot.A:var y=d[f++],x=d[f++],b=d[f++],_=d[f++],M=d[f++],w=d[f++];f+=1;var S=!!(1-d[f++]);o=Math.cos(M)*b+y,i=Math.sin(M)*_+x,f<=1&&(s=o,l=i),m=rt(y,x,_,M,M+w,S,(c-y)*_/b+y,g,ut),a=Math.cos(M+w)*b+y,r=Math.sin(M+w)*_+x;break;case ot.R:m=lt(s=a=d[f++],l=r=d[f++],d[f++],d[f++],c,g,ut);break;case ot.Z:m=st(a,r,s,l,c,g,ut,!0),a=s,r=l}m<u&&(u=m,n.set(ut[0],ut[1]))}return u}var ht=new n,pt=new n,gt=new n,ft=new n,vt=new n;function mt(e,t){if(e){var o=e.getTextGuideLine(),i=e.getTextContent();if(i&&o){var a=e.textGuideLineConfig||{},r=[[0,0],[0,0],[0,0]],s=a.candidates||it,d=i.getBoundingRect().clone();d.applyTransform(i.getComputedTransform());var c=1/0,h=a.anchor,p=e.getComputedTransform(),g=p&&l([],p),f=t.get("length2")||0;h&&gt.copy(h);for(var v=0;v<s.length;v++){at(s[v],0,d,ht,ft),n.scaleAndAdd(pt,ht,ft,f),pt.transform(g);var m=e.getBoundingRect(),y=h?h.distance(pt):e instanceof u?ct(pt,e.path,gt):dt(pt,m,gt);y<c&&(c=y,pt.transform(p),gt.transform(p),gt.toArray(r[0]),pt.toArray(r[1]),ht.toArray(r[2]))}bt(r,t.get("minTurnAngle")),o.setShape({points:r})}}}var yt=[],xt=new n;function bt(e,t){if(t<=180&&t>0){t=t/180*Math.PI,ht.fromArray(e[0]),pt.fromArray(e[1]),gt.fromArray(e[2]),n.sub(ft,ht,pt),n.sub(vt,gt,pt);var o=ft.len(),i=vt.len();if(!(o<.001||i<.001)){ft.scale(1/o),vt.scale(1/i);var a=ft.dot(vt);if(Math.cos(t)<a){var r=st(pt.x,pt.y,gt.x,gt.y,ht.x,ht.y,yt,!1);xt.fromArray(yt),xt.scaleAndAdd(vt,r/Math.tan(Math.PI-t));var s=gt.x!==pt.x?(xt.x-pt.x)/(gt.x-pt.x):(xt.y-pt.y)/(gt.y-pt.y);if(isNaN(s))return;s<0?n.copy(xt,pt):s>1&&n.copy(xt,gt),xt.toArray(e[1])}}}}function _t(e,t,o){if(o<=180&&o>0){o=o/180*Math.PI,ht.fromArray(e[0]),pt.fromArray(e[1]),gt.fromArray(e[2]),n.sub(ft,pt,ht),n.sub(vt,gt,pt);var i=ft.len(),a=vt.len();if(!(i<.001||a<.001)&&(ft.scale(1/i),vt.scale(1/a),ft.dot(t)<Math.cos(o))){var r=st(pt.x,pt.y,gt.x,gt.y,ht.x,ht.y,yt,!1);xt.fromArray(yt);var s=Math.PI/2,l=s+Math.acos(vt.dot(t))-o;if(l>=s)n.copy(xt,gt);else{xt.scaleAndAdd(vt,r/Math.tan(Math.PI/2-l));var u=gt.x!==pt.x?(xt.x-pt.x)/(gt.x-pt.x):(xt.y-pt.y)/(gt.y-pt.y);if(isNaN(u))return;u<0?n.copy(xt,pt):u>1&&n.copy(xt,gt)}xt.toArray(e[1])}}}function Mt(e,t,n,o){var i="normal"===n,a=i?e:e.ensureState(n);a.ignore=t;var r=o.get("smooth");r&&!0===r&&(r=.3),a.shape=a.shape||{},r>0&&(a.shape.smooth=r);var s=o.getModel("lineStyle").getLineStyle();i?e.useStyle(s):a.style=s}function wt(e,t){var n=t.smooth,o=t.points;if(o)if(e.moveTo(o[0][0],o[0][1]),n>0&&o.length>=3){var i=d(o[0],o[1]),a=d(o[1],o[2]);if(!i||!a)return e.lineTo(o[1][0],o[1][1]),void e.lineTo(o[2][0],o[2][1]);var r=Math.min(i,a)*n,s=c([],o[1],o[0],r/i),l=c([],o[1],o[2],r/a),u=c([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],o[2][0],o[2][1])}else for(var h=1;h<o.length;h++)e.lineTo(o[h][0],o[h][1])}function St(e,t,n){var s=e.getTextGuideLine(),l=e.getTextContent();if(l){for(var u=t.normal,d=u.get("show"),c=l.ignore,h=0;h<o.length;h++){var p=o[h],g=t[p],f="normal"===p;if(g){var v=g.get("show");if((f?c:i(l.states[p]&&l.states[p].ignore,c))||!i(v,d)){var m=f?s:s&&s.states.normal;m&&(m.ignore=!0);continue}s||(s=new a,e.setTextGuideLine(s),f||!c&&d||Mt(s,!0,"normal",t.normal),e.stateProxy&&(s.stateProxy=e.stateProxy)),Mt(s,!1,p,g)}}if(s){r(s.style,n),s.style.fill=null;var y=u.get("showAbove");(e.textGuideLineConfig=e.textGuideLineConfig||{}).showAbove=y||!1,s.buildPath=wt}}else s&&e.removeTextGuideLine()}function At(e,t){t=t||"labelLine";for(var n={normal:e.getModel(t)},o=0;o<s.length;o++){var i=s[o];n[i]=e.getModel([i,t])}return n}function Ct(e){if(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice());return t}}function Tt(e,t){var n=e.label,o=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:Ct(o&&o.shape.points)}}var Lt=["align","verticalAlign","width","height","fontSize"],It=new f,Dt=v(),Ot=v();function Rt(e,t,n){for(var o=0;o<n.length;o++){var i=n[o];null!=t[i]&&(e[i]=t[i])}}var kt=["x","y","rotation"],Pt=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(e,t,n,o,i){var a=o.style,r=o.__hostTarget.textConfig||{},s=o.getComputedTransform(),l=o.getBoundingRect().plain();m.applyTransform(l,l,s),s?It.setLocalTransform(s):(It.x=It.y=It.rotation=It.originX=It.originY=0,It.scaleX=It.scaleY=1);var u,d=o.__hostTarget;if(d){u=d.getBoundingRect().plain();var c=d.getComputedTransform();m.applyTransform(u,u,c)}var h=u&&d.getTextGuideLine();this._labelList.push({label:o,labelLine:h,seriesModel:n,dataIndex:e,dataType:t,layoutOption:i,computedLayoutOption:null,rect:l,hostRect:u,priority:u?u.width*u.height:0,defaultAttr:{ignore:o.ignore,labelGuideIgnore:h&&h.ignore,x:It.x,y:It.y,scaleX:It.scaleX,scaleY:It.scaleY,rotation:It.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:o.cursor,attachedPos:r.position,attachedRot:r.rotation}})},e.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var n=e.__model,o=n.get("labelLayout");(y(o)||x(o).length)&&e.group.traverse((function(e){if(e.ignore)return!0;var i=e.getTextContent(),a=b(e);i&&!i.disableLabelLayout&&t._addLabel(a.dataIndex,a.dataType,n,i,o)}))},e.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),n=e.getHeight();function o(e,t){return function(){mt(e,t)}}for(var i=0;i<this._labelList.length;i++){var a=this._labelList[i],r=a.label,s=r.__hostTarget,l=a.defaultAttr,u=void 0;u=(u="function"==typeof a.layoutOption?a.layoutOption(Tt(a,s)):a.layoutOption)||{},a.computedLayoutOption=u;var d=Math.PI/180;s&&s.setTextConfig({local:!1,position:null!=u.x||null!=u.y?null:l.attachedPos,rotation:null!=u.rotate?u.rotate*d:l.attachedRot,offset:[u.dx||0,u.dy||0]});var c=!1;if(null!=u.x?(r.x=_(u.x,t),r.setStyle("x",0),c=!0):(r.x=l.x,r.setStyle("x",l.style.x)),null!=u.y?(r.y=_(u.y,n),r.setStyle("y",0),c=!0):(r.y=l.y,r.setStyle("y",l.style.y)),u.labelLinePoints){var h=s.getTextGuideLine();h&&(h.setShape({points:u.labelLinePoints}),c=!1)}Dt(r).needsUpdateLabelLine=c,r.rotation=null!=u.rotate?u.rotate*d:l.rotation,r.scaleX=l.scaleX,r.scaleY=l.scaleY;for(var p=0;p<Lt.length;p++){var g=Lt[p];r.setStyle(g,null!=u[g]?u[g]:l.style[g])}if(u.draggable){if(r.draggable=!0,r.cursor="move",s){var f=a.seriesModel;null!=a.dataIndex&&(f=a.seriesModel.getData(a.dataType).getItemModel(a.dataIndex)),r.on("drag",o(s,f.getModel("labelLine")))}}else r.off("drag"),r.cursor=l.cursor}},e.prototype.layout=function(e){var t=e.getWidth(),n=e.getHeight(),o=M(this._labelList),i=w(o,(function(e){return"shiftX"===e.layoutOption.moveOverlap})),a=w(o,(function(e){return"shiftY"===e.layoutOption.moveOverlap}));S(i,0,t),A(a,0,n);var r=w(o,(function(e){return e.layoutOption.hideOverlap}));C(r)},e.prototype.processLabelsOverall=function(){var e=this;T(this._chartViewList,(function(t){var n=t.__model,o=t.ignoreLabelLineUpdate,i=n.isAnimationEnabled();t.group.traverse((function(t){if(t.ignore&&!t.forceLabelAnimation)return!0;var a=!o,r=t.getTextContent();!a&&r&&(a=Dt(r).needsUpdateLabelLine),a&&e._updateLabelLine(t,n),i&&e._animateLabels(t,n)}))}))},e.prototype._updateLabelLine=function(e,t){var n=e.getTextContent(),o=b(e),i=o.dataIndex;if(n&&null!=i){var a=t.getData(o.dataType),r=a.getItemModel(i),s={},l=a.getItemVisual(i,"style"),u=a.getVisual("drawType");s.stroke=l[u];var d=r.getModel("labelLine");St(e,At(r),s),mt(e,d)}},e.prototype._animateLabels=function(e,t){var n=e.getTextContent(),o=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!L(e))){var a=(g=Dt(n)).oldLayout,r=b(e),s=r.dataIndex,l={x:n.x,y:n.y,rotation:n.rotation},u=t.getData(r.dataType);if(a){n.attr(a);var d=e.prevStates;d&&(O(d,"select")>=0&&n.attr(g.oldLayoutSelect),O(d,"emphasis")>=0&&n.attr(g.oldLayoutEmphasis)),R(n,l,t,s)}else if(n.attr(l),!I(n).valueAnimation){var c=i(n.style.opacity,1);n.style.opacity=0,D(n,{style:{opacity:c}},t,s)}if(g.oldLayout=l,n.states.select){var h=g.oldLayoutSelect={};Rt(h,l,kt),Rt(h,n.states.select,kt)}if(n.states.emphasis){var p=g.oldLayoutEmphasis={};Rt(p,l,kt),Rt(p,n.states.emphasis,kt)}k(n,s,u,t,t)}if(o&&!o.ignore&&!o.invisible){a=(g=Ot(o)).oldLayout;var g,f={points:o.shape.points};a?(o.attr({shape:a}),R(o,{shape:f},t)):(o.setShape(f),o.style.strokePercent=0,D(o,{style:{strokePercent:1}},t)),g.oldLayout=f}},e}(),zt=v(),Et="\0_ec_interaction_mutex";function Bt(e,t){return!!Vt(e)[t]}function Vt(e){return e[Et]||(e[Et]={})}P({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},(function(){}));var Zt=function(e){function t(t){var n=e.call(this)||this;n._zr=t;var o=E(n._mousedownHandler,n),i=E(n._mousemoveHandler,n),a=E(n._mouseupHandler,n),s=E(n._mousewheelHandler,n),l=E(n._pinchHandler,n);return n.enable=function(e,n){this.disable(),this._opt=r(B(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",o),t.on("mousemove",i),t.on("mouseup",a)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",s),t.on("pinch",l))},n.disable=function(){t.off("mousedown",o),t.off("mousemove",i),t.off("mouseup",a),t.off("mousewheel",s),t.off("pinch",l)},n}return z(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!(V(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&Wt("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!Bt(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,o=this._x,i=this._y,a=t-o,r=n-i;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&N(e.event),Ht(this,"pan","moveOnMouseMove",e,{dx:a,dy:r,oldX:o,oldY:i,newX:t,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){V(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=Wt("zoomOnMouseWheel",e,this._opt),n=Wt("moveOnMouseWheel",e,this._opt),o=e.wheelDelta,i=Math.abs(o),a=e.offsetX,r=e.offsetY;if(0!==o&&(t||n)){if(t){var s=i>3?1.4:i>1?1.2:1.1;Nt(this,"zoom","zoomOnMouseWheel",e,{scale:o>0?s:1/s,originX:a,originY:r,isAvailableBehavior:null})}if(n){var l=Math.abs(o);Nt(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(o>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:r,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){Bt(this._zr,"globalPan")||Nt(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(H);function Nt(e,t,n,o,i){e.pointerChecker&&e.pointerChecker(o,i.originX,i.originY)&&(N(o.event),Ht(e,t,n,o,i))}function Ht(e,t,n,o,i){i.isAvailableBehavior=E(Wt,null,n,o),e.trigger(t,i)}function Wt(e,t,n){var o=n[e];return!e||o&&(!Z(o)||t.event[o+"Key"])}var Gt=e("R",Zt),Yt={axisPointer:1,tooltip:1,brush:1};function Xt(e,t,n){var o=t.getComponentByElement(e.topTarget),i=o&&o.coordinateSystem;return o&&o!==n&&!Yt.hasOwnProperty(o.mainType)&&i&&i.model!==n}function Ut(e,t,n,o,i,a){e=e||0;var r=n[1]-n[0];if(null!=i&&(i=jt(i,[0,r])),null!=a&&(a=Math.max(a,null!=i?i:0)),"all"===o){var s=Math.abs(t[1]-t[0]);s=jt(s,[0,r]),i=a=jt(s,[i,a]),o=0}t[0]=jt(t[0],n),t[1]=jt(t[1],n);var l=Ft(t,o);t[o]+=e;var u,d=i||0,c=n.slice();return l.sign<0?c[0]+=d:c[1]-=d,t[o]=jt(t[o],c),u=Ft(t,o),null!=i&&(u.sign!==l.sign||u.span<i)&&(t[1-o]=t[o]+l.sign*i),u=Ft(t,o),null!=a&&u.span>a&&(t[1-o]=t[o]+u.sign*a),t}function Ft(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function jt(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var qt=!0,Kt=Math.min,$t=Math.max,Jt=Math.pow,Qt="globalPan",en={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},tn={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},nn={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},on=0,an=function(e){function t(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new W,n._uid="brushController_"+on++,T(Rn,(function(e,t){this._handlers[t]=E(e,this)}),n),n}return z(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,n){Vt(e)[t]=n}(t,Qt,this._uid),T(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=G(B(nn),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,n){var o=Vt(e);o[t]===n&&(o[t]=null)}(e,Qt,this._uid),T(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};T(e,(function(e){t[e.panelId]=B(e)}))}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=Y(e,(function(e){return G(B(nn),e,!0)}));var t=this._covers,n=this._covers=[],o=this,i=this._creatingCover;return new X(t,e,(function(e,t){return a(e.__brushOption,t)}),a).add(r).update(r).remove((function(e){t[e]!==i&&o.group.remove(t[e])})).execute(),this;function a(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function r(a,r){var s=e[a];if(null!=r&&t[r]===i)n[a]=t[r];else{var l=n[a]=null!=r?(t[r].__brushOption=s,t[r]):sn(o,rn(o,s));dn(o,l)}}},t.prototype.unmount=function(){return this.enableBrush(!1),gn(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(H);function rn(e,t){var n=Pn[t.brushType].createCover(e,t);return n.__brushOption=t,un(n,t),e.group.add(n),n}function sn(e,t){var n=cn(t);return n.endCreating&&(n.endCreating(e,t),un(t,t.__brushOption)),t}function ln(e,t){var n=t.__brushOption;cn(t).updateCoverShape(e,t,n.range,n)}function un(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function dn(e,t){cn(t).updateCommon(e,t),ln(e,t)}function cn(e){return Pn[e.__brushOption.brushType]}function hn(e,t,n){var o,i=e._panels;if(!i)return qt;var a=e._transform;return T(i,(function(e){e.isTargetByCursor(t,n,a)&&(o=e)})),o}function pn(e,t){var n=e._panels;if(!n)return qt;var o=t.__brushOption.panelId;return null!=o?n[o]:qt}function gn(e){var t=e._covers,n=t.length;return T(t,(function(t){e.group.remove(t)}),e),t.length=0,!!n}function fn(e,t){var n=Y(e._covers,(function(e){var t=e.__brushOption,n=B(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function vn(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function mn(e,t,n,o){var i=new W;return i.add(new j({name:"main",style:_n(n),silent:!0,draggable:!0,cursor:"move",drift:F(Sn,e,t,i,["n","s","w","e"]),ondragend:F(fn,t,{isEnd:!0})})),T(o,(function(n){i.add(new j({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:F(Sn,e,t,i,n),ondragend:F(fn,t,{isEnd:!0})}))})),i}function yn(e,t,n,o){var i=o.brushStyle.lineWidth||0,a=$t(i,6),r=n[0][0],s=n[1][0],l=r-i/2,u=s-i/2,d=n[0][1],c=n[1][1],h=d-a+i/2,p=c-a+i/2,g=d-r,f=c-s,v=g+i,m=f+i;bn(e,t,"main",r,s,g,f),o.transformable&&(bn(e,t,"w",l,u,a,m),bn(e,t,"e",h,u,a,m),bn(e,t,"n",l,u,v,a),bn(e,t,"s",l,p,v,a),bn(e,t,"nw",l,u,a,a),bn(e,t,"ne",h,u,a,a),bn(e,t,"sw",l,p,a,a),bn(e,t,"se",h,p,a,a))}function xn(e,t){var n=t.__brushOption,o=n.transformable,i=t.childAt(0);i.useStyle(_n(n)),i.attr({silent:!o,cursor:o?"move":"default"}),T([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var i=t.childOfName(n.join("")),a=1===n.length?wn(e,n[0]):function(e,t){var n=[wn(e,t[0]),wn(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);i&&i.attr({silent:!o,invisible:!o,cursor:o?tn[a]+"-resize":null})}))}function bn(e,t,n,o,i,a,r){var s,l,u,d,c,h=t.childOfName(n);h&&h.setShape((s=Tn(e,t,[[o,i],[o+a,i+r]]),l=Kt(s[0][0],s[1][0]),u=Kt(s[0][1],s[1][1]),d=$t(s[0][0],s[1][0]),c=$t(s[0][1],s[1][1]),{x:l,y:u,width:d-l,height:c-u}))}function _n(e){return r({strokeNoScale:!0},e.brushStyle)}function Mn(e,t,n,o){var i=[Kt(e,n),Kt(t,o)],a=[$t(e,n),$t(t,o)];return[[i[0],a[0]],[i[1],a[1]]]}function wn(e,t){var n=q({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return K(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function Sn(e,t,n,o,i,a){var r=n.__brushOption,s=e.toRectRange(r.range),l=Cn(t,i,a);T(o,(function(e){var t=en[e];s[t[0]][t[1]]+=l[t[0]]})),r.range=e.fromRectRange(Mn(s[0][0],s[1][0],s[0][1],s[1][1])),dn(t,n),fn(t,{isEnd:!1})}function An(e,t,n,o){var i=t.__brushOption.range,a=Cn(e,n,o);T(i,(function(e){e[0]+=a[0],e[1]+=a[1]})),dn(e,t),fn(e,{isEnd:!1})}function Cn(e,t,n){var o=e.group,i=o.transformCoordToLocal(t,n),a=o.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function Tn(e,t,n){var o=pn(e,t);return o&&o!==qt?o.clipPath(n,e._transform):B(n)}function Ln(e){var t=e.event;t.preventDefault&&t.preventDefault()}function In(e,t,n){return e.childOfName("main").contain(t,n)}function Dn(e,t,n,o){var i,a=e._creatingCover,r=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],o=t[0],i=n[0]-o[0],a=n[1]-o[1];return Jt(i*i+a*a,.5)>6}(e)||a){if(r&&!a){"single"===s.brushMode&&gn(e);var l=B(s);l.brushType=On(l.brushType,r),l.panelId=r===qt?null:r.panelId,a=e._creatingCover=rn(e,l),e._covers.push(a)}if(a){var u=Pn[On(e._brushType,r)];a.__brushOption.range=u.getCreatingRange(Tn(e,a,e._track)),o&&(sn(e,a),u.updateCommon(e,a)),ln(e,a),i={isEnd:o}}}else o&&"single"===s.brushMode&&s.removeOnClick&&hn(e,t,n)&&gn(e)&&(i={isEnd:o,removeOnClick:!0});return i}function On(e,t){return"auto"===e?t.defaultBrushType:e}var Rn={mousedown:function(e){if(this._dragging)kn(this,e);else if(!e.target||!e.target.draggable){Ln(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=hn(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,o=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var o=e._zr;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}(e,t.offsetX,t.offsetY)){var o=e._zr,i=e._covers,a=hn(e,t,n);if(!e._dragging)for(var r=0;r<i.length;r++){var s=i[r].__brushOption;if(a&&(a===qt||s.panelId===a.panelId)&&Pn[s.brushType].contain(i[r],n[0],n[1]))return}a&&o.setCursorStyle("crosshair")}}(this,e,o),this._dragging){Ln(e);var i=Dn(this,e,o,!1);i&&fn(this,i)}},mouseup:function(e){kn(this,e)}};function kn(e,t){if(e._dragging){Ln(t);var n=t.offsetX,o=t.offsetY,i=e.group.transformCoordToLocal(n,o),a=Dn(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&fn(e,a)}}var Pn={lineX:zn(0),lineY:zn(1),rect:{createCover:function(e,t){function n(e){return e}return mn({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=vn(e);return Mn(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,o){yn(e,t,n,o)},updateCommon:xn,contain:In},polygon:{createCover:function(e,t){var n=new W;return n.add(new a({name:"main",style:_n(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new U({name:"main",draggable:!0,drift:F(An,e,t),ondragend:F(fn,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,o){t.childAt(0).setShape({points:Tn(e,t,n)})},updateCommon:xn,contain:In}};function zn(e){return{createCover:function(t,n){return mn({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=vn(t);return[Kt(n[0][e],n[1][e]),$t(n[0][e],n[1][e])]},updateCoverShape:function(t,n,o,i){var a,r=pn(t,n);if(r!==qt&&r.getLinearBrushOtherExtent)a=r.getLinearBrushOtherExtent(e);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[o,a];e&&l.reverse(),yn(t,n,l,i)},updateCommon:xn,contain:In}}var En=e("B",an);function Bn(e){return e=Nn(e),function(t){return $(t,e)}}function Vn(e,t){return e=Nn(e),function(n){var o=null!=t?t:n,i=o?e.width:e.height,a=o?e.x:e.y;return[a,a+(i||0)]}}function Zn(e,t,n){var o=Nn(e);return function(e,i){return o.contain(i[0],i[1])&&!Xt(e,t,n)}}function Nn(e){return m.create(e)}var Hn=["x","y","radius","angle","single"],Wn=["cartesian2d","polar","singleAxis"];function Gn(e){return e+"Axis"}function Yn(e,t){var n,o=J(),i=[],a=J();e.eachComponent({mainType:"dataZoom",query:t},(function(e){a.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",r)}while(n);function r(e){!a.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var i=o.get(e);i&&i[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){a.set(e.uid,!0),i.push(e),e.eachTargetAxis((function(e,t){(o.get(e)||o.set(e,[]))[t]=!0}))}return i}function Xn(e){var t=e.ecModel,n={infoList:[],infoMap:J()};return e.eachTargetAxis((function(e,o){var i=t.getComponent(Gn(e),o);if(i){var a=i.getCoordSysModel();if(a){var r=a.uid,s=n.infoMap.get(r);s||(s={model:a,axisModels:[]},n.infoList.push(s),n.infoMap.set(r,s)),s.axisModels.push(i)}}})),n}var Un=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),Fn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return z(t,e),t.prototype.init=function(e,t,n){var o=jn(e);this.settledOption=o,this.mergeDefaultAndTheme(e,n),this._doInit(o)},t.prototype.mergeOption=function(e){var t=jn(e);G(this.option,e,!0),G(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;T([["start","startValue"],["end","endValue"]],(function(e,o){"value"===this._rangePropMode[o]&&(t[e[0]]=n[e[0]]=null)}),this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=J();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return T(Hn,(function(n){var o=this.getReferringComponents(Gn(n),Q);if(o.specified){t=!0;var i=new Un;T(o.models,(function(e){i.add(e.componentIndex)})),e.set(n,i)}}),this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,o=!0;if(o){var i="vertical"===t?"y":"x";a(n.findComponents({mainType:i+"Axis"}),i)}function a(t,n){var i=t[0];if(i){var a=new Un;if(a.add(i.componentIndex),e.set(n,a),o=!1,"x"===n||"y"===n){var r=i.getReferringComponents("grid",ee).models[0];r&&T(t,(function(e){i.componentIndex!==e.componentIndex&&r===e.getReferringComponents("grid",ee).models[0]&&a.add(e.componentIndex)}))}}}o&&a(n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single"),o&&T(Hn,(function(t){if(o){var i=n.findComponents({mainType:Gn(t),filter:function(e){return"category"===e.get("type",!0)}});if(i[0]){var a=new Un;a.add(i[0].componentIndex),e.set(t,a),o=!1}}}),this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");T([["start","startValue"],["end","endValue"]],(function(o,i){var a=null!=e[o[0]],r=null!=e[o[1]];a&&!r?t[i]="percent":!a&&r?t[i]="value":n?t[i]=n[i]:a&&(t[i]="percent")}))},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(Gn(t),n))}),this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(n,o){T(n.indexList,(function(n){e.call(t,o,n)}))}))},t.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(Gn(e),t)},t.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;T([["start","startValue"],["end","endValue"]],(function(o){null==e[o[0]]&&null==e[o[1]]||(t[o[0]]=n[o[0]]=e[o[0]],t[o[1]]=n[o[1]]=e[o[1]])}),this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;T(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),o=0;o<n.length;o++)for(var i=n[o],a=this._targetAxisInfoMap.get(i),r=0;r<a.indexList.length;r++){var s=this.getAxisProxy(i,a.indexList[r]);if(s.hostedBy(this))return s;t||(t=s)}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={zlevel:0,z:4,filterMode:"filter",start:0,end:100},t}(te);function jn(e){var t={};return T(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}var qn=Fn,Kn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return z(t,e),t.type="dataZoom.select",t}(qn),$n=Kn,Jn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return z(t,e),t.prototype.render=function(e,t,n,o){this.dataZoomModel=e,this.ecModel=t,this.api=n},t.type="dataZoom",t}(ne),Qn=Jn,eo=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return z(t,e),t.type="dataZoom.select",t}(Qn),to=eo,no=T,oo=se,io=function(){function e(e,t,n,o){this._dimName=e,this._axisIndex=t,this.ecModel=o,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return O(Wn,t)>=0}(t)){var n=Gn(this._dimName),o=t.getReferringComponents(n,ee).models[0];o&&this._axisIndex===o.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return B(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,o=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),a=[0,100],r=[],s=[];no(["start","end"],(function(l,u){var d=e[l],c=e[l+"Value"];"percent"===i[u]?(null==d&&(d=a[u]),c=o.parse(oe(d,a,n))):(t=!0,c=null==c?n[u]:o.parse(c),d=oe(c,n,a)),s[u]=c,r[u]=d})),oo(s),oo(r);var l=this._minMaxSpan;function u(e,t,n,i,a){var r=a?"Span":"ValueSpan";Ut(0,e,n,"all",l["min"+r],l["max"+r]);for(var s=0;s<2;s++)t[s]=oe(e[s],n,i,!0),a&&(t[s]=o.parse(t[s]))}return t?u(s,r,n,a,!1):u(r,s,a,n,!0),{valueWindow:s,percentWindow:r}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var o=[1/0,-1/0];no(n,(function(e){ae(o,e.getData(),t)}));var i=e.getAxisModel(),a=re(i.axis.scale,i,o).calculate();return[a.min,a.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),i=e.get("filterMode"),a=this._valueWindow;"none"!==i&&no(o,(function(e){var t=e.getData(),o=t.mapDimensionsAll(n);if(o.length){if("weakFilter"===i){var r=t.getStore(),s=Y(o,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,i,l=0;l<o.length;l++){var u=r.get(s[l],e),d=!isNaN(u),c=u<a[0],h=u>a[1];if(d&&!c&&!h)return!0;d&&(i=!0),c&&(t=!0),h&&(n=!0)}return i&&t&&n}))}else no(o,(function(n){if("empty"===i)e.setData(t=t.map(n,(function(e){return function(e){return e>=a[0]&&e<=a[1]}(e)?e:NaN})));else{var o={};o[n]=a,t.selectRange(o)}}));no(o,(function(e){t.setApproximateExtent(a,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;no(["min","max"],(function(o){var i=t.get(o+"Span"),a=t.get(o+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?i=oe(n[0]+a,n,[0,100],!0):null!=i&&(a=oe(i,[0,100],n,!0)-n[0]),e[o+"Span"]=i,e[o+"ValueSpan"]=a}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var o=ie(n,[0,500]);o=Math.min(o,20);var i=e.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(o)),100!==t[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(o)),i.freeze()}},e}(),ao={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(o,i){var a=e.getComponent(Gn(o),i);t(o,i,a,n)}))}))}t((function(e,t,n,o){n.__dzAxisProxy=null}));var n=[];t((function(t,o,i,a){i.__dzAxisProxy||(i.__dzAxisProxy=new io(t,o,a,e),n.push(i.__dzAxisProxy))}));var o=J();return T(n,(function(e){T(e.getTargetSeriesModels(),(function(e){o.set(e.uid,e)}))})),o},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){e.getAxisProxy(t,n).reset(e)})),e.eachTargetAxis((function(n,o){e.getAxisProxy(n,o).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),o=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}}))}},ro=!1;function so(e){ro||(ro=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,ao),function(e){e.registerAction("dataZoom",(function(e,t){var n=Yn(t,e);T(n,(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function lo(e){e.registerComponentModel($n),e.registerComponentView(to),so(e)}var uo=e("T",(function(){})),co={};function ho(e,t){co[e]=t}function po(e){return co[e]}var go=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return z(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;T(this.option.feature,(function(e,n){var o=po(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(t)),G(e,o.defaultOption))}))},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(te),fo=go,vo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.render=function(e,t,n,o){var i=this.group;if(i.removeAll(),e.get("show")){var a=+e.get("itemSize"),r=e.get("feature")||{},s=this._features||(this._features={}),l=[];T(r,(function(e,t){l.push(t)})),new X(this._featureNames||[],l).add(u).update(u).remove(F(u,null)).execute(),this._featureNames=l,fe(i,e,n),i.add(ve(i.getBoundingRect(),e)),i.eachChild((function(e){var t=e.__title,o=e.ensureState("emphasis"),r=o.textConfig||(o.textConfig={}),s=e.getTextContent(),l=s&&s.states.emphasis;if(l&&!y(l)&&t){var u=l.style||(l.style={}),d=me(t,pe.makeFont(u)),c=e.x+i.x,h=!1;e.y+i.y+a+d.height>n.getHeight()&&(r.position="top",h=!0);var p=h?-5-d.height:a+8;c+d.width/2>n.getWidth()?(r.position=["100%",p],u.align="right"):c-d.width/2<0&&(r.position=[0,p],u.align="left")}}))}function u(u,d){var c,h=l[u],p=l[d],g=r[h],f=new le(g,e,e.ecModel);if(o&&null!=o.newTitle&&o.featureName===h&&(g.title=o.newTitle),h&&!p){if(function(e){return 0===e.indexOf("my")}(h))c={onclick:f.option.onclick,featureName:h};else{var v=po(h);if(!v)return;c=new v}s[h]=c}else if(!(c=s[p]))return;c.uid=ue("toolbox-feature"),c.model=f,c.ecModel=t,c.api=n;var m=c instanceof uo;h||!p?!f.get("show")||m&&c.unusable?m&&c.remove&&c.remove(t,n):(function(o,r,s){var l,u,d=o.getModel("iconStyle"),c=o.getModel(["emphasis","iconStyle"]),h=r instanceof uo&&r.getIcons?r.getIcons():o.get("icon"),p=o.get("title")||{};"string"==typeof h?(l={})[s]=h:l=h,"string"==typeof p?(u={})[s]=p:u=p;var g=o.iconPaths={};T(l,(function(s,l){var h=he(s,{},{x:-a/2,y:-a/2,width:a,height:a});h.setStyle(d.getItemStyle()),h.ensureState("emphasis").style=c.getItemStyle();var p=new pe({style:{text:u[l],align:c.get("textAlign"),borderRadius:c.get("textBorderRadius"),padding:c.get("textPadding"),fill:null},ignore:!0});h.setTextContent(p),ge({el:h,componentModel:e,itemName:l,formatterParamsExtra:{title:u[l]}}),h.__title=u[l],h.on("mouseover",(function(){var t=c.getItemStyle(),n="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";p.setStyle({fill:c.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:c.get("textBackgroundColor")}),h.setTextConfig({position:c.get("textPosition")||n}),p.ignore=!e.get("showTitle"),de(this)})).on("mouseout",(function(){"emphasis"!==o.get(["iconStatus",l])&&ce(this),p.hide()})),("emphasis"===o.get(["iconStatus",l])?de:ce)(h),i.add(h),h.on("click",E(r.onclick,r,t,n,l)),g[l]=h}))}(f,c,h),f.setIconStatus=function(e,t){var n=this.option,o=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,o[e]&&("emphasis"===t?de:ce)(o[e])},c instanceof uo&&c.render&&c.render(f,t,n,o)):m&&c.dispose&&c.dispose(t,n)}},t.prototype.updateView=function(e,t,n,o){T(this._features,(function(e){e instanceof uo&&e.updateView&&e.updateView(e.model,t,n,o)}))},t.prototype.remove=function(e,t){T(this._features,(function(n){n instanceof uo&&n.remove&&n.remove(e,t)})),this.group.removeAll()},t.prototype.dispose=function(e,t){T(this._features,(function(n){n instanceof uo&&n.dispose&&n.dispose(e,t)}))},t.type="toolbox",t}(ne),mo=vo,yo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.onclick=function(e,t){var n=this.model,o=n.get("name")||e.get("title.0.text")||"echarts",i="svg"===t.getZr().painter.getType(),a=i?"svg":n.get("type",!0)||"png",r=t.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||!ye.browser.newEdge&&(ye.browser.ie||ye.browser.edge))if(window.navigator.msSaveOrOpenBlob||i){var s=r.split(","),l=s[0].indexOf("base64")>-1,u=i?decodeURIComponent(s[1]):s[1];l&&(u=window.atob(u));var d=o+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var c=u.length,h=new Uint8Array(c);c--;)h[c]=u.charCodeAt(c);var p=new Blob([h]);window.navigator.msSaveOrOpenBlob(p,d)}else{var g=document.createElement("iframe");document.body.appendChild(g);var f=g.contentWindow,v=f.document;v.open("image/svg+xml","replace"),v.write(u),v.close(),f.focus(),v.execCommand("SaveAs",!0,d),document.body.removeChild(g)}}else{var m=n.get("lang"),y='<body style="margin:0;"><img src="'+r+'" style="max-width:100%;" title="'+(m&&m[0]||"")+'" /></body>',x=window.open();x.document.write(y),x.document.title=o}else{var b=document.createElement("a");b.download=o+"."+a,b.target="_blank",b.href=r;var _=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(_)}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},t}(uo);yo.prototype.unusable=!ye.canvasSupported;var xo=yo,bo="__ec_magicType_stack__",_o=[["line","bar"],["stack"]],Mo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return T(e.get("type"),(function(e){t[e]&&(n[e]=t[e])})),n},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,t,n){var o=this.model,i=o.get(["seriesIndex",n]);if(wo[n]){var a,s={series:[]};T(_o,(function(e){O(e,n)>=0&&T(e,(function(e){o.setIconStatus(e,"normal")}))})),o.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==i?null:{seriesIndex:i}},(function(e){var t=e.subType,i=e.id,a=wo[n](t,i,e,o);a&&(r(a,e.option),s.series.push(a));var l=e.coordinateSystem;if(l&&"cartesian2d"===l.type&&("line"===n||"bar"===n)){var u=l.getAxesByScale("ordinal")[0];if(u){var d=u.dim+"Axis",c=e.getReferringComponents(d,ee).models[0].componentIndex;s[d]=s[d]||[];for(var h=0;h<=c;h++)s[d][c]=s[d][c]||{};s[d][c].boundaryGap="bar"===n}}}));var l=n;"stack"===n&&(a=G({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),"emphasis"!==o.get(["iconStatus",n])&&(l="tiled")),t.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:a,featureName:"magicType"})}},t}(uo),wo={line:function(e,t,n,o){if("bar"===e)return G({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(e,t,n,o){if("line"===e)return G({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(e,t,n,o){var i=n.get("stack")===bo;if("line"===e||"bar"===e)return o.setIconStatus("stack",i?"normal":"emphasis"),G({id:t,stack:i?"":bo},o.get(["option","stack"])||{},!0)}};P({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var So=Mo,Ao=new Array(60).join("-"),Co="\t";function To(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Lo=new RegExp("[\t]+","g");function Io(e,t){var n=e.split(new RegExp("\n*"+Ao+"\n*","g")),o={series:[]};return T(n,(function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(Co)>=0)return!0}(e)){var i=function(e){for(var t=e.split(/\n+/g),n=To(t.shift()).split(Lo),o=[],i=Y(n,(function(e){return{name:e,data:[]}})),a=0;a<t.length;a++){var r=To(t[a]).split(Lo);o.push(r.shift());for(var s=0;s<r.length;s++)i[s]&&(i[s].data[a]=r[s])}return{series:i,categories:o}}(e),a=t[n],r=a.axisDim+"Axis";a&&(o[r]=o[r]||[],o[r][a.axisIndex]={data:i.categories},o.series=o.series.concat(i.series))}else i=function(e){for(var t=e.split(/\n+/g),n=To(t.shift()),o=[],i=0;i<t.length;i++){var a=To(t[i]);if(a){var r=a.split(Lo),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),o[i]={name:s,value:[]},l=o[i].value):l=o[i]=[];for(var d=0;d<r.length;d++)l.push(+r[d]);1===l.length&&(u?o[i].value=l[0]:o[i]=l[0])}}return{name:n,data:o}}(e),o.series.push(i)})),o}var Do=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.onclick=function(e,t){var n=t.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",i.style.backgroundColor=o.get("backgroundColor")||"#fff";var a=document.createElement("h4"),r=o.get("lang")||[];a.innerHTML=r[0]||o.get("title"),a.style.cssText="margin: 10px 20px;",a.style.color=o.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var u=o.get("optionToContent"),d=o.get("contentToOption"),c=function(e){var t,n,o,i=function(e){var t={},n=[],o=[];return e.eachRawSeries((function(e){var i=e.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)n.push(e);else{var a=i.getBaseAxis();if("category"===a.type){var r=a.dim+"_"+a.index;t[r]||(t[r]={categoryAxis:a,valueAxis:i.getOtherAxis(a),series:[]},o.push({axisDim:a.dim,axisIndex:a.index})),t[r].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:o}}(e);return{value:w([(n=i.seriesGroupByCategoryAxis,o=[],T(n,(function(e,t){var n=e.categoryAxis,i=e.valueAxis.dim,a=[" "].concat(Y(e.series,(function(e){return e.name}))),r=[n.model.getCategories()];T(e.series,(function(e){var t=e.getRawData();r.push(e.getRawData().mapArray(t.mapDimension(i),(function(e){return e})))}));for(var s=[a.join(Co)],l=0;l<r[0].length;l++){for(var u=[],d=0;d<r.length;d++)u.push(r[d][l]);s.push(u.join(Co))}o.push(s.join("\n"))})),o.join("\n\n"+Ao+"\n\n")),(t=i.other,Y(t,(function(e){var t=e.getRawData(),n=[e.name],o=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,i=arguments[e-1],a=t.getName(i),r=0;r<e-1;r++)o[r]=arguments[r];n.push((a?a+Co:"")+o.join(Co))})),n.join("\n")})).join("\n\n"+Ao+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+Ao+"\n\n"),meta:i.meta}}(e);if("function"==typeof u){var h=u(t.getOption());"string"==typeof h?s.innerHTML=h:xe(h)&&s.appendChild(h)}else s.appendChild(l),l.readOnly=o.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=o.get("textColor"),l.style.borderColor=o.get("textareaBorderColor"),l.style.backgroundColor=o.get("textareaColor"),l.value=c.value;var p=c.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:0;left:0;right:0;";var f="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),m=document.createElement("div");f+=";background-color:"+o.get("buttonColor"),f+=";color:"+o.get("buttonTextColor");var y=this;function x(){n.removeChild(i),y._dom=null}be(v,"click",x),be(m,"click",(function(){if(null==d&&null!=u||null!=d&&null==u)x();else{var e;try{e="function"==typeof d?d(s,t.getOption()):Io(l.value,p)}catch(n){throw x(),new Error("Data view format error "+n)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),x()}})),v.innerHTML=r[1],m.innerHTML=r[2],m.style.cssText=f,v.style.cssText=f,!o.get("readOnly")&&g.appendChild(m),g.appendChild(v),i.appendChild(a),i.appendChild(s),i.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(i),this._dom=i},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(uo);function Oo(e,t){return Y(e,(function(e,n){var o=t&&t[n];if(Me(o)&&!we(o)){Me(e)&&!we(e)||(e={value:e});var i=null!=o.name&&null==e.name;return e=r(e,o),i&&delete e.name,e}return e}))}P({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var n=[];T(e.newOption.series,(function(e){var o=t.getSeriesByName(e.name)[0];if(o){var i=o.get("data");n.push({name:e.name,data:Oo(e.data,i)})}else n.push(_e({type:"scatter"},e))})),t.mergeOption(r({series:n},e.newOption))}));var Ro=Do,ko=T,Po=v();function zo(e){var t=Po(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var Eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.onclick=function(e,t){!function(e){Po(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},t}(uo);P({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var Bo=Eo,Vo=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Zo=function(){function e(e,t,n){var o=this;this._targetInfoList=[];var i=Ho(t,e);T(Wo,(function(e,t){(!n||!n.include||O(n.include,t)>=0)&&e(i,o._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var o=Xo[e.brushType](0,n,t);e.__rangeOffset={offset:Fo[e.brushType](o.values,e.range,[1,1]),xyMinMax:o.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,n){T(e,(function(e){var o=this.findTargetInfo(e,t);o&&!0!==o&&T(o.coordSyses,(function(o){var i=Xo[e.brushType](1,o,e.range,!0);n(e,i.values,o,t)}))}),this)},e.prototype.setInputRanges=function(e,t){T(e,(function(e){var n,o,i,a,r,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var l=Xo[e.brushType](0,s.coordSys,e.coordRange),u=e.__rangeOffset;e.range=u?Fo[e.brushType](l.values,u.offset,(n=l.xyMinMax,o=u.xyMinMax,i=qo(n),a=qo(o),r=[i[0]/a[0],i[1]/a[1]],isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r)):l.values}}),this)},e.prototype.makePanelOpts=function(e,t){return Y(this._targetInfoList,(function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:Bn(o),isTargetByCursor:Zn(o,e,n.coordSysModel),getLinearBrushOtherExtent:Vn(o)}}))},e.prototype.controlSeries=function(e,t,n){var o=this.findTargetInfo(e,n);return!0===o||o&&O(o.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,o=Ho(t,e),i=0;i<n.length;i++){var a=n[i],r=e.panelId;if(r){if(a.panelId===r)return a}else for(var s=0;s<Go.length;s++)if(Go[s](o,a))return a}return!0},e}();function No(e){return e[0]>e[1]&&e.reverse(),e}function Ho(e,t){return Se(e,t,{includeMainTypes:Vo})}var Wo={grid:function(e,t){var n=e.xAxisModels,o=e.yAxisModels,i=e.gridModels,a=J(),r={},s={};(n||o||i)&&(T(n,(function(e){var t=e.axis.grid.model;a.set(t.id,t),r[t.id]=!0})),T(o,(function(e){var t=e.axis.grid.model;a.set(t.id,t),s[t.id]=!0})),T(i,(function(e){a.set(e.id,e),r[e.id]=!0,s[e.id]=!0})),a.each((function(e){var i=e.coordinateSystem,a=[];T(i.getCartesians(),(function(e,t){(O(n,e.getAxis("x").model)>=0||O(o,e.getAxis("y").model)>=0)&&a.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:Yo.grid,xAxisDeclared:r[e.id],yAxisDeclared:s[e.id]})})))},geo:function(e,t){T(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:Yo.geo})}))}},Go=[function(e,t){var n=e.xAxisModel,o=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&o&&(i=o.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],Yo={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(K(e)),t}},Xo={lineX:F(Uo,0),lineY:F(Uo,1),rect:function(e,t,n,o){var i=e?t.pointToData([n[0][0],n[1][0]],o):t.dataToPoint([n[0][0],n[1][0]],o),a=e?t.pointToData([n[0][1],n[1][1]],o):t.dataToPoint([n[0][1],n[1][1]],o),r=[No([i[0],a[0]]),No([i[1],a[1]])];return{values:r,xyMinMax:r}},polygon:function(e,t,n,o){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:Y(n,(function(n){var a=e?t.pointToData(n,o):t.dataToPoint(n,o);return i[0][0]=Math.min(i[0][0],a[0]),i[1][0]=Math.min(i[1][0],a[1]),i[0][1]=Math.max(i[0][1],a[0]),i[1][1]=Math.max(i[1][1],a[1]),a})),xyMinMax:i}}};function Uo(e,t,n,o){var i=n.getAxis(["x","y"][e]),a=No(Y([0,1],(function(e){return t?i.coordToData(i.toLocalCoord(o[e]),!0):i.toGlobalCoord(i.dataToCoord(o[e]))}))),r=[];return r[e]=a,r[1-e]=[NaN,NaN],{values:a,xyMinMax:r}}var Fo={lineX:F(jo,0),lineY:F(jo,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return Y(e,(function(e,o){return[e[0]-n[0]*t[o][0],e[1]-n[1]*t[o][1]]}))}};function jo(e,t,n,o){return[t[0]-o[e]*n[0],t[1]-o[e]*n[1]]}function qo(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var Ko=e("g",Zo),$o=T,Jo=Ce("toolbox-dataZoom_"),Qo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.render=function(e,t,n,o){this._brushController||(this._brushController=new En(n.getZr()),this._brushController.on("brush",E(this._onBrush,this)).mount()),function(e,t,n,o,i){var a=n._isZoomActive;o&&"takeGlobalCursor"===o.type&&(a="dataZoomSelect"===o.key&&o.dataZoomSelectActive),n._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var r=new Ko(ti(e),t,{include:["grid"]}).makePanelOpts(i,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(r).enableBrush(!(!a||!r.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,o,n),function(e,t){e.setIconStatus("back",function(e){return zo(e).length}(t)>1?"emphasis":"normal")}(e,t)},t.prototype.onclick=function(e,t,n){ei[n].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},o=this.ecModel;this._brushController.updateCovers([]),new Ko(ti(this.model),o,{include:["grid"]}).matchOutputRanges(t,o,(function(e,t,n){if("cartesian2d"===n.type){var o=e.brushType;"rect"===o?(i("x",n,t[0]),i("y",n,t[1])):i({lineX:"x",lineY:"y"}[o],n,t)}})),function(e,t){var n=zo(e);ko(t,(function(t,o){for(var i=n.length-1;i>=0&&!n[i][o];i--);if(i<0){var a=e.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(a){var r=a.getPercentRange();n[0][o]={dataZoomId:o,start:r[0],end:r[1]}}}})),n.push(t)}(o,n),this._dispatchZoomAction(n)}function i(e,t,i){var a=t.getAxis(e),r=a.model,s=function(e,t,n){var o;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(o=n)})),o}(e,r,o),l=s.findRepresentativeAxisProxy(r).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(i=Ut(0,i.slice(),a.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:i[0],endValue:i[1]})}},t.prototype._dispatchZoomAction=function(e){var t=[];$o(e,(function(e,n){t.push(B(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(uo),ei={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=zo(e),n=t[t.length-1];t.length>1&&t.pop();var o={};return ko(n,(function(e,n){for(var i=t.length-1;i>=0;i--)if(e=t[i][n]){o[n]=e;break}})),o}(this.ecModel))}};function ti(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}Ae("dataZoom",(function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var o=t.getModel(n),i=[],a=ti(o),r=Se(e,a);return $o(r.xAxisModels,(function(e){return s(e,"xAxis","xAxisIndex")})),$o(r.yAxisModels,(function(e){return s(e,"yAxis","yAxisIndex")})),i}function s(e,t,n){var a=e.componentIndex,r={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:Jo+t+a};r[n]=a,i.push(r)}}));var ni=Qo,oi=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return z(t,e),t.type="title",t.defaultOption={zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(te),ii=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return z(t,e),t.prototype.render=function(e,t,n){if(this.group.removeAll(),e.get("show")){var o=this.group,a=e.getModel("textStyle"),r=e.getModel("subtextStyle"),s=e.get("textAlign"),l=i(e.get("textBaseline"),e.get("textVerticalAlign")),u=new pe({style:Le(a,{text:e.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),c=e.get("subtext"),h=new pe({style:Le(r,{text:c,fill:r.getTextColor(),y:d.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=e.get("link"),g=e.get("sublink"),f=e.get("triggerEvent",!0);u.silent=!p&&!f,h.silent=!g&&!f,p&&u.on("click",(function(){Ie(p,"_"+e.get("target"))})),g&&h.on("click",(function(){Ie(g,"_"+e.get("subtarget"))})),b(u).eventData=b(h).eventData=f?{componentType:"title",componentIndex:e.componentIndex}:null,o.add(u),c&&o.add(h);var v=o.getBoundingRect(),m=e.getBoxLayoutParams();m.width=v.width,m.height=v.height;var y=De(m,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));s||("middle"===(s=e.get("left")||e.get("right"))&&(s="center"),"right"===s?y.x+=y.width:"center"===s&&(y.x+=y.width/2)),l||("center"===(l=e.get("top")||e.get("bottom"))&&(l="middle"),"bottom"===l?y.y+=y.height:"middle"===l&&(y.y+=y.height/2),l=l||"top"),o.x=y.x,o.y=y.y,o.markRedraw();var x={align:s,verticalAlign:l};u.setStyle(x),h.setStyle(x),v=o.getBoundingRect();var _=y.margin,M=e.getItemStyle(["color","opacity"]);M.fill=e.get("backgroundColor");var w=new j({shape:{x:v.x-_[3],y:v.y-_[0],width:v.width+_[1]+_[3],height:v.height+_[0]+_[2],r:e.get("borderRadius")},style:M,subPixelOptimize:!0,silent:!0});o.add(w)}},t.type="title",t}(ne),ai=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return z(t,e),t.type="dataZoom.inside",t.defaultOption=Oe(qn.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(qn),ri=ai,si=v();function li(e,t,n){si(e).coordSysRecordMap.each((function(e){var o=e.dataZoomInfoMap.get(t.uid);o&&(o.getRange=n)}))}function ui(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function di(e,t){e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function ci(e,t,n,o){return e.coordinateSystem.containPoint([n,o])}function hi(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,(function(e,t){var n=si(t),o=n.coordSysRecordMap||(n.coordSysRecordMap=J());o.each((function(e){e.dataZoomInfoMap=null})),e.eachComponent({mainType:"dataZoom",subType:"inside"},(function(e){var n=Xn(e);T(n.infoList,(function(n){var i=n.model.uid,a=o.get(i)||o.set(i,function(e,t){var n={model:t,containsPoint:F(ci,t),dispatchAction:F(di,e),dataZoomInfoMap:null,controller:null},o=n.controller=new Gt(e.getZr());return T(["pan","zoom","scrollMove"],(function(e){o.on(e,(function(t){var o=[];n.dataZoomInfoMap.each((function(i){if(t.isAvailableBehavior(i.model.option)){var a=(i.getRange||{})[e],r=a&&a(i.dzReferCoordSysInfo,n.model.mainType,n.controller,t);!i.model.get("disabled",!0)&&r&&o.push({dataZoomId:i.model.id,start:r[0],end:r[1]})}})),o.length&&n.dispatchAction(o)}))})),n}(t,n.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=J())).set(e.uid,{dzReferCoordSysInfo:n,model:e,getRange:null})}))})),o.each((function(e){var t,n=e.controller,i=e.dataZoomInfoMap;if(i){var a=i.keys()[0];null!=a&&(t=i.get(a))}if(t){var r=function(e){var t,n="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return e.each((function(e){var a=e.model,r=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");o[n+r]>o[n+t]&&(t=r),i=i&&a.get("preventDefaultMouseMove",!0)})),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}(i);n.enable(r.controlType,r.opt),n.setPointerChecker(e.containsPoint),Re(e,"dispatchAction",t.model.get("throttle",!0),"fixRate")}else ui(o,e)}))}))}var pi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return z(t,e),t.prototype.render=function(t,n,o){e.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),li(o,t,{pan:E(gi.pan,this),zoom:E(gi.zoom,this),scrollMove:E(gi.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){for(var n=si(e).coordSysRecordMap,o=n.keys(),i=0;i<o.length;i++){var a=o[i],r=n.get(a),s=r.dataZoomInfoMap;if(s){var l=t.uid;s.get(l)&&(s.removeKey(l),s.keys().length||ui(n,r))}}}(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(Qn),gi={zoom:function(e,t,n,o){var i=this.range,a=i.slice(),r=e.axisModels[0];if(r){var s=vi[t](null,[o.originX,o.originY],r,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/o.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Ut(0,a,[0,100],0,d.minSpan,d.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1]?a:void 0}},pan:fi((function(e,t,n,o,i,a){var r=vi[o]([a.oldX,a.oldY],[a.newX,a.newY],t,i,n);return r.signal*(e[1]-e[0])*r.pixel/r.pixelLength})),scrollMove:fi((function(e,t,n,o,i,a){return vi[o]([0,0],[a.scrollDelta,a.scrollDelta],t,i,n).signal*(e[1]-e[0])*a.scrollDelta}))};function fi(e){return function(t,n,o,i){var a=this.range,r=a.slice(),s=t.axisModels[0];if(s)return Ut(e(r,s,t,n,o,i),r,[0,100],"all"),this.range=r,a[0]!==r[0]||a[1]!==r[1]?r:void 0}}var vi={grid:function(e,t,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem.getRect();return e=e||[0,0],"x"===a.dim?(r.pixel=t[0]-e[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r},polar:function(e,t,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(r.pixel=t[0]-e[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=u[1]-u[0],r.pixelStart=u[0],r.signal=a.inverse?-1:1),r},singleAxis:function(e,t,n,o,i){var a=n.axis,r=i.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===a.orient?(s.pixel=t[0]-e[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s}},mi=pi;function yi(e){so(e),e.registerComponentModel(ri),e.registerComponentView(mi),hi(e)}var xi=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return z(t,e),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Oe(qn.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(qn),bi=xi,_i=j,Mi="horizontal",wi="vertical",Si=["line","bar","candlestick","scatter"],Ai={easing:"cubicOut",duration:100,delay:0},Ci=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return z(t,e),t.prototype.init=function(e,t){this.api=t,this._onBrush=E(this._onBrush,this),this._onBrushEnd=E(this._onBrushEnd,this)},t.prototype.render=function(t,n,o,i){if(e.prototype.render.apply(this,arguments),Re(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show")){if(t.noTarget())return this._clear(),void this.group.removeAll();i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){ke(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new W;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,n=e.get("brushSelect")?7:0,o=this._findCoordRect(),i={width:t.getWidth(),height:t.getHeight()},a=this._orient===Mi?{right:i.width-o.x-o.width,top:i.height-30-7-n,width:o.width,height:30}:{right:7,top:o.y,width:30,height:o.height},r=Pe(e.option);T(["right","top","width","height"],(function(e){"ph"===r[e]&&(r[e]=a[e])}));var s=De(r,i);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===wi&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,t=this._location,n=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),i=o&&o.get("inverse"),a=this._displayables.sliderGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==Mi||i?n===Mi&&i?{scaleY:r?1:-1,scaleX:-1}:n!==wi||i?{scaleY:r?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:r?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:r?1:-1,scaleX:1});var s=e.getBoundingRect([a]);e.x=t.x-s.x,e.y=t.y-s.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,n=this._displayables.sliderGroup,o=e.get("brushSelect");n.add(new _i({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var i=new _i({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:E(this._onClickPanel,this)}),a=this.api.getZr();o?(i.on("mousedown",this._onBrushStart,this),i.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),n.add(i)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var t=this._size,n=e.series,o=n.getRawData(),i=n.getShadowDim?n.getShadowDim():e.otherDim;if(null!=i){var r=o.getDataExtent(i),s=.3*(r[1]-r[0]);r=[r[0]-s,r[1]+s];var l,u=[0,t[1]],d=[0,t[0]],c=[[t[0],0],[0,0]],h=[],p=d[1]/(o.count()-1),g=0,f=Math.round(o.count()/t[0]);o.each([i],(function(e,t){if(f>0&&t%f)g+=p;else{var n=null==e||isNaN(e)||""===e,o=n?0:oe(e,r,u,!0);n&&!l&&t?(c.push([c[c.length-1][0],0]),h.push([h[h.length-1][0],0])):!n&&l&&(c.push([g,0]),h.push([g,0])),c.push([g,o]),h.push([g,o]),g+=p,l=n}}));for(var v=this.dataZoomModel,m=0;m<3;m++){var y=x(1===m);this._displayables.sliderGroup.add(y),this._displayables.dataShadowSegs.push(y)}}}function x(e){var t=v.getModel(e?"selectedDataBackground":"dataBackground"),n=new W,o=new U({shape:{points:c},segmentIgnoreThreshold:1,style:t.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),i=new a({shape:{points:h},segmentIgnoreThreshold:1,style:t.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(o),n.add(i),n}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,o=this.ecModel;return e.eachTargetAxis((function(i,a){var r=e.getAxisProxy(i,a).getTargetSeriesModels();T(r,(function(e){if(!(n||!0!==t&&O(Si,e.get("type"))<0)){var r,s=o.getComponent(Gn(i),a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[i],u=e.coordinateSystem;null!=l&&u.getOtherAxis&&(r=u.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),n={thisAxis:s,series:e,thisDim:i,otherDim:l,otherAxisInverse:r}}}),this)}),this),n}},t.prototype._renderHandle=function(){var e=this.group,t=this._displayables,n=t.handles=[null,null],o=t.handleLabels=[null,null],i=this._displayables.sliderGroup,a=this._size,r=this.dataZoomModel,s=this.api,l=r.get("borderRadius")||0,u=r.get("brushSelect"),d=t.filler=new _i({silent:u,style:{fill:r.get("fillerColor")},textConfig:{position:"inside"}});i.add(d),i.add(new _i({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:l},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),T([0,1],(function(t){var a=r.get("handleIcon");!ze[a]&&a.indexOf("path://")<0&&a.indexOf("image://")<0&&(a="path://"+a);var s=Ee(a,-1,0,2,2,null,!0);s.attr({cursor:Ti(this._orient),draggable:!0,drift:E(this._onDragMove,this,t),ondragend:E(this._onDragEnd,this),onmouseover:E(this._showDataInfo,this,!0),onmouseout:E(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),u=r.get("handleSize");this._handleHeight=_(u,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(r.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),Be(s);var d=r.get("handleColor");null!=d&&(s.style.fill=d),i.add(n[t]=s);var c=r.getModel("textStyle");e.add(o[t]=new pe({silent:!0,invisible:!0,style:Le(c,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:c.getTextColor(),font:c.getFont()}),z2:10}))}),this);var c=d;if(u){var h=_(r.get("moveHandleSize"),a[1]),p=t.moveHandle=new j({style:r.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:h}}),g=.8*h,f=t.moveHandleIcon=Ee(r.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);f.silent=!0,f.y=a[1]+h/2-.5,p.ensureState("emphasis").style=r.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var v=Math.min(a[1]/2,Math.max(h,10));(c=t.moveZone=new j({invisible:!0,shape:{y:a[1]-v,height:h+v}})).on("mouseover",(function(){s.enterEmphasis(p)})).on("mouseout",(function(){s.leaveEmphasis(p)})),i.add(p),i.add(f),i.add(c)}c.attr({draggable:!0,cursor:Ti(this._orient),drift:E(this._onDragMove,this,"all"),ondragstart:E(this._showDataInfo,this,!0),ondragend:E(this._onDragEnd,this),onmouseover:E(this._showDataInfo,this,!0),onmouseout:E(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[oe(e[0],[0,100],t,!0),oe(e[1],[0,100],t,!0)]},t.prototype._updateInterval=function(e,t){var n=this.dataZoomModel,o=this._handleEnds,i=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];Ut(t,o,i,n.get("zoomLock")?"all":e,null!=a.minSpan?oe(a.minSpan,r,i,!0):null,null!=a.maxSpan?oe(a.maxSpan,r,i,!0):null);var s=this._range,l=this._range=se([oe(o[0],i,r,!0),oe(o[1],i,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},t.prototype._updateView=function(e){var t=this._displayables,n=this._handleEnds,o=se(n.slice()),i=this._size;T([0,1],(function(e){var o=t.handles[e],a=this._handleHeight;o.attr({scaleX:a/2,scaleY:a/2,x:n[e]+(e?-1:1),y:i[1]/2-a/2})}),this),t.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:i[1]});var a={x:o[0],width:o[1]-o[0]};t.moveHandle&&(t.moveHandle.setShape(a),t.moveZone.setShape(a),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",a.x+a.width/2));for(var r=t.dataShadowSegs,s=[0,o[0],o[1],i[0]],l=0;l<r.length;l++){var u=r[l],d=u.getClipPath();d||(d=new j,u.setClipPath(d)),d.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:i[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,n=this._displayables,o=n.handleLabels,i=this._orient,a=["",""];if(t.get("showDetail")){var r=t.findRepresentativeAxisProxy();if(r){var s=r.getAxisModel().axis,l=this._range,u=e?r.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:r.getDataValueWindow();a=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var d=se(this._handleEnds.slice());function c(e){var t=K(n.handles[e].parent,this.group),r=q(0===e?"right":"left",t),s=this._handleWidth/2+5,l=Ve([d[e]+(0===e?-s:s),this._size[1]/2],t);o[e].setStyle({x:l[0],y:l[1],verticalAlign:i===Mi?"middle":r,align:i===Mi?r:"center",text:a[e]})}c.call(this,0),c.call(this,1)},t.prototype._formatLabel=function(e,t){var n=this.dataZoomModel,o=n.get("labelFormatter"),i=n.get("labelPrecision");null!=i&&"auto"!==i||(i=t.getPixelPrecision());var a=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(i,20));return y(o)?o(e,a):Z(o)?o.replace("{value}",a):a},t.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,n=t.handleLabels;n[0].attr("invisible",!e),n[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},t.prototype._onDragMove=function(e,t,n,o){this._dragging=!0,N(o.event);var i=this._displayables.sliderGroup.getLocalTransform(),a=Ve([t,n],i,!0),r=this._updateInterval(e,a[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),r&&s&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var t=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var o=this._handleEnds,i=(o[0]+o[1])/2,a=this._updateInterval("all",n[0]-i);this._updateView(),a&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var t=e.offsetX,o=e.offsetY;this._brushStart=new n(t,o),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,t){t.attr("ignore",!0);var n=t.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),i=[0,100];this._range=se([oe(n.x,o,i,!0),oe(n.x+n.width,o,i,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(N(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,t){var n=this._displayables,o=this.dataZoomModel,i=n.brushRect;i||(i=n.brushRect=new _i({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(i)),i.attr("ignore",!1);var a=this._brushStart,r=this._displayables.sliderGroup,s=r.transformCoordToLocal(e,t),l=r.transformCoordToLocal(a.x,a.y),u=this._size;s[0]=Math.max(Math.min(u[0],s[0]),0),i.setShape({x:l[0],y:0,width:s[0]-l[0],height:u[1]})},t.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?Ai:null,start:t[0],end:t[1]})},t.prototype._findCoordRect=function(){var e,t=Xn(this.dataZoomModel).infoList;if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var o=this.api.getWidth(),i=this.api.getHeight();e={x:.2*o,y:.2*i,width:.6*o,height:.6*i}}return e},t.type="dataZoom.slider",t}(Qn);function Ti(e){return"vertical"===e?"ns-resize":"ew-resize"}var Li=Ci;function Ii(e){e.registerComponentModel(bi),e.registerComponentView(Li),so(e)}var Di=2*Math.PI,Oi=Math.PI/180;function Ri(e,t){return De(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function ki(e,t){var n=Ri(e,t),o=e.get("center"),i=e.get("radius");we(i)||(i=[0,i]),we(o)||(o=[o,o]);var a=_(n.width,t.getWidth()),r=_(n.height,t.getHeight()),s=Math.min(a,r);return{cx:_(o[0],a)+n.x,cy:_(o[1],r)+n.y,r0:_(i[0],s/2),r:_(i[1],s/2)}}function Pi(e,t,n){t.eachSeriesByType(e,(function(e){var t=e.getData(),o=t.mapDimension("value"),i=Ri(e,n),a=ki(e,n),r=a.cx,s=a.cy,l=a.r,u=a.r0,d=-e.get("startAngle")*Oi,c=e.get("minAngle")*Oi,h=0;t.each(o,(function(e){!isNaN(e)&&h++}));var p=t.getSum(o),g=Math.PI/(p||h)*2,f=e.get("clockwise"),v=e.get("roseType"),m=e.get("stillShowZeroSum"),y=t.getDataExtent(o);y[0]=0;var x=Di,b=0,_=d,M=f?1:-1;if(t.setLayout({viewRect:i,r:l}),t.each(o,(function(e,n){var o;if(isNaN(e))t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:f,cx:r,cy:s,r0:u,r:v?NaN:l});else{(o="area"!==v?0===p&&m?g:e*g:Di/h)<c?(o=c,x-=c):b+=e;var i=_+M*o;t.setItemLayout(n,{angle:o,startAngle:_,endAngle:i,clockwise:f,cx:r,cy:s,r0:u,r:v?oe(e,y,[u,l]):l}),_=i}})),x<Di&&h)if(x<=.001){var w=Di/h;t.each(o,(function(e,n){if(!isNaN(e)){var o=t.getItemLayout(n);o.angle=w,o.startAngle=d+M*n*w,o.endAngle=d+M*(n+1)*w}}))}else g=x/b,_=d,t.each(o,(function(e,n){if(!isNaN(e)){var o=t.getItemLayout(n),i=o.angle===c?c:e*g;o.startAngle=_,o.endAngle=_+M*i,_+=M*i}}))}))}function zi(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var o=e.getData();o.filterSelf((function(e){for(var t=o.getName(e),i=0;i<n.length;i++)if(!n[i].isSelected(t))return!1;return!0}))}}}}var Ei=Math.PI/180;function Bi(e,t,n,o,i,a,r,s,l,u){if(!(e.length<2)){for(var d=e.length,c=0;c<d;c++)if("outer"===e[c].position&&"labelLine"===e[c].labelAlignTo){var h=e[c].label.x-u;e[c].linePoints[1][0]+=h,e[c].label.x=u}A(e,l,l+r)&&function(e){for(var a={list:[],maxY:0},r={list:[],maxY:0},s=0;s<e.length;s++)if("none"===e[s].labelAlignTo){var l=e[s],u=l.label.y>n?r:a,d=Math.abs(l.label.y-n);if(d>u.maxY){var c=l.label.x-t-l.len2*i,h=o+l.len,g=Math.abs(c)<h?Math.sqrt(d*d/(1-c*c/h/h)):h;u.rB=g,u.maxY=d}u.list.push(l)}p(a),p(r)}(e)}function p(e){for(var a=e.rB,r=a*a,s=0;s<e.list.length;s++){var l=e.list[s],u=Math.abs(l.label.y-n),d=o+l.len,c=d*d,h=Math.sqrt((1-Math.abs(u*u/r))*c);l.label.x=t+(h+l.len2)*i}}}function Vi(e){return"center"===e.position}function Zi(e){var t,o,i=e.getData(),a=[],r=!1,s=(e.get("minShowLabelAngle")||0)*Ei,l=i.getLayout("viewRect"),u=i.getLayout("r"),d=l.width,c=l.x,h=l.y,p=l.height;function g(e){e.ignore=!0}i.each((function(e){var l=i.getItemGraphicEl(e),h=l.shape,p=l.getTextContent(),f=l.getTextGuideLine(),v=i.getItemModel(e),m=v.getModel("label"),y=m.get("position")||v.get(["emphasis","label","position"]),x=m.get("distanceToLabelLine"),b=m.get("alignTo"),M=_(m.get("edgeDistance"),d),w=m.get("bleedMargin"),S=v.getModel("labelLine"),A=S.get("length");A=_(A,d);var C=S.get("length2");if(C=_(C,d),Math.abs(h.endAngle-h.startAngle)<s)return T(p.states,g),void(p.ignore=!0);if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(p)){var L,I,D,O,R=(h.startAngle+h.endAngle)/2,k=Math.cos(R),P=Math.sin(R);t=h.cx,o=h.cy;var z,E="inside"===y||"inner"===y;if("center"===y)L=h.cx,I=h.cy,O="center";else{var B=(E?(h.r+h.r0)/2*k:h.r*k)+t,V=(E?(h.r+h.r0)/2*P:h.r*P)+o;if(L=B+3*k,I=V+3*P,!E){var Z=B+k*(A+u-h.r),N=V+P*(A+u-h.r),H=Z+(k<0?-1:1)*C;L="edge"===b?k<0?c+M:c+d-M:H+(k<0?-x:x),I=N,D=[[B,V],[Z,N],[H,N]]}O=E?"center":"edge"===b?k>0?"right":"left":k>0?"left":"right"}var W=m.get("rotate");if("number"==typeof W)z=W*(Math.PI/180);else if("center"===y)z=0;else{var G=k<0?-R+Math.PI:-R;"radial"===W||!0===W?z=G:"tangential"===W&&"outside"!==y&&"outer"!==y?(z=G+Math.PI/2)>Math.PI/2&&(z-=Math.PI):z=0}if(r=!!z,p.x=L,p.y=I,p.rotation=z,p.setStyle({verticalAlign:"middle"}),E){p.setStyle({align:O});var Y=p.states.select;Y&&(Y.x+=p.x,Y.y+=p.y)}else{var X=p.getBoundingRect().clone();X.applyTransform(p.getComputedTransform());var U=(p.style.margin||0)+2.1;X.y-=U/2,X.height+=U,a.push({label:p,labelLine:f,position:y,len:A,len2:C,minTurnAngle:S.get("minTurnAngle"),maxSurfaceAngle:S.get("maxSurfaceAngle"),surfaceNormal:new n(k,P),linePoints:D,textAlign:O,labelDistance:x,labelAlignTo:b,edgeDistance:M,bleedMargin:w,rect:X})}l.setTextConfig({inside:E})}})),!r&&e.get("avoidLabelOverlap")&&function(e,t,n,o,i,a,r,s){for(var l=[],u=[],d=Number.MAX_VALUE,c=-Number.MAX_VALUE,h=0;h<e.length;h++){var p=e[h].label;Vi(e[h])||(p.x<t?(d=Math.min(d,p.x),l.push(e[h])):(c=Math.max(c,p.x),u.push(e[h])))}for(Bi(u,t,n,o,1,0,a,0,s,c),Bi(l,t,n,o,-1,0,a,0,s,d),h=0;h<e.length;h++){var g=e[h];if(p=g.label,!Vi(g)){var f=g.linePoints;if(f){var v="edge"===g.labelAlignTo,m=g.rect.width,y=void 0;(y=v?p.x<t?f[2][0]-g.labelDistance-r-g.edgeDistance:r+i-g.edgeDistance-f[2][0]-g.labelDistance:p.x<t?p.x-r-g.bleedMargin:r+i-p.x-g.bleedMargin)<g.rect.width&&(g.label.style.width=y,"edge"===g.labelAlignTo&&(m=y));var x=f[1][0]-f[2][0];v?p.x<t?f[2][0]=r+g.edgeDistance+m+g.labelDistance:f[2][0]=r+i-g.edgeDistance-m-g.labelDistance:(p.x<t?f[2][0]=p.x+g.labelDistance:f[2][0]=p.x-g.labelDistance,f[1][0]=f[2][0]+x),f[1][1]=f[2][1]=p.y}}}}(a,t,o,u,d,p,c,h);for(var f=0;f<a.length;f++){var v=a[f],m=v.label,y=v.labelLine,x=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),x&&(T(m.states,g),m.ignore=!0);var b=m.states.select;b&&(b.x+=m.x,b.y+=m.y)}if(y){var M=v.linePoints;x||!M?(T(y.states,g),y.ignore=!0):(bt(M,v.minTurnAngle),_t(M,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:M}),m.__hostTarget.textGuideLineConfig={anchor:new n(M[0][0],M[0][1])})}}}function Ni(e,t,n){var o=e.get("borderRadius");return null==o?n?{innerCornerRadius:0,cornerRadius:0}:null:(we(o)||(o=[o,o]),{innerCornerRadius:Ze(o[0],t.r0),cornerRadius:Ze(o[1],t.r)})}var Hi=function(e){function t(t,n,o){var i=e.call(this)||this;i.z2=2;var a=new pe;return i.setTextContent(a),i.updateData(t,n,o,!0),i}return z(t,e),t.prototype.updateData=function(e,t,n,o){var i=this,a=e.hostModel,r=e.getItemModel(t),s=r.getModel("emphasis"),l=e.getItemLayout(t),u=_e(Ni(r.getModel("itemStyle"),l,!0),l);if(isNaN(u.startAngle))i.setShape(u);else{o?(i.setShape(u),"scale"===a.getShallow("animationType")?(i.shape.r=l.r0,D(i,{shape:{r:l.r}},a,t)):null!=n?(i.setShape({startAngle:n,endAngle:n}),D(i,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},a,t)):(i.shape.endAngle=l.startAngle,R(i,{shape:{endAngle:l.endAngle}},a,t))):(Ne(i),R(i,{shape:u},a,t)),i.useStyle(e.getItemVisual(t,"style")),He(i,r);var d=(l.startAngle+l.endAngle)/2,c=a.get("selectedOffset"),h=Math.cos(d)*c,p=Math.sin(d)*c,g=r.getShallow("cursor");g&&i.attr("cursor",g),this._updateLabel(a,e,t),i.ensureState("emphasis").shape=We({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},Ni(s.getModel("itemStyle"),l)),_e(i.ensureState("select"),{x:h,y:p,shape:Ni(r.getModel(["select","itemStyle"]),l)}),_e(i.ensureState("blur"),{shape:Ni(r.getModel(["blur","itemStyle"]),l)});var f=i.getTextGuideLine(),v=i.getTextContent();f&&_e(f.ensureState("select"),{x:h,y:p}),_e(v.ensureState("select"),{x:h,y:p}),Be(this,s.get("focus"),s.get("blurScope"))}},t.prototype._updateLabel=function(e,t,n){var o=this,i=t.getItemModel(n),r=i.getModel("labelLine"),s=t.getItemVisual(n,"style"),l=s&&s.fill,u=s&&s.opacity;Ge(o,Ye(i),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:l,defaultOpacity:u,defaultText:e.getFormattedLabel(n,"normal")||t.getName(n)});var d=o.getTextContent();o.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var c=e.get(["label","position"]);if("outside"!==c&&"outer"!==c)o.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new a,this.setTextGuideLine(h)),St(this,At(i),{stroke:l,opacity:Xe(r.get(["lineStyle","opacity"]),u,1)})}},t}(Ue),Wi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return z(t,e),t.prototype.init=function(){var e=new W;this._sectorGroup=e},t.prototype.render=function(e,t,n,o){var i,a=e.getData(),r=this._data,s=this.group;if(!r&&a.count()>0){for(var l=a.getItemLayout(0),u=1;isNaN(l&&l.startAngle)&&u<a.count();++u)l=a.getItemLayout(u);l&&(i=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===a.count()&&e.get("showEmptyCircle")){var d=new Ue({shape:ki(e,n)});d.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,s.add(d)}a.diff(r).add((function(e){var t=new Hi(a,e,i);a.setItemGraphicEl(e,t),s.add(t)})).update((function(e,t){var n=r.getItemGraphicEl(t);n.updateData(a,e,i),n.off("click"),s.add(n),a.setItemGraphicEl(e,n)})).remove((function(t){var n=r.getItemGraphicEl(t);Fe(n,e,t)})).execute(),Zi(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=a)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var o=e[0]-n.cx,i=e[1]-n.cy,a=Math.sqrt(o*o+i*i);return a<=n.r&&a>=n.r0}},t.type="pie",t}(je),Gi=Wi;function Yi(e,t,n){t=we(t)&&{coordDimensions:t}||_e({encodeDefine:e.getEncode()},t);var o=e.getSource(),i=qe(o,t).dimensions,a=new Ke(i,e);return a.initData(o,n),a}var Xi=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),Ui=e("L",Xi),Fi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ui(E(this.getData,this),E(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return Yi(this,{coordDimensions:["value"],encodeDefaulter:F($e,this)})},t.prototype.getDataParams=function(t){var n=this.getData(),o=e.prototype.getDataParams.call(this,t),i=[];return n.each(n.mapDimension("value"),(function(e){i.push(e)})),o.percent=Je(i,t,n.hostModel.get("percentPrecision")),o.$vars.push("percent"),o},t.prototype._defaultLabelLine=function(e){Qe(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={zlevel:0,z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(et),ji=Fi}}}));
