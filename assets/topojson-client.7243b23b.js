import{g as r}from"./element-plus.c35c14b5.js";function t(r){return r}function e(r){if(null==r)return t;var e,n,o=r.scale[0],a=r.scale[1],c=r.translate[0],i=r.translate[1];return function(r,t){t||(e=n=0);var u=2,f=r.length,s=new Array(f);for(s[0]=(e+=r[0])*o+c,s[1]=(n+=r[1])*a+i;u<f;)s[u]=r[u],++u;return s}}function n(r){var t,n=e(r.transform),o=1/0,a=o,c=-o,i=-o;function u(r){(r=n(r))[0]<o&&(o=r[0]),r[0]>c&&(c=r[0]),r[1]<a&&(a=r[1]),r[1]>i&&(i=r[1])}function f(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(f);break;case"Point":u(r.coordinates);break;case"MultiPoint":r.coordinates.forEach(u)}}for(t in r.arcs.forEach((function(r){for(var t,e=-1,u=r.length;++e<u;)(t=n(r[e],e))[0]<o&&(o=t[0]),t[0]>c&&(c=t[0]),t[1]<a&&(a=t[1]),t[1]>i&&(i=t[1])})),r.objects)f(r.objects[t]);return[o,a,c,i]}function o(r,t){var e=t.id,n=t.bbox,o=null==t.properties?{}:t.properties,c=a(r,t);return null==e&&null==n?{type:"Feature",properties:o,geometry:c}:null==n?{type:"Feature",id:e,properties:o,geometry:c}:{type:"Feature",id:e,bbox:n,properties:o,geometry:c}}function a(r,t){var n=e(r.transform),o=r.arcs;function a(r,t){t.length&&t.pop();for(var e=o[r<0?~r:r],a=0,c=e.length;a<c;++a)t.push(n(e[a],a));r<0&&function(r,t){for(var e,n=r.length,o=n-t;o<--n;)e=r[o],r[o++]=r[n],r[n]=e}(t,c)}function c(r){return n(r)}function i(r){for(var t=[],e=0,n=r.length;e<n;++e)a(r[e],t);return t.length<2&&t.push(t[0]),t}function u(r){for(var t=i(r);t.length<4;)t.push(t[0]);return t}function f(r){return r.map(u)}return function r(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(r)};case"Point":e=c(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(c);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=f(t.arcs);break;case"MultiPolygon":e=t.arcs.map(f);break;default:return null}return{type:n,coordinates:e}}(t)}function c(r,t){var e={},n={},o={},a=[],c=-1;function i(r,t){for(var n in r){var o=r[n];delete t[o.start],delete o.start,delete o.end,o.forEach((function(r){e[r<0?~r:r]=1})),a.push(o)}}return t.forEach((function(e,n){var o,a=r.arcs[e<0?~e:e];a.length<3&&!a[1][0]&&!a[1][1]&&(o=t[++c],t[c]=e,t[n]=o)})),t.forEach((function(t){var e,a,c=function(t){var e,n=r.arcs[t<0?~t:t],o=n[0];r.transform?(e=[0,0],n.forEach((function(r){e[0]+=r[0],e[1]+=r[1]}))):e=n[n.length-1];return t<0?[e,o]:[o,e]}(t),i=c[0],u=c[1];if(e=o[i])if(delete o[e.end],e.push(t),e.end=u,a=n[u]){delete n[a.start];var f=a===e?e:e.concat(a);n[f.start=e.start]=o[f.end=a.end]=f}else n[e.start]=o[e.end]=e;else if(e=n[u])if(delete n[e.start],e.unshift(t),e.start=i,a=o[i]){delete o[a.end];var s=a===e?e:a.concat(e);n[s.start=a.start]=o[s.end=e.end]=s}else n[e.start]=o[e.end]=e;else n[(e=[t]).start=i]=o[e.end=u]=e})),i(o,n),i(n,o),t.forEach((function(r){e[r<0?~r:r]||a.push([r])})),a}function i(r,t,e){var n,o,a;if(arguments.length>1)n=u(r,t,e);else for(o=0,n=new Array(a=r.arcs.length);o<a;++o)n[o]=o;return{type:"MultiLineString",arcs:c(r,n)}}function u(r,t,e){var n,o=[],a=[];function c(r){var t=r<0?~r:r;(a[t]||(a[t]=[])).push({i:r,g:n})}function i(r){r.forEach(c)}function u(r){r.forEach(i)}return function r(t){switch(n=t,t.type){case"GeometryCollection":t.geometries.forEach(r);break;case"LineString":i(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":t.arcs.forEach(u)}}(t),a.forEach(null==e?function(r){o.push(r[0].i)}:function(r){e(r[0].g,r[r.length-1].g)&&o.push(r[0].i)}),o}function f(r,t){var e={},n=[],o=[];function i(r){r.forEach((function(t){t.forEach((function(t){(e[t=t<0?~t:t]||(e[t]=[])).push(r)}))})),n.push(r)}function u(t){return function(r){for(var t,e=-1,n=r.length,o=r[n-1],a=0;++e<n;)t=o,o=r[e],a+=t[0]*o[1]-t[1]*o[0];return Math.abs(a)}(a(r,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach((function r(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(r);break;case"Polygon":i(t.arcs);break;case"MultiPolygon":t.arcs.forEach(i)}})),n.forEach((function(r){if(!r._){var t=[],n=[r];for(r._=1,o.push(t);r=n.pop();)t.push(r),r.forEach((function(r){r.forEach((function(r){e[r<0?~r:r].forEach((function(r){r._||(r._=1,n.push(r))}))}))}))}})),n.forEach((function(r){delete r._})),{type:"MultiPolygon",arcs:o.map((function(t){var n,o=[];if(t.forEach((function(r){r.forEach((function(r){r.forEach((function(r){e[r<0?~r:r].length<2&&o.push(r)}))}))})),(n=(o=c(r,o)).length)>1)for(var a,i,f=1,s=u(o[0]);f<n;++f)(a=u(o[f]))>s&&(i=o[0],o[0]=o[f],o[f]=i,s=a);return o})).filter((function(r){return r.length>0}))}}function s(r,t){for(var e=0,n=r.length;e<n;){var o=e+n>>>1;r[o]<t?e=o+1:n=o}return e}function l(r){if(null==r)return t;var e,n,o=r.scale[0],a=r.scale[1],c=r.translate[0],i=r.translate[1];return function(r,t){t||(e=n=0);var u=2,f=r.length,s=new Array(f),l=Math.round((r[0]-c)/o),h=Math.round((r[1]-i)/a);for(s[0]=l-e,e=l,s[1]=h-n,n=h;u<f;)s[u]=r[u],++u;return s}}var h=r(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",bbox:n,feature:function(r,t){return"string"==typeof t&&(t=r.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return o(r,t)}))}:o(r,t)},mesh:function(r){return a(r,i.apply(this,arguments))},meshArcs:i,merge:function(r){return a(r,f.apply(this,arguments))},mergeArcs:f,neighbors:function(r){var t={},e=r.map((function(){return[]}));function n(r,e){r.forEach((function(r){r<0&&(r=~r);var n=t[r];n?n.push(e):t[r]=[e]}))}function o(r,t){r.forEach((function(r){n(r,t)}))}var a={LineString:n,MultiLineString:o,Polygon:o,MultiPolygon:function(r,t){r.forEach((function(r){o(r,t)}))}};for(var c in r.forEach((function r(t,e){"GeometryCollection"===t.type?t.geometries.forEach((function(t){r(t,e)})):t.type in a&&a[t.type](t.arcs,e)})),t)for(var i=t[c],u=i.length,f=0;f<u;++f)for(var l=f+1;l<u;++l){var h,p=i[f],g=i[l];(h=e[p])[c=s(h,g)]!==g&&h.splice(c,0,g),(h=e[g])[c=s(h,p)]!==p&&h.splice(c,0,p)}return e},quantize:function(r,t){if(r.transform)throw new Error("already quantized");if(t&&t.scale)u=r.bbox;else{if(!((e=Math.floor(t))>=2))throw new Error("n must be â‰¥2");var e,o=(u=r.bbox||n(r))[0],a=u[1],c=u[2],i=u[3];t={scale:[c-o?(c-o)/(e-1):1,i-a?(i-a)/(e-1):1],translate:[o,a]}}var u,f,s=l(t),h=r.objects,p={};function g(r){return s(r)}function y(r){var t;switch(r.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:r.geometries.map(y)};break;case"Point":t={type:"Point",coordinates:g(r.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:r.coordinates.map(g)};break;default:return r}return null!=r.id&&(t.id=r.id),null!=r.bbox&&(t.bbox=r.bbox),null!=r.properties&&(t.properties=r.properties),t}for(f in h)p[f]=y(h[f]);return{type:"Topology",bbox:u,transform:t,objects:p,arcs:r.arcs.map((function(r){var t,e=0,n=1,o=r.length,a=new Array(o);for(a[0]=s(r[0],0);++e<o;)((t=s(r[e],e))[0]||t[1])&&(a[n++]=t);return 1===n&&(a[n++]=[0,0]),a.length=n,a}))}},transform:e,untransform:l}));export{h as r};
